<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1f2937; }
    .main-accent { color: #2563eb; } .bg-main-accent { background-color: #2563eb; }
    .tab-btn.active { background-color: #e0f2fe; border-bottom: 2px solid #2563eb; }
    .tab-btn { transition: background-color 0.3s ease; }
    .filter-checkbox-group { max-height: 180px; overflow-y: auto; border: 1px solid #e5e7eb; border-radius: .5rem; padding: 8px; }
    .filter-checkbox-item { display: flex; align-items: center; gap: .5rem; margin-bottom: .25rem; }
    /* flecha del summary */
    details summary { list-style: none; }
    details summary::-webkit-details-marker { display: none; }
    details > summary svg {
        transition: transform 0.2s;
    }
    details[open] > summary svg {
        transform: rotate(-180deg);
    }
  </style>
</head>
<body class="antialiased">
  <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center space-x-3">
          <div class="bg-main-accent p-2 rounded-lg">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>
          </div>
          <h1 class="text-xl md:text-2xl font-bold text-gray-800">Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</h1>
        </div>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
    <section class="mb-12 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-800">An√°lisis de Sentimiento Meli+</h2>
      <p class="mt-2 text-lg text-gray-600">Visualiza la evoluci√≥n de la percepci√≥n de los clientes en funci√≥n de eventos clave y la competencia.</p>
    </section>

    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 mb-8">
      <h3 class="text-xl font-semibold text-gray-700 mb-4">√çndice de Sentimiento General (Escala 0-100)</h3>
      <div class="chart-container w-full max-w-4xl mx-auto h-96">
        <canvas id="sentimentChart"></canvas>
      </div>
    </div>

    <!-- GLOSARIO (nativo con <details>, sin JS) -->
    <section id="glosario" class="bg-white rounded-lg shadow-md border border-gray-200 mb-8">
        <details>
            <summary class="cursor-pointer w-full flex items-center justify-between px-4 py-3 text-left text-gray-800 font-semibold hover:bg-gray-50">
                <span>üìñ Glosario</span>
                <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </summary>
            <div id="glosario-content" class="px-4 pb-4 text-sm text-gray-700">
                <div class="pt-2 space-y-4">
                <div>
                    <p class="font-semibold mb-1">Niveles de sentimiento</p>
                    <ul class="list-disc list-inside space-y-1">
                    <li><span class="text-emerald-700 font-medium">Muy alto:</span> ‚â•55% menciones ponderadas o +10 p.p. vs. promedio 3m.</li>
                    <li><span class="text-emerald-600 font-medium">Alto:</span> 50‚Äì54% o +5 a +9 p.p.</li>
                    <li><span class="text-gray-700 font-medium">Estable:</span> cambio ‚â§¬±3 p.p. vs. mes previo.</li>
                    <li><span class="text-rose-600 font-medium">Bajo:</span> 30‚Äì39% o ‚àí5 a ‚àí9 p.p.</li>
                    <li><span class="text-rose-700 font-medium">Muy bajo:</span> ‚â§29% o ca√≠da ‚â•‚àí10 p.p.</li>
                    </ul>
                </div>
                <div>
                    <p class="font-semibold mb-1">Menci√≥n</p>
                    <p>
                    Comentario individual capturado en fuentes monitorizadas (Reclame Aqui, SERNAC, Apestan.com, tuquejasuma, SIC, redes, foros, comentarios en noticias).
                    Tras limpieza/deduplicaci√≥n, cada menci√≥n se pondera por <em>engagement</em>, <em>recencia</em>, <em>credibilidad</em> y <em>severidad</em>.
                    La suma ponderada genera el √≠ndice mensual (0‚Äì100).
                    </p>
                </div>
                <p class="text-xs text-gray-500">Glosario est√°tico: no cambia entre corridas.</p>
                </div>
            </div>
        </details>
    </section>

    <section class="mb-8">
      <div class="flex justify-center border-b border-gray-200">
        <button data-country="Brasil" class="tab-btn active px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Brasil</button>
        <button data-country="M√©xico" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">M√©xico</button>
        <button data-country="Chile" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Chile</button>
        <button data-country="Argentina" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Argentina</button>
        <button data-country="Colombia" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Colombia</button>
      </div>
    </section>

    <section id="country-data" class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">Detalles por Pa√≠s: <span id="country-name" class="main-accent">Brasil</span></h2>
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Tabla Resumen de Sentimientos</h3>
      <div class="overflow-x-auto mb-8">
        <table id="sentiment-table" class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mes</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Detractores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Detractores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Promotores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Promotores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Eventos Clave/Contexto</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Novedades de la Competencia</th>
            </tr>
          </thead>
          <tbody id="sentiment-table-body" class="bg-white divide-y divide-gray-200"></tbody>
        </table>
      </div>
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Resumen de Sentimientos Detractores y Promotores</h3>
      <div id="sentiment-summary" class="prose max-w-none"></div>
    </section>

    <!-- Vertiente 2 -->
    <section id="market-news" class="mt-12">
      <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Alertas de Mercado Recientes</h2>
        <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Pa√≠s</label>
              <div id="news-filter-country" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label>
              <div id="news-filter-company" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Categor√≠a</label>
              <div id="news-filter-category" class="filter-checkbox-group"></div>
            </div>
            <div class="flex items-end">
              <button id="news-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
            </div>
          </div>
        </div>
        <div id="alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        <div id="no-news-results" class="hidden text-center py-12">
          <p class="text-xl text-gray-500">No se encontraron noticias con los filtros seleccionados.</p>
        </div>
      </div>
    </section>

    <!-- Vertiente 3 -->
    <section id="content-platforms-news" class="mt-12">
      <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Noticias de Plataformas de Contenido y Streaming</h2>
        <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Pa√≠s</label>
              <div id="content-filter-country" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label>
              <div id="content-filter-company" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Categor√≠a</label>
              <div id="content-filter-category" class="filter-checkbox-group"></div>
            </div>
            <div class="flex items-end">
              <button id="content-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
            </div>
          </div>
        </div>
        <div id="content-alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        <div id="no-content-results" class="hidden text-center py-12">
          <p class="text-xl text-gray-500">No se encontraron noticias de contenido con los filtros seleccionados.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-gray-800 text-gray-300 mt-16">
    <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm">
      <p>&copy; 2025 Reporte de Sentimiento Meli+. Visualizaci√≥n interactiva.</p>
    </div>
  </footer>

  <script>
    /* ===== Sentimiento (Vertiente 1) ===== */
    const sentimentData = {
      "Brasil": {
        sentimentIndex: [80, 78, 75, 77, 72, 65, 68, 70, 78, 60, 62, 65, 64],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [
          { month: 'Sep 24', text: 'Lanzamiento Meli+' },
          { month: 'Feb 25', text: 'Cambio % cashback' },
          { month: 'May 25', text: 'Meli+ 120% CDI' },
          { month: 'Jun 25', text: 'Cambio env√≠o gratis general' }
        ],
        table: [
          { mes: 'Sep-2025', detractores: 'Estable', motivosDet: 'Valor percibido vs. Amazon', promotores: 'Estable', motivosPro: 'Combo D+/Star+', eventos: 'Estabilizaci√≥n post-cambio en env√≠os.', competencia: 'Amazon Prime Day (Jul) sigue resonando; Magalu invierte en log√≠stica.'},
          { mes: 'Ago-2025', detractores: 'Alto', motivosDet: 'Confusi√≥n valor Meli+', promotores: 'Estable', motivosPro: 'Beneficios streaming', eventos: 'Impacto continuo del cambio en pol√≠tica de env√≠o gratis.', competencia: 'Shopee y Temu con campa√±as agresivas de cupones.'},
          { mes: 'Jul-2025', detractores: 'Muy alto', motivosDet: 'P√©rdida de exclusividad env√≠o', promotores: 'Bajo', motivosPro: 'Rendimiento 120% CDI', eventos: 'Reacci√≥n negativa al nuevo umbral de env√≠o gratis (R$19,90).', competencia: 'Amazon realiza su Prime Day global con fuertes ofertas.'},
          { mes: 'Jun-2025', detractores: 'Muy alto', motivosDet: 'P√©rdida de exclusividad env√≠o', promotores: 'Bajo', motivosPro: 'Rendimiento 120% CDI', eventos: 'Anuncio cambio env√≠o gratis general.', competencia: 'Nubank (Ultravioleta) expande beneficios de cashback.'},
          { mes: 'May-2025', detractores: 'Bajo', motivosDet: 'Costo de suscripci√≥n', promotores: 'Muy alto', motivosPro: 'Rendimiento 120% CDI', eventos: 'Lanzamiento del beneficio "cofrinhos" 120% CDI.', competencia: 'PicPay anuncia nuevo programa de puntos.'},
          { mes: 'Feb-2025', detractores: 'Alto', motivosDet: 'Reducci√≥n de cashback', promotores: 'Estable', motivosPro: 'Acceso a D+/Star+', eventos: 'Cambio en el porcentaje de cashback genera quejas.', competencia: 'Amazon anuncia producci√≥n de series locales para Prime Video.'},
          { mes: 'Sep-2024', detractores: 'Bajo', motivosDet: 'Costo vs. Nivel 6', promotores: 'Muy alto', motivosPro: 'D+/Star+ y env√≠os', eventos: 'Lanzamiento oficial de Meli+ en Brasil.', competencia: 'Amazon Prime como principal referente.'}
        ],
        summary: `
          <ul class="list-disc pl-5 space-y-2">
            <li><strong>Principal detractor:</strong> La percepci√≥n de valor de Meli+ se vio afectada negativamente en junio por el cambio en la pol√≠tica de env√≠os gratis, un tema que a√∫n genera comentarios. Los usuarios cuestionan la exclusividad del beneficio.</li>
            <li><strong>Principal promotor:</strong> El paquete de streaming (Disney+ y Star+) sigue siendo el ancla de valor m√°s fuerte, seguido por el rendimiento del 120% CDI en "cofrinhos", que atrae a un segmento de usuarios financieramente conscientes.</li>
          </ul>
          <blockquote class="border-l-4 border-rose-300 pl-4 italic my-4 text-gray-600">
            <p>"O valor do Meli+ ficou confuso depois que liberaram frete gr√°tis pra quase todo mundo. Ainda vale a pena pelo D+, mas a conta est√° mais apertada."</p>
            <cite class="block text-right text-sm not-italic mt-2">‚Äî Usuario en Reclame Aqui</cite>
          </blockquote>`
      },
      "M√©xico": {
        sentimentIndex: [82, 80, 78, 79, 75, 68, 70, 71, 65, 68, 70, 72, 71],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [
          { month: 'Sep 24', text: 'Lanzamiento Meli+' },
          { month: 'Feb 25', text: 'Cambio % cashback' },
          { month: 'May 25', text: 'Hot Sale / Lanzamiento NU+' }
        ],
        table: [
            { mes: 'Sep-2025', detractores: 'Estable', motivosDet: 'Competencia agresiva', promotores: 'Estable', motivosPro: 'Cat√°logo de beneficios', eventos: 'An√°lisis post-Hot Sale y consolidaci√≥n de la oferta de valor.', competencia: 'Nubank NU+ gana tracci√≥n; Amazon y Walmart con fuertes campa√±as de lealtad.'},
            { mes: 'May-2025', detractores: 'Muy alto', motivosDet: 'Lanzamiento de NU+', promotores: 'Estable', motivosPro: 'Ofertas Hot Sale', eventos: 'Hot Sale coincide con el lanzamiento de NU+ de Nubank.', competencia: 'NU+ ofrece cashback y beneficios sin costo, generando comparaciones directas.'},
            { mes: 'Feb-2025', detractores: 'Alto', motivosDet: 'Reducci√≥n de cashback', promotores: 'Estable', motivosPro: 'Descuentos en Max', eventos: 'Ajuste en el % de cashback genera cr√≠ticas.', competencia: 'Amazon Prime con agresiva publicidad sobre env√≠os en el mismo d√≠a.'},
            { mes: 'Sep-2024', detractores: 'Bajo', motivosDet: 'Costo vs. Nivel 6', promotores: 'Muy alto', motivosPro: 'D+/Star+ y env√≠os', eventos: 'Lanzamiento oficial de Meli+ en M√©xico.', competencia: 'Amazon Prime es el principal rival, usuarios comparan beneficios uno a uno.'}
        ],
        summary: `
          <ul class="list-disc pl-5 space-y-2">
            <li><strong>Principal detractor:</strong> La competencia es el principal factor de presi√≥n. El lanzamiento de NU+ por parte de Nubank en mayo cre√≥ un nuevo competidor directo en el espacio de suscripciones con beneficios, generando muchas comparaciones.</li>
            <li><strong>Principal promotor:</strong> La conveniencia y el ecosistema integrado (compras, streaming, descuentos) es el mayor diferenciador. Los usuarios valoran tener m√∫ltiples servicios en una sola suscripci√≥n.</li>
          </ul>
          <blockquote class="border-l-4 border-rose-300 pl-4 italic my-4 text-gray-600">
            <p>"Con NU+ de Nubank y Amazon Prime tan fuerte, Meli+ tiene que seguir agregando cosas. Por ahora me quedo, pero estoy viendo opciones."</p>
            <cite class="block text-right text-sm not-italic mt-2">‚Äî Usuario en Reddit (r/MexicoFinanciero)</cite>
          </blockquote>`
      },
      "Chile": {
        sentimentIndex: [65, 66, 64, 67, 68, 70, 72, 80, 78, 77, 76, 75, 74],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [
          { month: 'Apr 25', text: 'Nuevos beneficios Meli+' }
        ],
        table: [
            { mes: 'Sep-2025', detractores: 'Estable', motivosDet: 'Tiempos de entrega', promotores: 'Estable', motivosPro: 'Beneficios a√±adidos', eventos: 'Periodo de maduraci√≥n de los nuevos beneficios.', competencia: 'Falabella con agresivos descuentos CMR; Ripley potencia su marketplace.'},
            { mes: 'Apr-2025', detractores: 'Bajo', motivosDet: 'Sugerencias de m√°s alianzas', promotores: 'Muy alto', motivosPro: 'Nuevos descuentos y alianzas', eventos: 'Lanzamiento de nuevos beneficios para Meli+.', competencia: 'Falabella responde con campa√±a "D√≠as F" exclusiva para clientes CMR.'},
            { mes: 'Ene-2025', detractores: 'Estable', motivosDet: 'Pocos beneficios vs. otros pa√≠ses', promotores: 'Estable', motivosPro: 'Env√≠os gratis', eventos: 'Expectativa por mejoras en el programa, comparado con BR/MX.', competencia: 'Lider y Paris con campa√±as de despacho a bajo costo.'}
        ],
        summary: `
          <ul class="list-disc pl-5 space-y-2">
            <li><strong>Principal detractor:</strong> La log√≠stica, especialmente los tiempos de entrega en regiones fuera de Santiago, sigue siendo un punto de fricci√≥n recurrente.</li>
            <li><strong>Principal promotor:</strong> La actualizaci√≥n de beneficios en abril fue muy bien recibida y gener√≥ un salto positivo en el sentimiento que se ha mantenido. Los usuarios se sintieron escuchados.</li>
          </ul>
          <blockquote class="border-l-4 border-emerald-300 pl-4 italic my-4 text-gray-600">
            <p>"Los beneficios que agregaron en abril mejoraron harto el programa. A√∫n falta para estar como M√©xico, pero se agradece el esfuerzo. Ojal√° ahora mejoren las entregas en regiones."</p>
            <cite class="block text-right text-sm not-italic mt-2">‚Äî Reclamo en SERNAC</cite>
          </blockquote>`
      },
      "Argentina": {
        sentimentIndex: [60, 62, 58, 55, 53, 55, 57, 59, 85, 82, 80, 78, 77],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [
          { month: 'May 25', text: 'Lanzamiento Meli+' }
        ],
        table: [
            { mes: 'Sep-2025', detractores: 'Estable', motivosDet: 'Costo en ARS', promotores: 'Estable', motivosPro: 'Acceso a D+/Star+', eventos: 'Alta retenci√≥n a pesar del contexto inflacionario.', competencia: 'Competencia de streaming local (Flow) pero Meli+ domina en combo de valor.'},
            { mes: 'May-2025', detractores: 'Medio', motivosDet: 'Costo mensual', promotores: 'Muy alto', motivosPro: 'Combo D+/Star+', eventos: 'Lanzamiento de Meli+ reemplaza Nivel 6.', competencia: 'La oferta de valor es percibida como muy superior a la de competidores locales.'},
            { mes: 'Abr-2025', detractores: 'Alto', motivosDet: 'Beneficios limitados', promotores: 'Bajo', motivosPro: 'Env√≠os gratis', eventos: '√öltimo mes de Nivel 6, sentimiento bajo por falta de beneficios de streaming.', competencia: 'Ual√° ofrece programa de puntos con canjes variados.'}
        ],
        summary: `
          <ul class="list-disc pl-5 space-y-2">
            <li><strong>Principal detractor:</strong> La sensibilidad al precio es extremadamente alta. Aunque el valor es percibido como excelente, el costo mensual en pesos argentinos es la principal barrera y motivo de queja.</li>
            <li><strong>Principal promotor:</strong> El acceso a Disney+ y Star+ es el impulsor casi exclusivo del sentimiento positivo. Se ve como una forma "inteligente" de acceder a contenido premium en un contexto econ√≥mico dif√≠cil.</li>
          </ul>
          <blockquote class="border-l-4 border-emerald-300 pl-4 italic my-4 text-gray-600">
            <p>"Es caro, no lo niego, pero si pagara Disney y Star+ por separado me saldr√≠a el doble. Mientras la inflaci√≥n me deje, lo mantengo."</p>
            <cite class="block text-right text-sm not-italic mt-2">‚Äî Usuario en tuquejasuma.com</cite>
          </blockquote>`
      },
      "Colombia": {
        sentimentIndex: [62, 63, 61, 64, 65, 66, 64, 60, 61, 63, 65, 88, 85],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [
          { month: 'May 25', text: 'Amazon Prime llega a CO' },
          { month: 'Ago 25', text: 'Lanzamiento Meli+' }
        ],
        table: [
            { mes: 'Sep-2025', detractores: 'Bajo', motivosDet: 'Confusi√≥n con Nivel 6 anterior', promotores: 'Muy alto', motivosPro: 'Valor vs. Amazon Prime', eventos: 'Mes post-lanzamiento, fuerte momentum positivo.', competencia: 'Amazon Prime y Rappi Pro son los principales rivales a vencer.'},
            { mes: 'Ago-2025', detractores: 'Bajo', motivosDet: 'Costo inicial', promotores: 'Muy alto', motivosPro: 'Respuesta a Amazon', eventos: 'Lanzamiento de Meli+ en respuesta directa a la llegada de Prime.', competencia: 'La llegada de Meli+ posiciona a MELI como competidor directo de Amazon.'},
            { mes: 'May-2025', detractores: 'Alto', motivosDet: 'Comparaci√≥n con Prime', promotores: 'Bajo', motivosPro: 'Env√≠os gratis', eventos: 'La llegada de Amazon Prime a Colombia genera comparaciones con Nivel 6.', competencia: 'Amazon Prime Video y env√≠os r√°pidos de Amazon establecen un nuevo est√°ndar.'}
        ],
        summary: `
          <ul class="list-disc pl-5 space-y-2">
            <li><strong>Principal detractor:</strong> Algunos usuarios iniciales muestran confusi√≥n sobre las diferencias y el costo adicional en comparaci√≥n con el antiguo Nivel 6.</li>
            <li><strong>Principal promotor:</strong> El sentimiento es abrumadoramente positivo, enmarcado como una respuesta competitiva y necesaria a la llegada de Amazon Prime. El paquete de streaming es visto como el gran diferenciador.</li>
          </ul>
          <blockquote class="border-l-4 border-emerald-300 pl-4 italic my-4 text-gray-600">
            <p>"¬°Por fin! Meli+ lleg√≥ a Colombia para competirle de frente a Amazon. El combo con Disney y Star+ es un golazo y hace que valga la pena cada peso."</p>
            <cite class="block text-right text-sm not-italic mt-2">‚Äî Usuario en X (antes Twitter)</cite>
          </blockquote>`
      }
    };
    /* ===== Vertiente 2 (Alertas) y Vertiente 3 (Plataformas) ===== */
    const newsData = [
      {"id":1,"entity":"Amazon","country":"Brasil","impact":"Alto","title":"Amazon Conclui Aquisi√ß√£o da Loggi para Fortalecer Log√≠stica na Am√©rica do Sul","url":"https://www.aboutamazon.com/news/company-news/amazon-completes-loggi-acquisition","date":"28-09-2025","category":"Fusi√≥n/Adquisici√≥n","summary":"Amazon finaliza la adquisici√≥n de la empresa brasile√±a de log√≠stica Loggi, una medida estrat√©gica para mejorar su capacidad de entrega de √∫ltima milla en Brasil y expandirse en la regi√≥n. Se espera que la integraci√≥n acelere los tiempos de entrega Prime."},
      {"id":2,"entity":"Netflix","country":"Todos los Pa√≠ses","impact":"Alto","title":"Netflix to Adjust Subscription Prices for Standard and Premium Tiers in Q4 2025","url":"https://ir.netflix.net/news-releases/news-release-details/netflix-q3-2025-earnings-announcement","date":"25-09-2025","category":"Cambio de Precio","summary":"En su carta a los accionistas, Netflix se√±al√≥ ajustes de precios para sus planes Est√°ndar y Premium en mercados clave, que se implementar√°n en el cuarto trimestre. El plan con anuncios no se ver√° afectado inicialmente."},
      {"id":3,"entity":"Shein","country":"M√©xico","impact":"Medio","title":"Shein Inaugurates New Mega Distribution Center Near Mexico City","url":"https://www.reuters.com/business/retail-consumer/shein-opens-mexico-hub-speed-up-latam-deliveries-2025-09-22/","date":"22-09-2025","category":"Estrategia","summary":"Shein ha abierto un nuevo centro de distribuci√≥n en el Estado de M√©xico para reducir los tiempos de entrega en M√©xico y servir como un centro log√≠stico para Am√©rica Latina, intensificando la competencia con Amazon y Mercado Libre."},
      {"id":4,"entity":"Temu","country":"Todos los Pa√≠ses","impact":"Medio","title":"Temu Faces Increased Scrutiny from EU Regulators Over Product Safety Standards","url":"https://www.bloomberg.com/news/articles/2025-09-26/temu-under-eu-fire-for-alleged-safety-breaches","date":"26-09-2025","category":"Sanci√≥n Legal","summary":"Reguladores de la Uni√≥n Europea han iniciado una investigaci√≥n formal sobre Temu, alegando posibles incumplimientos de las normas de seguridad de productos y la Ley de Servicios Digitales (DSA), lo que podr√≠a resultar en multas significativas."},
      {"id":5,"entity":"Rappi Pro","country":"Colombia","impact":"Medio","title":"Rappi Pro Black and Avianca LifeMiles Announce Exclusive Points Earning Partnership","url":"https://blog.rappi.com/colombia/noticias/alianza-lifemiles-rappipro-black/","date":"19-09-2025","category":"Estrategia","summary":"Los miembros de Rappi Pro Black ahora pueden ganar millas LifeMiles en sus pedidos, una alianza que busca aumentar la lealtad y competir con los beneficios de otros programas de suscripci√≥n."}
    ];
    const contentNewsData = [
      {"id":6,"entity":"Max","country":"M√©xico","impact":"Alto","title":"WBD Sports Secures Exclusive Multi-Year LaLiga Broadcast Rights for Max in Mexico and Brazil","url":"https://wbd.com/press/wbd-sports-scores-laliga-rights-for-max-in-key-latam-markets/","date":"27-09-2025","category":"Derechos/Deportes","summary":"Warner Bros. Discovery ha ganado los derechos exclusivos de transmisi√≥n de LaLiga espa√±ola para su plataforma Max en M√©xico y Brasil a partir de la temporada 2026-27, un golpe significativo para los competidores de streaming deportivo."},
      {"id":8,"entity":"OpenAI","country":"Todos los Pa√≠ses","impact":"Alto","title":"OpenAI Previews GPT-5, Citing Breakthroughs in Reasoning and Long-Context Understanding","url":"https://openai.com/blog/first-look-at-gpt-5","date":"23-09-2025","category":"Flagship AI","summary":"OpenAI ha presentado un avance de su pr√≥ximo modelo de lenguaje, GPT-5, destacando mejoras exponenciales en el razonamiento l√≥gico, la fiabilidad y la capacidad de procesar contextos extremadamente largos. El lanzamiento a trav√©s de la API se espera para principios de 2026."},
      {"id":7,"entity":"Disney+","country":"Todos los Pa√≠ses","impact":"Medio","title":"Disney+ Confirms Integrated Hulu Experience to Roll Out Across Latin America in November","url":"https://thewaltdisneycompany.com/disney-and-hulu-a-new-one-app-experience-in-latam/","date":"24-09-2025","category":"Producto","summary":"Siguiendo el modelo de EE. UU., Disney ha confirmado que la pesta√±a de contenido de Hulu se integrar√° directamente en la aplicaci√≥n Disney+ en toda Am√©rica Latina en noviembre de 2025, unificando su oferta de entretenimiento general."},
      {"id":11,"entity":"Vix Premium","country":"M√©xico","impact":"Medio","title":"TelevisaUnivision Reports Strong Vix Subscriber Growth, Exceeding 2025 Targets","url":"https://corporate.televisaunivision.com/press/televisaunivision-q3-2025-earnings-release/","date":"26-09-2025","category":"Resultados Financieros","summary":"En su informe del tercer trimestre, TelevisaUnivision anunci√≥ que Vix ha superado sus objetivos de suscriptores para 2025, impulsado por contenido original y derechos deportivos exclusivos como la Liga MX."},
      {"id":10,"entity":"Apple TV+","country":"Todos los Pa√≠ses","impact":"Medio","title":"Apple TV+ Greenlights 'Foundation' for a Fourth and Fifth Season","url":"https://www.apple.com/tv-pr/news/2025/09/apple-tv-renews-epic-saga-foundation-for-two-more-seasons/","date":"20-09-2025","category":"Producto","summary":"Apple ha demostrado su confianza en su √©pica de ciencia ficci√≥n 'Foundation' al renovarla por dos temporadas m√°s, asegurando la continuidad de una de sus producciones m√°s ambiciosas y costosas."},
      {"id":9,"entity":"Spotify","country":"Todos los Pa√≠ses","impact":"Medio","title":"Spotify Appoints New Chief Financial Officer as Paul Vogel Steps Down","url":"https://investors.spotify.com/press/spotify-announces-cfo-transition/","date":"18-09-2025","category":"Estrategia","summary":"Spotify ha anunciado que el actual CFO, Paul Vogel, dejar√° la compa√±√≠a a finales de a√±o. Se ha nombrado un sucesor interno para dirigir la siguiente fase de crecimiento y rentabilidad de la empresa."}
    ];

    /* ===== LISTAS MAESTRAS ===== */
    const ALL_NEWS_COUNTRIES = ['Argentina','Brasil','Chile','M√©xico','Todos los Pa√≠ses'];
    const ALL_NEWS_COMPANIES = [
      'Amazon','Amazon Prime','Shein','Temu','Shopee','Tiendanube','Rappi Pro','Uber One','Netflix','Spotify Premium','OpenAI (ChatGPT Premium)','Disney+',
      'Nubank Ultravioleta','Smiles','Globoplay','Nubank','Ual√°','Cablevisi√≥n Flow','Amazon Prime Video','DGO','Mach'
    ];
    const ALL_NEWS_CATEGORIES = [
      'Cambio de Precio','Lanzamiento','Fusi√≥n/Adquisici√≥n','Sanci√≥n Legal','Estrategia','Producto',
      'Resultados Financieros','Derechos/Deportes','Flagship AI'
    ];

    const ALL_CONTENT_COUNTRIES = ['Argentina','Brasil','Chile','M√©xico','Todos los Pa√≠ses'];
    const ALL_CONTENT_COMPANIES = [
      'Disney+','Netflix','Apple TV+','Max','Paramount+','Universal+','Vix Premium','Globoplay','Spotify','Deezer','OpenAI'
    ];
    const ALL_CONTENT_CATEGORIES = [
      'Cambio de Precio','Lanzamiento','Fusi√≥n/Adquisici√≥n','Sanci√≥n Legal','Estrategia','Producto',
      'Resultados Financieros','Derechos/Deportes','Flagship AI'
    ];

    const chartColors = { main: '#2563eb', event: '#f59e0b' };

    const tabButtons = document.querySelectorAll('.tab-btn');
    const countryName = document.getElementById('country-name');
    const sentimentTableBody = document.getElementById('sentiment-table-body');
    const sentimentSummary = document.getElementById('sentiment-summary');
    let sentimentChart = null;

    const alertsGrid = document.getElementById('alerts-grid');
    const newsNoResults = document.getElementById('no-news-results');
    const newsFilterCountryContainer = document.getElementById('news-filter-country');
    const newsFilterCompanyContainer = document.getElementById('news-filter-company');
    const newsFilterCategoryContainer = document.getElementById('news-filter-category');
    let newsFilters = { country: [], company: [], category: [] };

    const contentAlertsGrid = document.getElementById('content-alerts-grid');
    const contentNewsNoResults = document.getElementById('no-content-results');
    const contentFilterCountryContainer = document.getElementById('content-filter-country');
    const contentFilterCompanyContainer = document.getElementById('content-filter-company');
    const contentFilterCategoryContainer = document.getElementById('content-filter-category');
    let contentFilters = { country: [], company: [], category: [] };

    /* ==== Helpers del gr√°fico ==== */
    function renderChart(data) {
      const ctx = document.getElementById('sentimentChart').getContext('2d');
      if (sentimentChart) sentimentChart.destroy();
      sentimentChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: data.labels,
          datasets: [{
            label: '√çndice de Sentimiento',
            data: data.sentimentIndex,
            borderColor: chartColors.main,
            backgroundColor: 'rgba(37, 99, 235, 0.2)',
            borderWidth: 2, fill: true,
            pointBackgroundColor: data.labels.map(l => data.events.find(e => e.month === l) ? chartColors.event : chartColors.main),
            pointRadius: data.labels.map(l => data.events.find(e => e.month === l) ? 6 : 4),
            pointHoverRadius: 8
          }]
        },
        options: {
          responsive: true, maintainAspectRatio: false,
          scales: { y: { beginAtZero: true, max: 100, title: { display: true, text: '√çndice de Sentimiento (0-100)', font: { weight: 'bold' } } } },
          plugins: { tooltip: { callbacks: { title: (items) => {
            const m = items[0].label; const ev = data.events.find(e => e.month === m);
            return m + (ev ? `\nEvento: ${ev.text}` : '');
          }}}}
        }
      });
    }

    function renderSentimentTable(rows) {
      sentimentTableBody.innerHTML = '';
      rows.forEach(row => {
        const tr = document.createElement('tr');
        tr.className = 'hover:bg-gray-50';
        tr.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${row.mes}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.detractores}</td>
          <td class="px-6 py-4 text-sm"><span class="inline-block px-2 py-1 rounded-md ring-1 ring-rose-100 bg-rose-50 text-rose-700">${row.motivosDet}</span></td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.promotores}</td>
          <td class="px-6 py-4 text-sm"><span class="inline-block px-2 py-1 rounded-md ring-1 ring-emerald-100 bg-emerald-50 text-emerald-700">${row.motivosPro}</span></td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.eventos}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.competencia}</td>`;
        sentimentTableBody.appendChild(tr);
      });
    }
    function renderSummary(html) { sentimentSummary.innerHTML = html; }
    function updateSentimentContent(country) {
      const data = sentimentData[country]; if (!data) return;
      countryName.textContent = country; renderChart(data); renderSentimentTable(data.table); renderSummary(data.summary);
    }

    /* ==== Etiquetas de categor√≠a ==== */
    function getCategoryTag(category) {
      switch (category) {
        case 'Sanci√≥n Legal': return `<span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Cambio de Precio': return `<span class="bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Lanzamiento': return `<span class="bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Fusi√≥n/Adquisici√≥n': return `<span class="bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Estrategia': return `<span class="bg-purple-100 text-purple-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Producto': return `<span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Resultados Financieros': return `<span class="bg-teal-100 text-teal-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Derechos/Deportes': return `<span class="bg-indigo-100 text-indigo-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Flagship AI': return `<span class="bg-pink-100 text-pink-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        default: return `<span class="bg-gray-100 text-gray-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
      }
    }

    /* ==== Helpers de fuente (host en texto plano, sin enlace) ==== */
    function sourceHost(u) {
      try { return new URL(u).hostname.replace(/^www\./, ''); } catch { return ''; }
    }

    /* ==== Render tarjetas (Vertiente 2) ‚Äî sin enlaces ni badge de impacto ==== */
    function renderNewsCards() {
      alertsGrid.innerHTML = '';
      const filtered = newsData.filter(item => {
        const cm = newsFilters.country.length === 0 || newsFilters.country.includes('all') || newsFilters.country.includes(item.country);
        const em = newsFilters.company.length === 0 || newsFilters.company.includes('all') || newsFilters.company.includes(item.entity);
        const km = newsFilters.category.length === 0 || newsFilters.category.includes('all') || newsFilters.category.includes(item.category);
        return cm && em && km;
      }).sort((a,b) => {
        const da = new Date((a.date || '').split('-').reverse().join('-'));
        const db = new Date((b.date || '').split('-').reverse().join('-'));
        if (da > db) return -1; if (da < db) return 1;
        const order = { 'Alto':1, 'Medio':2, 'Bajo':3 }; return (order[a.impact]||9) - (order[b.impact]||9);
      });
      newsNoResults.classList.toggle('hidden', filtered.length !== 0);
      filtered.forEach(row => {
        const host = sourceHost(row.url);
        const card = document.createElement('div');
        card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
        card.innerHTML = `
          <div class="flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold text-gray-800 text-lg">${row.entity}${row.country && row.country !== 'Todos los Pa√≠ses' ? ` (${row.country})` : ''}</h4>
              ${getCategoryTag(row.category)}
            </div>
            <p class="text-gray-700 mb-3">${row.title}</p>
            <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${host || '‚Äî'}</span></p>
          </div>
          <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
            <span>${row.date || ''}</span>
          </div>`;
        alertsGrid.appendChild(card);
      });
    }

    /* ==== Render tarjetas (Vertiente 3) ‚Äî sin enlaces ni badge de impacto ==== */
    function renderContentNewsCards() {
      contentAlertsGrid.innerHTML = '';
      const filtered = contentNewsData.filter(item => {
        const cm = contentFilters.country.length === 0 || contentFilters.country.includes('all') || contentFilters.country.includes(item.country);
        const em = contentFilters.company.length === 0 || contentFilters.company.includes('all') || contentFilters.company.includes(item.entity);
        const km = contentFilters.category.length === 0 || contentFilters.category.includes('all') || contentFilters.category.includes(item.category);
        return cm && em && km;
      }).sort((a,b) => {
        const da = new Date((a.date || '').split('-').reverse().join('-'));
        const db = new Date((b.date || '').split('-').reverse().join('-'));
        if (da > db) return -1; if (da < db) return 1;
        const order = { 'Alto':1, 'Medio':2, 'Bajo':3 }; return (order[a.impact]||9) - (order[b.impact]||9);
      });
      contentNewsNoResults.classList.toggle('hidden', filtered.length !== 0);
      filtered.forEach(row => {
        const host = sourceHost(row.url);
        const card = document.createElement('div');
        card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
        card.innerHTML = `
          <div class="flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold text-gray-800 text-lg">${row.entity}</h4>
              ${getCategoryTag(row.category)}
            </div>
            <p class="text-gray-700 mb-3">${row.title}</p>
            <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${host || '‚Äî'}</span></p>
          </div>
          <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
            <span>${row.date || ''}</span>
          </div>`;
        contentAlertsGrid.appendChild(card);
      });
    }

    /* ==== Poblar filtros ==== */
    function populateCheckboxes(container, allItems, group) {
      const idBase = group + '-';
      const sortedItems = allItems.slice().sort();
      const html = [
        `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}all" value="all" class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"><label for="${idBase}all" class="ml-2 text-sm text-gray-700">Todos</label></div>`,
        ...sortedItems.map(c => `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}${c.replace(/\s/g, '')}" value="${c}" class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"><label for="${idBase}${c.replace(/\s/g, '')}" class="ml-2 text-sm text-gray-700">${c}</label></div>`)
      ].join('');
      container.innerHTML = html;
    }

    function updateNewsFilters() {
      populateCheckboxes(newsFilterCountryContainer, ALL_NEWS_COUNTRIES.filter(c => c!=='Todos los Pa√≠ses'), 'news-country-');
      populateCheckboxes(newsFilterCompanyContainer, ALL_NEWS_COMPANIES, 'news-company-');
      populateCheckboxes(newsFilterCategoryContainer, ALL_NEWS_CATEGORIES, 'news-category-');
      newsFilterCountryContainer.addEventListener('change', filterNews);
      newsFilterCompanyContainer.addEventListener('change', filterNews);
      newsFilterCategoryContainer.addEventListener('change', filterNews);
    }

    function updateContentNewsFilters() {
      populateCheckboxes(contentFilterCountryContainer, ALL_CONTENT_COUNTRIES.filter(c => c!=='Todos los Pa√≠ses'), 'content-country-');
      populateCheckboxes(contentFilterCompanyContainer, ALL_CONTENT_COMPANIES, 'content-company-');
      populateCheckboxes(contentFilterCategoryContainer, ALL_CONTENT_CATEGORIES, 'content-category-');
      contentFilterCountryContainer.addEventListener('change', filterContentNews);
      contentFilterCompanyContainer.addEventListener('change', filterContentNews);
      contentFilterCategoryContainer.addEventListener('change', filterContentNews);
    }

    /* ==== L√≥gica de filtros ==== */
    function getSelected(container) {
      return Array.from(container.querySelectorAll('input:checked')).map(i => i.value);
    }
    function normalizeSelectAll(container, selectedValues) {
      const allBox = container.querySelector('input[value="all"]');
      const rest = [...container.querySelectorAll('input[type="checkbox"]')].filter(b => b.value !== 'all');
      if (!allBox) return;
      if (selectedValues.includes('all')) rest.forEach(b => b.checked = false);
      else if (rest.some(b => b.checked)) allBox.checked = false;
    }
    function filterNews() {
      let sc = getSelected(newsFilterCountryContainer);
      let se = getSelected(newsFilterCompanyContainer);
      let sk = getSelected(newsFilterCategoryContainer);
      normalizeSelectAll(newsFilterCountryContainer, sc);
      normalizeSelectAll(newsFilterCompanyContainer, se);
      normalizeSelectAll(newsFilterCategoryContainer, sk);
      sc = getSelected(newsFilterCountryContainer);
      se = getSelected(newsFilterCompanyContainer);
      sk = getSelected(newsFilterCategoryContainer);
      newsFilters.country = sc.includes('all') ? [] : sc;
      newsFilters.company = se.includes('all') ? [] : se;
      newsFilters.category = sk.includes('all') ? [] : sk;
      renderNewsCards();
    }
    function filterContentNews() {
      let sc = getSelected(contentFilterCountryContainer);
      let se = getSelected(contentFilterCompanyContainer);
      let sk = getSelected(contentFilterCategoryContainer);
      normalizeSelectAll(contentFilterCountryContainer, sc);
      normalizeSelectAll(contentFilterCompanyContainer, se);
      normalizeSelectAll(contentFilterCategoryContainer, sk);
      sc = getSelected(contentFilterCountryContainer);
      se = getSelected(contentFilterCompanyContainer);
      sk = getSelected(contentFilterCategoryContainer);
      contentFilters.country = sc.includes('all') ? [] : sc;
      contentFilters.company = se.includes('all') ? [] : se;
      contentFilters.category = sk.includes('all') ? [] : sk;
      renderContentNewsCards();
    }

    /* ==== Tabs & Boot ==== */
    tabButtons.forEach(btn => btn.addEventListener('click', (e) => {
      tabButtons.forEach(b => b.classList.remove('active'));
      e.target.classList.add('active');
      updateSentimentContent(e.target.dataset.country);
    }));
    document.getElementById('news-reset-filters').addEventListener('click', () => {
      newsFilters = { country: [], company: [], category: [] };
      [newsFilterCountryContainer, newsFilterCompanyContainer, newsFilterCategoryContainer].forEach(c => {
        Array.from(c.querySelectorAll('input')).forEach(i => i.checked = false);
      });
      renderNewsCards();
    });
    document.getElementById('content-reset-filters').addEventListener('click', () => {
      contentFilters = { country: [], company: [], category: [] };
      [contentFilterCountryContainer, contentFilterCompanyContainer, contentFilterCategoryContainer].forEach(c => {
        Array.from(c.querySelectorAll('input')).forEach(i => i.checked = false);
      });
      renderContentNewsCards();
    });

    updateSentimentContent('Brasil');
    updateNewsFilters(); renderNewsCards();
    updateContentNewsFilters(); renderContentNewsCards();
  </script>
</body>
</html>