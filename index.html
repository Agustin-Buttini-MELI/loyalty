<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body{font-family:'Inter',sans-serif;background:#f8fafc;color:#1f2937;}
        .main-accent{color:#2563eb}.bg-main-accent{background:#2563eb}
        .tab-btn.active{background:#e0f2fe;border-bottom:2px solid #2563eb}
        .tab-btn{transition:background-color .3s ease}
        .filter-checkbox-group{max-height:180px;overflow-y:auto;border:1px solid #e5e7eb;border-radius:.5rem;padding:8px}
        .filter-checkbox-item{display:flex;align-items:center;gap:.5rem;margin-bottom:.25rem}
    </style>
</head>
<body class="antialiased">
    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <div class="bg-main-accent p-2 rounded-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/>
                        </svg>
                    </div>
                    <div class="flex flex-col">
                        <h1 class="text-xl md:text-2xl font-bold text-gray-800">Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</h1>
                        <a href="https://meli.looker.com/dashboards/25519?Site+id=&Tim+day+Month=13+month&Timeframe=MONTH&Tim+Day+Date=30+day&Reference+month+Month=1+year&Annual+%2F+Monthly+Plan=" target="_blank" rel="noopener noreferrer" aria-label="Resultados Internos Meli+" class="mt-1 inline-block px-3 py-1 bg-indigo-50 text-indigo-900 rounded-lg font-semibold text-sm border border-blue-100">
                            Resultados Internos Meli+
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <section class="mb-12 text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800">An√°lisis de Sentimiento Meli+</h2>
            <p class="mt-2 text-lg text-gray-600">Visualiza la evoluci√≥n de la percepci√≥n de los clientes en funci√≥n de eventos clave y la competencia.</p>
        </section>

        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 mb-8">
            <h3 class="text-xl font-semibold text-gray-700 mb-4">√çndice de Sentimiento General (Escala 0-100)</h3>
            <div class="w-full max-w-4xl mx-auto h-96">
                <canvas id="sentimentChart"></canvas>
            </div>
        </div>
        
        <section id="glosario" class="bg-white rounded-lg shadow-md border border-gray-200 mb-8">
            <button onclick="document.getElementById('glosario-content').classList.toggle('hidden')" class="w-full flex justify-between items-center px-4 py-3 text-left text-gray-800 font-semibold hover:bg-gray-50 focus:outline-none">
                üìñ Glosario
                <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
            </button>
            <div id="glosario-content" class="hidden px-4 pb-4 text-sm text-gray-700 space-y-4">
                <div>
                    <p class="font-semibold mb-1">Niveles de sentimiento</p>
                    <ul class="list-disc list-inside space-y-1">
                        <li><span class="text-emerald-700 font-medium">Muy alto:</span> ‚â•55% menciones o +10 p.p. vs. promedio 3m.</li>
                        <li><span class="text-emerald-600 font-medium">Alto:</span> 50‚Äì54% o +5 a +9 p.p.</li>
                        <li><span class="text-gray-700 font-medium">Estable:</span> cambio ‚â§¬±3 p.p. vs. mes previo.</li>
                        <li><span class="text-rose-600 font-medium">Bajo:</span> 30‚Äì39% o ‚àí5 a ‚àí9 p.p.</li>
                        <li><span class="text-rose-700 font-medium">Muy bajo:</span> ‚â§29% o ca√≠da ‚â•‚àí10 p.p.</li>
                    </ul>
                </div>
                <div>
                    <p class="font-semibold mb-1">Menci√≥n</p>
                    <p>Cada comentario capturado en fuentes monitorizadas (Reclame Aqui, SERNAC, Apestan.com, tuquejasuma, SIC, redes, foros, noticias). Tras limpieza y deduplicaci√≥n, se pondera por engagement, recencia, credibilidad y severidad. La suma ponderada genera el √≠ndice mensual (0‚Äì100).</p>
                </div>
            </div>
        </section>


        <section class="mb-8">
            <div class="flex justify-center border-b border-gray-200">
                <button data-country="Brasil" class="tab-btn active px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Brasil</button>
                <button data-country="M√©xico" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">M√©xico</button>
                <button data-country="Chile" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Chile</button>
                <button data-country="Argentina" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Argentina</button>
                <button data-country="Colombia" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Colombia</button>
            </div>
        </section>

        <section id="country-data" class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Detalles por Pa√≠s: <span id="country-name" class="main-accent">Brasil</span></h2>
            <h3 class="text-xl font-semibold text-gray-700 mb-4">Tabla Resumen de Sentimientos</h3>
            <div class="overflow-x-auto mb-8">
                <table id="sentiment-table" class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mes</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Detractores</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Detractores</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Promotores</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Promotores</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Eventos Clave/Contexto</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Novedades de la Competencia</th>
                        </tr>
                    </thead>
                    <tbody id="sentiment-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                </table>
            </div>
            <h3 class="text-xl font-semibold text-gray-700 mb-4">Resumen de Sentimientos Detractores y Promotores</h3>
            <div id="sentiment-summary" class="prose max-w-none"></div>
        </section>

        <section id="meli-summary-slide" class="mt-12">
            <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Meli+ Summary (Diapositiva Vinculada)</h2>
                <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
                    <iframe src="https://docs.google.com/presentation/d/e/2PACX-1vRWue6uIUvlRogZu1iCA9JCFqHVo8nzS-Ue4a6WOC08JqSTbsciuqK4m59exCMbQERuYuMDABCMhc-y/pubembed?start=false&loop=false&delayms=3000" frameborder="0" width="100%" height="450" allowfullscreen mozallowfullscreen webkitallowfullscreen></iframe>
                </div>
            </div>
        </section>

        <section id="market-news" class="mt-12">
            <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Alertas de Mercado Recientes</h2>
                <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div><label class="block text-sm font-medium text-gray-700 mb-1">Pa√≠s</label><div id="news-filter-country" class="filter-checkbox-group"></div></div>
                        <div><label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label><div id="news-filter-company" class="filter-checkbox-group"></div></div>
                        <div><label class="block text-sm font-medium text-gray-700 mb-1">Categor√≠a</label><div id="news-filter-category" class="filter-checkbox-group"></div></div>
                        <div class="flex items-end">
                            <button id="news-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
                        </div>
                    </div>
                </div>
                <div id="alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                <div id="no-news-results" class="hidden text-center py-12">
                    <p class="text-xl text-gray-500">No se encontraron noticias con los filtros seleccionados.</p>
                </div>
            </div>
        </section>

        <section id="content-platforms-news" class="mt-12">
            <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Noticias de Plataformas de Contenido y Streaming</h2>
                <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div><label class="block text-sm font-medium text-gray-700 mb-1">Pa√≠s</label><div id="content-filter-country" class="filter-checkbox-group"></div></div>
                        <div><label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label><div id="content-filter-company" class="filter-checkbox-group"></div></div>
                        <div><label class="block text-sm font-medium text-gray-700 mb-1">Categor√≠a</label><div id="content-filter-category" class="filter-checkbox-group"></div></div>
                        <div class="flex items-end">
                            <button id="content-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
                        </div>
                    </div>
                </div>
                <div id="content-alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                <div id="no-content-results" class="hidden text-center py-12">
                    <p class="text-xl text-gray-500">No se encontraron noticias de contenido con los filtros seleccionados.</p>
                </div>
            </div>
        </section>

    </main>
    <footer class="bg-gray-800 text-gray-300 mt-16">
        <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p>&copy; 2025 Reporte de Sentimiento Meli+. Visualizaci√≥n interactiva.</p>
        </div>
    </footer>
    <script>
const sentimentData = {
  "Brasil": {
    "sentimentIndex": [85, 82, 78, 75, 72, 65, 68, 70, 72, 60, 62, 68, 70, 80],
    "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25"],
    "events": [
      { "month": "Sep 24", "text": "Lanzamiento Meli+ BR" },
      { "month": "Feb 25", "text": "Cambio % cashback BR" },
      { "month": "May 25", "text": "Meli+ Cofrinhos 120% CDI" },
      { "month": "Jun 25", "text": "Cambio env√≠o gratis general" },
      { "month": "Oct 25", "text": "Lanzamiento Meli+ Mega" }
    ],
    "table": [
      { "mes": "Oct 25", "detractores": "Estables", "motivosDet": "Precio del nuevo tier", "promotores": "Muy alto", "motivosPro": "Bundle Meli+ Mega", "eventos": "Lanzamiento de Meli+ Mega con 4 streamings.", "competencia": "Rappi Pro Black lanzado. Amazon Prime mantiene su oferta." },
      { "mes": "Jun 25", "detractores": "En aumento", "motivosDet": "Env√≠o gratis general", "promotores": "Estables", "motivosPro": "Beneficios existentes", "eventos": "Implementaci√≥n de env√≠o gratis en compras > R$19,90 diluye valor percibido.", "competencia": "Shopee y Temu agresivos en env√≠os." },
      { "mes": "May 25", "detractores": "En baja", "motivosDet": "Costo mensual", "promotores": "En aumento", "motivosPro": "Cofrinhos 120% CDI", "eventos": "Lanzamiento de rendimientos en cuenta digital para miembros Meli+.", "competencia": "Nubank y PicPay con campa√±as de rendimiento." },
      { "mes": "Feb 25", "detractores": "Muy alto", "motivosDet": "Reducci√≥n cashback", "promotores": "En baja", "motivosPro": "Disney+ y env√≠os", "eventos": "Ajuste a la baja del porcentaje de cashback en Meli+", "competencia": "Amazon Prime con publicidad sobre sus beneficios." },
      { "mes": "Sep 24", "detractores": "Bajo", "motivosDet": "Confusi√≥n inicial", "promotores": "Muy alto", "motivosPro": "Disney+ y env√≠os gratis", "eventos": "Lanzamiento exitoso de Meli+.", "competencia": "Amazon Prime y Magalu como principales alternativas." }
    ],
    "summary": "<ul><li class=\"mb-2\"><strong>Pico de sentimiento positivo en octubre 2025</strong> impulsado por el lanzamiento de <strong>Meli+ Mega</strong>. La oferta de 4 servicios de streaming es percibida como de alto valor. Cita clave: <em>\"Pagar 40 reais por Netflix, Disney, Max e AppleTV √© inacredit√°vel. O Mercado Livre acertou em cheio.\"</em> (Usuario en X).</li><li class=\"mb-2\"><strong>Punto bajo en junio 2025</strong> por la percepci√≥n de devaluaci√≥n del beneficio de env√≠o gratis. Comentarios como <em>\"Se agora todo mundo tem frete gr√°tis acima de R$20, qual a vantagem de pagar o Meli+ s√≥ por isso?\"</em> (Comentario en Reclame Aqui) fueron frecuentes.</li><li class=\"mb-2\">El beneficio financiero <strong>'Cofrinhos 120% CDI'</strong> en mayo 2025 fue un acierto, atrayendo a usuarios que comparan con fintechs.</li></ul>"
  },
  "M√©xico": {
    "sentimentIndex": [88, 85, 82, 80, 75, 70, 72, 74, 76, 75, 74, 73, 72, 72],
    "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25"],
    "events": [
      { "month": "Sep 24", "text": "Lanzamiento Meli+ MX" },
      { "month": "Feb 25", "text": "Cambio % cashback MX" },
      { "month": "May 25", "text": "Hot Sale MX / Lanza NU+" }
    ],
    "table": [
      { "mes": "Oct 25", "detractores": "Estables", "motivosDet": "Costo vs. Amazon", "promotores": "Estables", "motivosPro": "Log√≠stica y Disney+", "eventos": "Per√≠odo sin grandes cambios, sentimiento se estabiliza.", "competencia": "Alerta de PROFECO sobre Temu refuerza confianza en Meli." },
      { "mes": "May 25", "detractores": "Estables", "motivosDet": "Competencia bancaria", "promotores": "En aumento", "motivosPro": "Ofertas Hot Sale", "eventos": "Hot Sale con descuentos exclusivos para Meli+.", "competencia": "Lanzamiento de NU+ por parte de Nubank genera comparaciones." },
      { "mes": "Feb 25", "detractores": "En aumento", "motivosDet": "Menos cashback", "promotores": "En baja", "motivosPro": "Env√≠os FULL", "eventos": "Reducci√≥n del beneficio de cashback genera quejas.", "competencia": "Amazon Prime promociona su cat√°logo de Prime Video." },
      { "mes": "Sep 24", "detractores": "Bajo", "motivosDet": "Publicidad de Max", "promotores": "Muy alto", "motivosPro": "Bundle (D+/Star+)", "eventos": "Excelente recepci√≥n del lanzamiento de Meli+.", "competencia": "Walmart y Liverpool con campa√±as agresivas." }
    ],
    "summary": "<ul><li class=\"mb-2\">El sentimiento se ha <strong>estabilizado en un nivel 'Alto' pero sin crecimiento</strong> tras la ca√≠da de febrero 2025. Los beneficios de log√≠stica (FULL) y el bundle de streaming son los pilares de la retenci√≥n.</li><li class=\"mb-2\">La principal queja recurrente es el <strong>costo de la suscripci√≥n</strong> en comparaci√≥n directa con Amazon Prime, especialmente cuando no se valoran los descuentos en otros servicios de streaming. <em>\"Si solo uso Disney+, me conviene pagarlo aparte. El Meli+ solo por los env√≠os ya no me cierra\"</em> (Comentario en Apestan.com).</li><li class=\"mb-2\">La alerta de PROFECO contra Temu en octubre 2025 gener√≥ un <strong>aumento marginal de confianza</strong> hacia Mercado Libre, percibido como un ecosistema m√°s seguro y confiable.</li></ul>"
  },
  "Chile": {
    "sentimentIndex": [70, 72, 70, 71, 73, 72, 74, 82, 80, 78, 77, 76, 75, 74],
    "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25"],
    "events": [
      { "month": "Abr 25", "text": "Nuevos beneficios Meli+ CL" }
    ],
    "table": [
      { "mes": "Abr 25", "detractores": "En baja", "motivosDet": "Pocos descuentos", "promotores": "En aumento", "motivosPro": "Nuevos beneficios", "eventos": "Inclusi√≥n de descuentos en supermercados y farmacias.", "competencia": "Falabella y Ripley con fuertes campa√±as de sus tarjetas." },
      { "mes": "Ene 25", "detractores": "Estables", "motivosDet": "Falta de beneficios", "promotores": "Estables", "motivosPro": "Env√≠os y Disney+", "eventos": "Sentimiento estable previo al anuncio de nuevos beneficios.", "competencia": "Amazon con crecimiento lento pero constante." }
    ],
    "summary": "<ul><li class=\"mb-2\">El <strong>pico de abril 2025</strong> demuestra el √©xito de la estrategia de agregar beneficios tangibles y locales, como descuentos en compras cotidianas (supermercados, farmacias).</li><li class=\"mb-2\">La conversaci√≥n de los detractores se centra en la <strong>comparaci√≥n con los ecosistemas de retail tradicionales</strong>. <em>\"Los descuentos de la tarjeta CMR de Falabella todav√≠a son m√°s potentes en muchas tiendas\"</em> (Usuario en Reddit r/chile).</li></ul>"
  },
  "Argentina": {
    "sentimentIndex": [60, 62, 61, 63, 65, 64, 66, 68, 82, 80, 78, 77, 76, 75],
    "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25"],
    "events": [
      { "month": "May 25", "text": "Lanzamiento Meli+ AR" }
    ],
    "table": [
      { "mes": "Oct 25", "detractores": "Estables", "motivosDet": "Precio en USD de SVODs", "promotores": "Estables", "motivosPro": "Env√≠os y cuotas", "eventos": "Sentimiento estable, se valora la log√≠stica local.", "competencia": "Expansi√≥n de Amazon en env√≠os al interior." },
      { "mes": "May 25", "detractores": "En baja", "motivosDet": "Migraci√≥n de Nivel 6", "promotores": "Muy alto", "motivosPro": "Bundle D+/Star+", "eventos": "Lanzamiento de Meli+ reemplazando Nivel 6, muy bien recibido.", "competencia": "Rappi Pro y Ual√° compiten en beneficios cruzados." }
    ],
    "summary": "<ul><li class=\"mb-2\">El <strong>salto a Meli+ en mayo 2025 fue un √©xito rotundo</strong>, simplificando la propuesta de valor de Nivel 6 y comunicando claramente el beneficio del bundle de streaming.</li><li class=\"mb-2\">La log√≠stica sigue siendo el principal promotor. <em>\"Vivo en Salta y que las cosas me lleguen en 2 d√≠as gratis con Meli+ no tiene precio. Amazon todav√≠a no llega a eso\"</em> (Usuario en tuquejasuma.com).</li></ul>"
  },
  "Colombia": {
    "sentimentIndex": [65, 66, 65, 67, 68, 67, 66, 64, 60, 62, 65, 85, 82, 80],
    "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25"],
    "events": [
      { "month": "May 25", "text": "Amazon Prime llega a CO" },
      { "month": "Ago 25", "text": "Lanzamiento Meli+ CO" }
    ],
    "table": [
      { "mes": "Ago 25", "detractores": "Bajo", "motivosDet": "Costo de suscripci√≥n", "promotores": "Muy alto", "motivosPro": "Propuesta de valor clara", "eventos": "Lanzamiento de Meli+, reemplaza Nivel 6. Gran aceptaci√≥n.", "competencia": "Amazon Prime y Rappi Pro como rivales directos." },
      { "mes": "May 25", "detractores": "En aumento", "motivosDet": "Comparaci√≥n de precios", "promotores": "Estables", "motivosPro": "Confianza en Meli", "eventos": "Nivel 6 percibe la presi√≥n del nuevo competidor.", "competencia": "Llegada de Amazon Prime al pa√≠s genera altas expectativas." }
    ],
    "summary": "<ul><li class=\"mb-2\">La llegada de Amazon Prime en mayo 2025 <strong>erosion√≥ temporalmente el sentimiento</strong> de Nivel 6, pero el <strong>lanzamiento de Meli+ en agosto 2025 revirti√≥ la tendencia de forma espectacular</strong>, superando las expectativas.</li><li class=\"mb-2\">Cita promotora clave: <em>\"Estaba esperando a que Amazon se pusiera fuerte pero con Meli+ ya no dudo. El combo con Disney+ y los env√≠os r√°pidos es lo mejor que hay ahora en Colombia\"</em> (Comentario en YouTube).</li></ul>"
  }
};
const newsData = [
  { "id": 1, "entity": "Temu", "country": "M√©xico", "impact": "Alto", "title": "PROFECO emite alerta sobre pr√°cticas comerciales y calidad de productos en Temu", "url": "https://www.gob.mx/profeco/prensa/alerta-rapida-plataforma-temu-2025", "date": "14-10-2025", "category": "Sanci√≥n Legal", "summary": "La Procuradur√≠a Federal del Consumidor (PROFECO) emiti√≥ una alerta sobre la plataforma Temu, citando un aumento en quejas sobre tiempos de entrega, calidad de productos y pol√≠ticas de devoluci√≥n poco claras. Aconseja a los consumidores tomar precauciones.", "analysis": "Impacto alto en la confianza del consumidor mexicano hacia nuevos marketplaces asi√°ticos. Puede beneficiar a plataformas establecidas como Mercado Libre si los consumidores buscan mayor seguridad." },
  { "id": 2, "entity": "Rappi Pro", "country": "Brasil", "impact": "Medio", "title": "Rappi Pro Black √© lan√ßado no Brasil com entregas gr√°tis ilimitadas e concierge", "url": "https://press.rappi.com/br/rappi-pro-black-launch-brazil", "date": "09-10-2025", "category": "Lanzamiento", "summary": "Rappi lanza \"Rappi Pro Black\", un nuevo tier de suscripci√≥n por encima de Rappi Pro, ofreciendo entregas gratuitas ilimitadas en todas las verticales, un servicio de concierge y descuentos exclusivos.", "analysis": "Intensifica la competencia en el segmento de suscripciones premium. Compite directamente con los beneficios de conveniencia de Meli+ y Uber One." },
  { "id": 3, "entity": "Shopee", "country": "Brasil", "impact": "Medio", "title": "Shopee Completes Acquisition of Logi-Tech, a Last-Mile Delivery Startup in Brazil", "url": "https://shopee.com/press/2025/10/05/shopee-completes-logi-tech-acquisition", "date": "05-10-2025", "category": "Fusi√≥n/Adquisici√≥n", "summary": "Shopee ha finalizado la adquisici√≥n de Logi-Tech, una startup brasile√±a especializada en optimizaci√≥n de entregas de √∫ltima milla, para fortalecer su red log√≠stica en el pa√≠s.", "analysis": "Movimiento estrat√©gico para mejorar su capacidad log√≠stica y competir con la red de Mercado Envios. Aunque es una adquisici√≥n menor, se√±ala una inversi√≥n a largo plazo en infraestructura." },
  { "id": 4, "entity": "Amazon Prime", "country": "Argentina", "impact": "Medio", "title": "Amazon expande env√≠os gratuitos de Prime a m√°s ciudades del interior de Argentina", "url": "https://www.aboutamazon.com/news/amazon-prime-expands-free-shipping-in-argentina", "date": "03-10-2025", "category": "Estrategia", "summary": "Amazon anunci√≥ la expansi√≥n de su servicio de env√≠o gratuito para miembros de Prime a 15 nuevas ciudades en el interior de Argentina, fortaleciendo su infraestructura log√≠stica.", "analysis": "Presi√≥n directa sobre la propuesta de valor log√≠stica de Mercado Libre en el interior del pa√≠s, una de sus principales fortalezas hist√≥ricas." }
];
const contentNewsData = [
  { "id": 101, "entity": "OpenAI", "country": "Global", "impact": "Alto", "title": "OpenAI Announces GPT-5 General Availability for Enterprise API Customers", "url": "https://openai.com/blog/gpt-5-api-release", "date": "15-10-2025", "category": "Flagship AI", "summary": "OpenAI ha anunciado la disponibilidad general (GA) de su modelo de lenguaje GPT-5 a trav√©s de la API para todos los clientes empresariales, con mejoras en razonamiento y multimodalidad." },
  { "id": 102, "entity": "Netflix", "country": "Global", "impact": "Medio", "title": "Netflix Confirms Second Season of 'Three-Body Problem' for Late 2026", "url": "https://about.netflix.com/en/news/three-body-problem-season-2-confirmed", "date": "11-10-2025", "category": "Producto", "summary": "Netflix ha confirmado oficialmente la renovaci√≥n de su ambiciosa serie de ciencia ficci√≥n 'El Problema de los Tres Cuerpos' para una segunda temporada, con estreno previsto para finales de 2026." },
  { "id": 103, "entity": "Disney+", "country": "Brasil", "impact": "Alto", "title": "Disney+ to Become Exclusive Streaming Home for All Brasileir√£o Matches in New Globoplay Partnership", "url": "https://thewaltdisneycompany.com/disney-plus-globoplay-brasileirao-partnership/", "date": "08-10-2025", "category": "Derechos/Deportes", "summary": "A trav√©s de una alianza con Globo, Disney+ se convertir√° en la casa exclusiva de streaming de todos los partidos del Brasileir√£o a partir de 2026, integrando la oferta deportiva de ESPN." },
  { "id": 104, "entity": "Max", "country": "M√©xico", "impact": "Bajo", "title": "WBD unifies HBO Max and Discovery+ user profiles in Mexico under the Max platform", "url": "https://press.wbd.com/mx/media-release/max-completes-user-profile-migration", "date": "06-10-2025", "category": "Producto", "summary": "Warner Bros. Discovery ha completado la migraci√≥n de perfiles de usuario de la antigua plataforma Discovery+ a Max en M√©xico, unificando historiales y recomendaciones." },
  { "id": 105, "entity": "Spotify", "country": "Global", "impact": "Medio", "title": "Spotify Introduces AI-Powered 'Live Session' Feature for Artists to Create Real-Time Remixes", "url": "https://artists.spotify.com/blog/introducing-live-sessions-ai-remixing", "date": "02-10-2025", "category": "Producto", "summary": "Spotify ha lanzado 'Live Sessions', una nueva herramienta en beta para artistas que utiliza IA para crear y transmitir remixes en tiempo real de su cat√°logo, interactuando con los fans." }
];

        const ALL_NEWS_COUNTRIES = ['Argentina','Brasil','Chile','M√©xico'];
        const ALL_NEWS_COMPANIES = [
            'Amazon Prime','Shein','Temu','Shopee','Tiendanube','Rappi Pro','Uber One','Netflix',
            'Spotify Premium','OpenAI (ChatGPT Premium)','Disney+','Nubank Ultravioleta','Smiles',
            'Globoplay','Nubank','Ual√°','Cablevisi√≥n Flow','Amazon Prime Video','DGO','Mach'
        ];
        const ALL_NEWS_CATEGORIES = [
            'Cambio de Precio','Lanzamiento','Fusi√≥n/Adquisici√≥n','Sanci√≥n Legal','Estrategia',
            'Producto','Resultados Financieros','Derechos/Deportes','Flagship AI'
        ];
        const ALL_CONTENT_COUNTRIES = ['Global','Argentina','Brasil','Chile','M√©xico'];
        const ALL_CONTENT_COMPANIES = [
            'Disney+','Netflix','Apple TV+','Max','Paramount+','Universal+','Vix Premium',
            'Globoplay','Spotify','Deezer','OpenAI'
        ];
        const ALL_CONTENT_CATEGORIES = ALL_NEWS_CATEGORIES.slice();

        const chartColors = { main:'#2563eb', event:'#f59e0b' };
        const tabButtons = document.querySelectorAll('.tab-btn');
        const countryName = document.getElementById('country-name');
        const sentimentTableBody = document.getElementById('sentiment-table-body');
        const sentimentSummary = document.getElementById('sentiment-summary');
        let sentimentChart = null;

        const alertsGrid = document.getElementById('alerts-grid');
        const newsNoResults = document.getElementById('no-news-results');
        const newsFilterCountryContainer = document.getElementById('news-filter-country');
        const newsFilterCompanyContainer = document.getElementById('news-filter-company');
        const newsFilterCategoryContainer = document.getElementById('news-filter-category');
        let newsFilters = { country:[], company:[], category:[] };

        const contentAlertsGrid = document.getElementById('content-alerts-grid');
        const contentNewsNoResults = document.getElementById('no-content-results');
        const contentFilterCountryContainer = document.getElementById('content-filter-country');
        const contentFilterCompanyContainer = document.getElementById('content-filter-company');
        const contentFilterCategoryContainer = document.getElementById('content-filter-category');
        let contentFilters = { country:[], company:[], category:[] };

        function renderChart(data){
            const ctx = document.getElementById('sentimentChart').getContext('2d');
            if (sentimentChart) sentimentChart.destroy();
            sentimentChart = new Chart(ctx,{
                type:'line',
                data:{
                    labels:data.labels,
                    datasets:[{
                        label:'√çndice de Sentimiento',
                        data:data.sentimentIndex,
                        borderColor:chartColors.main,
                        backgroundColor:'rgba(37,99,235,0.2)',
                        borderWidth:2,fill:true,
                        pointBackgroundColor:data.labels.map(l=>data.events.find(e=>e.month===l)?chartColors.event:chartColors.main),
                        pointRadius:data.labels.map(l=>data.events.find(e=>e.month===l)?6:4),
                        pointHoverRadius:8
                    }]
                },
                options:{
                    responsive:true,maintainAspectRatio:false,
                    scales:{y:{beginAtZero:true,max:100,title:{display:true,text:'√çndice de Sentimiento (0-100)',font:{weight:'bold'}}}},
                    plugins:{tooltip:{callbacks:{title:(items)=>{
                        const m=items[0].label;
                        const ev=data.events.find(e=>e.month===m);
                        return m+(ev?`\nEvento: ${ev.text}`:'');
                    }}}}
                }
            });
        }
        function renderSentimentTable(rows){
            sentimentTableBody.innerHTML='';
            rows.forEach(r=>{
                const tr=document.createElement('tr');
                tr.className='hover:bg-gray-50';
                tr.innerHTML = `<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${r.mes}</td>
                                <td class="px-6 py-4 text-sm text-gray-500">${r.detractores}</td>
                                <td class="px-6 py-4 text-sm"><span class="inline-block px-2 py-1 rounded-md ring-1 ring-rose-100 bg-rose-50 text-rose-700">${r.motivosDet}</span></td>
                                <td class="px-6 py-4 text-sm text-gray-500">${r.promotores}</td>
                                <td class="px-6 py-4 text-sm"><span class="inline-block px-2 py-1 rounded-md ring-1 ring-emerald-100 bg-emerald-50 text-emerald-700">${r.motivosPro}</span></td>
                                <td class="px-6 py-4 text-sm text-gray-500">${r.eventos}</td>
                                <td class="px-6 py-4 text-sm text-gray-500">${r.competencia}</td>`;
                sentimentTableBody.appendChild(tr);
            });
        }
        function renderSummary(html){
            sentimentSummary.innerHTML = html;
        }
        function updateSentimentContent(country){
            const data = sentimentData[country];
            if(!data) return;
            countryName.textContent = country;
            renderChart(data);
            renderSentimentTable(data.table);
            renderSummary(data.summary);
        }
        function getCategoryTag(c){
            switch(c){
                case 'Sanci√≥n Legal': return `<span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${c}</span>`;
                case 'Cambio de Precio': return `<span class="bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${c}</span>`;
                case 'Lanzamiento': return `<span class="bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${c}</span>`;
                case 'Fusi√≥n/Adquisici√≥n': return `<span class="bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${c}</span>`;
                case 'Estrategia': return `<span class="bg-purple-100 text-purple-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${c}</span>`;
                case 'Producto': return `<span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${c}</span>`;
                case 'Resultados Financieros': return `<span class="bg-teal-100 text-teal-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${c}</span>`;
                case 'Derechos/Deportes': return `<span class="bg-indigo-100 text-indigo-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${c}</span>`;
                case 'Flagship AI': return `<span class="bg-pink-100 text-pink-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${c}</span>`;
                default: return `<span class="bg-gray-100 text-gray-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${c}</span>`;
            }
        }
        function sourceHost(u){ try{return new URL(u).hostname.replace(/^www\./,'');}catch{return'';} }

        function renderCards(data,filters,grid,noResults,showCountry){
            grid.innerHTML='';
            const filtered=data.filter(item=>{
                const cm=!filters.country.length||filters.country.includes(item.country);
                const em=!filters.company.length||filters.company.includes(item.entity);
                const km=!filters.category.length||filters.category.includes(item.category);
                return cm&&em&&km;
            }).sort((a,b)=>{
                const da=new Date((a.date||'').split('-').reverse().join('-'));
                const db=new Date((b.date||'').split('-').reverse().join('-'));
                if(da>db) return -1;
                if(da<db) return 1;
                const o={Alto:1,Medio:2,Bajo:3};
                return (o[a.impact]||9)-(o[b.impact]||9);
            });
            noResults.classList.toggle('hidden',filtered.length!==0);
            filtered.forEach(row=>{
                const h=sourceHost(row.url);
                const card=document.createElement('div');
                card.className='bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
                card.innerHTML= `<div class="flex-grow">
                                    <div class="flex justify-between items-start mb-2">
                                        <h4 class="font-bold text-gray-800 text-lg">${row.entity}${showCountry&&row.country&&row.country!=='Global'?` (${row.country})`:''}</h4>
                                        ${getCategoryTag(row.category)}
                                    </div>
                                    <p class="text-gray-700 mb-3">${row.title}</p>
                                    <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${h||'‚Äî'}</span></p>
                                 </div>
                                 <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
                                    <span>${row.date||''}</span>
                                 </div>`;
                grid.appendChild(card);
            });
        }
        function populateCheckboxes(container,items,groupLabel){
            const idBase = container.id + '-';
            const html = [
                `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}all" value="all" class="mr-2" checked><label for="${idBase}all">Todos</label></div>`,
                ...[...new Set(items)].sort().map(c=>`<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}${c}" value="${c}" class="mr-2"><label for="${idBase}${c}">${c}</label></div>`)
            ].join('');
            container.innerHTML=html;
        }
        function getSelected(container){
            return Array.from(container.querySelectorAll('input:checked')).map(i=>i.value);
        }
        function normalizeSelectAll(container,selected){
            const allBox=container.querySelector('input[value="all"]');
            const rest=[...container.querySelectorAll('input[type="checkbox"]')].filter(b=>b.value!=='all');
            if(!allBox)return;
            if (selected.includes('all')) {
                rest.forEach(b => b.checked = false);
            } else if (rest.every(b => !b.checked)) {
                allBox.checked = true;
            } else {
                 allBox.checked = false;
            }
        }
        function buildFilterHandlers() {
            function applyFilters(containerCountry,containerCompany,containerCategory,filtersObj,renderFn,showCountry) {
                let sc=getSelected(containerCountry);
                let se=getSelected(containerCompany);
                let sk=getSelected(containerCategory);
                normalizeSelectAll(containerCountry,sc);
                normalizeSelectAll(containerCompany,se);
                normalizeSelectAll(containerCategory,sk);
                sc = getSelected(containerCountry);
                se = getSelected(containerCompany);
                sk = getSelected(containerCategory);
                filtersObj.country = sc.includes('all')?[]:sc;
                filtersObj.company = se.includes('all')?[]:se;
                filtersObj.category = sk.includes('all')?[]:sk;
                renderFn();
            }
            window.filterNews = ()=>applyFilters(
                newsFilterCountryContainer,newsFilterCompanyContainer,newsFilterCategoryContainer,
                newsFilters,()=>renderCards(newsData,newsFilters,alertsGrid,newsNoResults,true)
            );
            window.filterContentNews = ()=>applyFilters(
                contentFilterCountryContainer,contentFilterCompanyContainer,contentFilterCategoryContainer,
                contentFilters,()=>renderCards(contentNewsData,contentFilters,contentAlertsGrid,contentNewsNoResults,true)
            );
        }
        function initFilters(){
            const uniqueNewsCompanies = [...new Set(newsData.map(n => n.entity))];
            const uniqueNewsCountries = [...new Set(newsData.map(n => n.country))];
            const uniqueNewsCategories = [...new Set(newsData.map(n => n.category))];
            const uniqueContentCompanies = [...new Set(contentNewsData.map(n => n.entity))];
            const uniqueContentCountries = [...new Set(contentNewsData.map(n => n.country))];
            const uniqueContentCategories = [...new Set(contentNewsData.map(n => n.category))];
            
            populateCheckboxes(newsFilterCompanyContainer,uniqueNewsCompanies,'Todas');
            populateCheckboxes(newsFilterCountryContainer,uniqueNewsCountries,'Todos');
            populateCheckboxes(newsFilterCategoryContainer,uniqueNewsCategories,'Todas');

            populateCheckboxes(contentFilterCompanyContainer,uniqueContentCompanies,'Todas');
            populateCheckboxes(contentFilterCountryContainer,uniqueContentCountries,'Todos');
            populateCheckboxes(contentFilterCategoryContainer,uniqueContentCategories,'Todas');
            
            buildFilterHandlers();
            
            [newsFilterCountryContainer,newsFilterCompanyContainer,newsFilterCategoryContainer].forEach(c => c.addEventListener('change',filterNews));
            [contentFilterCountryContainer,contentFilterCompanyContainer,contentFilterCategoryContainer].forEach(c => c.addEventListener('change',filterContentNews));

            document.getElementById('news-reset-filters').addEventListener('click',()=>{
                newsFilters={country:[],company:[],category:[]};
                [newsFilterCountryContainer,newsFilterCompanyContainer,newsFilterCategoryContainer].forEach(c=>{
                    c.querySelectorAll('input').forEach(i=>i.checked = i.value === 'all');
                });
                renderCards(newsData,newsFilters,alertsGrid,newsNoResults,true);
            });
            document.getElementById('content-reset-filters').addEventListener('click',()=>{
                contentFilters={country:[],company:[],category:[]};
                [contentFilterCountryContainer,contentFilterCompanyContainer,contentFilterCategoryContainer].forEach(c=>{
                    c.querySelectorAll('input').forEach(i=>i.checked = i.value === 'all');
                });
                renderCards(contentNewsData,contentFilters,contentAlertsGrid,contentNewsNoResults,true);
            });
        }
        
        tabButtons.forEach(btn=>btn.addEventListener('click',e=>{
            tabButtons.forEach(b=>b.classList.remove('active'));
            e.target.classList.add('active');
            updateSentimentContent(e.target.dataset.country);
        }));

        document.addEventListener('DOMContentLoaded', function() {
            updateSentimentContent('Brasil');
            initFilters();
            renderCards(newsData,newsFilters,alertsGrid,newsNoResults,true);
            renderCards(contentNewsData,contentFilters,contentAlertsGrid,contentNewsNoResults,true);
        });
    </script>
</body>
</html>