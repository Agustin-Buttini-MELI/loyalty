<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1f2937; }
    .main-accent { color: #2563eb; } .bg-main-accent { background-color: #2563eb; }
    .tab-btn.active { background-color: #e0f2fe; border-bottom: 2px solid #2563eb; }
    .tab-btn { transition: background-color 0.3s ease; }
    .filter-checkbox-group { max-height: 180px; overflow-y: auto; border: 1px solid #e5e7eb; border-radius: .5rem; padding: 8px; }
    .filter-checkbox-item { display: flex; align-items: center; gap: .5rem; margin-bottom: .25rem; }
  </style>
</head>
<body class="antialiased">
  <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center space-x-3">
          <div class="bg-main-accent p-2 rounded-lg">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>
          </div>
          <h1 class="text-xl md:text-2xl font-bold text-gray-800">Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</h1>
        </div>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
    <section class="mb-12 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-800">Análisis de Sentimiento Meli+</h2>
      <p class="mt-2 text-lg text-gray-600">Visualiza la evolución de la percepción de los clientes en función de eventos clave y la competencia.</p>
    </section>

    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 mb-8">
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Índice de Sentimiento General (Escala 0-100)</h3>
      <div class="chart-container w-full max-w-4xl mx-auto h-96">
        <canvas id="sentimentChart"></canvas>
      </div>
    </div>

    <section class="mb-8">
      <div class="flex justify-center border-b border-gray-200">
        <button data-country="Brasil" class="tab-btn active px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Brasil</button>
        <button data-country="México" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">México</button>
        <button data-country="Chile" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Chile</button>
        <button data-country="Argentina" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Argentina</button>
        <button data-country="Colombia" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Colombia</button>
      </div>
    </section>

    <section id="country-data" class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">Detalles por País: <span id="country-name" class="main-accent">Brasil</span></h2>
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Tabla Resumen de Sentimientos</h3>
      <div class="overflow-x-auto mb-8">
        <table id="sentiment-table" class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mes</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Detractores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Detractores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Promotores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Promotores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Eventos Clave/Contexto</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Novedades de la Competencia</th>
            </tr>
          </thead>
          <tbody id="sentiment-table-body" class="bg-white divide-y divide-gray-200"></tbody>
        </table>
      </div>
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Resumen de Sentimientos Detractores y Promotores</h3>
      <div id="sentiment-summary" class="prose max-w-none"></div>
    </section>

    <!-- Vertiente 2 -->
    <section id="market-news" class="mt-12">
      <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Alertas de Mercado Recientes</h2>
        <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">País</label>
              <div id="news-filter-country" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label>
              <div id="news-filter-company" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Categoría</label>
              <div id="news-filter-category" class="filter-checkbox-group"></div>
            </div>
            <div class="flex items-end">
              <button id="news-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
            </div>
          </div>
        </div>
        <div id="alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        <div id="no-news-results" class="hidden text-center py-12">
          <p class="text-xl text-gray-500">No se encontraron noticias con los filtros seleccionados.</p>
        </div>
      </div>
    </section>

    <!-- Vertiente 3 -->
    <section id="content-platforms-news" class="mt-12">
      <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Noticias de Plataformas de Contenido y Streaming</h2>
        <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">País</label>
              <div id="content-filter-country" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label>
              <div id="content-filter-company" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Categoría</label>
              <div id="content-filter-category" class="filter-checkbox-group"></div>
            </div>
            <div class="flex items-end">
              <button id="content-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
            </div>
          </div>
        </div>
        <div id="content-alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        <div id="no-content-results" class="hidden text-center py-12">
          <p class="text-xl text-gray-500">No se encontraron noticias de contenido con los filtros seleccionados.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-gray-800 text-gray-300 mt-16">
    <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm">
      <p>&copy; 2025 Reporte de Sentimiento Meli+. Visualización interactiva.</p>
    </div>
  </footer>

  <script>
    /* ===== Sentimiento (Vertiente 1) ===== */
    const sentimentData = {
      'Brasil': {
        sentimentIndex: [85, 82, 79, 78, 77, 72, 74, 75, 78, 65, 66, 68, 70],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [
          { month: 'Sep 24', text: 'Lanzamiento Meli+' },
          { month: 'Feb 25', text: 'Cambio % cashback' },
          { month: 'May 25', text: 'Beneficio 120% CDI' },
          { month: 'Jun 25', text: 'Cambio envíos gratis' }
        ],
        table: [
          { mes: 'Sep 25', detractores: 'Estable', motivosDet: 'Pocos descuentos nuevos', promotores: 'Estable', motivosPro: 'Estabilidad del servicio', eventos: 'Periodo sin cambios', competencia: 'Shopee agresivo en moda' },
          { mes: 'Jun 25', detractores: 'Aumento significativo', motivosDet: 'Pérdida valor envío gratis', promotores: 'Caída', motivosPro: 'Aún vale por streaming', eventos: 'Envío gratis general ≥ R$19,90', competencia: '-' },
          { mes: 'May 25', detractores: 'Leve aumento', motivosDet: 'Costos no claros', promotores: 'Aumento', motivosPro: 'Rendimiento 120% CDI', eventos: 'Lanzamiento Cofrinhos 120% CDI', competencia: '-' },
          { mes: 'Feb 25', detractores: 'Aumento', motivosDet: 'Cashback reducido', promotores: 'Caída', motivosPro: 'El combo de streaming lo salva', eventos: 'Cambio % cashback', competencia: 'Nubank Ultravioleta con más beneficios' },
          { mes: 'Sep 24', detractores: 'Aumento inicial', motivosDet: 'Confusión con beneficios', promotores: 'Aumento fuerte', motivosPro: 'Disney+ y envíos gratis', eventos: 'Lanzamiento Meli+', competencia: 'Amazon Prime Day' }
        ],
        summary: `
          <p>La percepción en Brasil muestra una alta sensibilidad a los cambios en la propuesta de valor. La modificación en la política de envíos gratis en <strong>junio de 2025</strong> generó la caída más abrupta del índice, con un pico de comentarios negativos.</p>
          <ul>
            <li><strong>Detractores:</strong> El tema dominante es la percepción de devaluación del programa. "Se Meli liberou frete grátis pra todo mundo acima de 19,90, qual a vantagem de eu pagar o Meli+ agora? Só pelo streaming não compensa." (Reclame Aqui).</li>
            <li><strong>Promotores:</strong> El rendimiento del 120% del CDI en "Cofrinhos" (mayo 2025) fue un acierto, generando comentarios positivos sobre el ecosistema financiero. "O dinheiro rendendo 120% do CDI no Meli+ já paga a assinatura, o resto é lucro." (Comentario YouTube).</li>
          </ul>
        `
      },
      'México': {
        sentimentIndex: [88, 86, 85, 83, 84, 75, 76, 74, 70, 71, 72, 74, 75],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [
          { month: 'Sep 24', text: 'Lanzamiento Meli+' },
          { month: 'Feb 25', text: 'Cambio % cashback' },
          { month: 'May 25', text: 'Hot Sale / Lanza NU+' }
        ],
        table: [
           { mes: 'Sep 25', detractores: 'Estable', motivosDet: 'Aumento de precios en súper', promotores: 'Leve aumento', motivosPro: 'Envíos Full son muy rápidos', eventos: 'Período sin cambios', competencia: 'Klar anuncia nuevo producto' },
           { mes: 'May 25', detractores: 'Aumento', motivosDet: 'NU+ es más claro y sin costo', promotores: 'Aumento', motivosPro: 'Ofertas agresivas en Hot Sale', eventos: 'Hot Sale MX', competencia: 'Nubank lanza programa NU+' },
           { mes: 'Feb 25', detractores: 'Aumento significativo', motivosDet: 'Menos cashback es un robo', promotores: 'Caída', motivosPro: 'Combo streaming aún conviene', eventos: 'Cambio % cashback', competencia: '-' },
           { mes: 'Sep 24', detractores: 'Aumento inicial', motivosDet: 'Problemas migración Nivel 6', promotores: 'Aumento fuerte', motivosPro: 'Max y Disney+ incluidos', eventos: 'Lanzamiento Meli+', competencia: 'Amazon Prime Day' }
        ],
        summary: `
          <p>En México, el lanzamiento fue muy positivo, pero la competencia directa en el sector fintech (NU+) y los cambios en beneficios han erosionado el sentimiento. El Hot Sale de <strong>mayo de 2025</strong> fue un momento clave de polarización.</p>
          <ul>
            <li><strong>Detractores:</strong> La comparación con nuevas ofertas es una constante. "Con lo que Nubank está ofreciendo con NU+, ya no sé si me conviene seguir pagando Meli+. Las reglas son más simples allá." (Reddit r/MexicoFinanciero).</li>
            <li><strong>Promotores:</strong> La logística y el valor percibido durante eventos de alto tráfico de compras siguen siendo un pilar. "Aproveché el Hot Sale como nunca con Meli+, los descuentos extras y el envío en horas hicieron toda la diferencia." (X/Twitter).</li>
          </ul>
        `
      },
      'Chile': {
        sentimentIndex: [65, 66, 68, 67, 68, 69, 70, 78, 79, 78, 77, 78, 79],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [
          { month: 'Abr 25', text: 'Nuevos beneficios Meli+' }
        ],
        table: [
          { mes: 'Sep 25', detractores: 'Estable', motivosDet: 'Faltan más alianzas', promotores: 'Estable', motivosPro: 'El envío gratis funciona bien', eventos: 'Periodo sin cambios', competencia: 'Ripley con promo agresiva' },
          { mes: 'Abr 25', detractores: 'Caída', motivosDet: 'No entiendo los beneficios', promotores: 'Aumento fuerte', motivosPro: '¡Por fin más valor!', eventos: 'Nuevos beneficios Meli+ CL', competencia: '-' },
          { mes: 'Sep 24', detractores: 'Estable', motivosDet: 'Nivel 6 no es como Meli+', promotores: 'Estable', motivosPro: 'Acumulo puntos para envíos', eventos: 'Contexto Nivel 6', competencia: 'Falabella con descuentos CMR' }
        ],
        summary: `
          <p>Chile experimentó una mejora significativa en el sentimiento con la introducción de nuevos beneficios en <strong>abril de 2025</strong>, pasando de una percepción tibia sobre el "Nivel 6" a una valoración más positiva del programa Meli+.</p>
          <ul>
            <li><strong>Detractores:</strong> Las quejas se centran en la falta de más alianzas de descuentos en comparación con programas de la competencia. "Comparado con los descuentos que me da el banco o Falabella, a Meli+ le falta para ser el mejor." (Foro Reclamos.cl).</li>
            <li><strong>Promotores:</strong> El cambio fue bien recibido por los usuarios más fieles. "Ahora sí vale la pena. Antes era solo para envíos, pero con los descuentos nuevos y el streaming, se paga solo." (Comentario Instagram).</li>
          </ul>
        `
      },
      'Argentina': {
        sentimentIndex: [60, 62, 61, 63, 62, 64, 65, 68, 80, 78, 76, 75, 74],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [
          { month: 'May 25', text: 'Lanzamiento Meli+ AR' }
        ],
        table: [
          { mes: 'Sep 25', detractores: 'Leve aumento', motivosDet: 'La inflación se come el beneficio', promotores: 'Estable', motivosPro: 'Ahorro mucho en envíos', eventos: 'Contexto inflacionario', competencia: '-' },
          { mes: 'May 25', detractores: 'Aumento inicial', motivosDet: 'El precio es alto en pesos', promotores: 'Aumento muy fuerte', motivosPro: '¡Al fin Meli+ con todo!', eventos: 'Lanzamiento Meli+ AR', competencia: '-' },
          { mes: 'Sep 24', detractores: 'Estable', motivosDet: 'Nivel 6 es muy básico', promotores: 'Estable', motivosPro: 'Solo sirve para envíos gratis', eventos: 'Contexto Nivel 6', competencia: 'Precios cuidados' }
        ],
        summary: `
          <p>El lanzamiento de Meli+ en <strong>mayo de 2025</strong> provocó el salto más grande en el índice de sentimiento de toda la región, a pesar de preocupaciones iniciales sobre el costo en el contexto económico local.</p>
          <ul>
            <li><strong>Detractores:</strong> La principal preocupación es el costo-beneficio frente a la inflación. "Lo pago, pero cada mes me pregunto si vale la pena con todo lo que sube. Necesito usarlo mucho para que rinda." (Foro tuquejasuma.com).</li>
            <li><strong>Promotores:</strong> La propuesta de valor unificada fue un éxito rotundo. "Pasar de Nivel 6 a esto es un mundo de diferencia. Tengo Disney+, Max y no pago más envío. Golazo." (X/Twitter).</li>
          </ul>
        `
      },
      'Colombia': {
        sentimentIndex: [62, 63, 61, 60, 58, 59, 60, 61, 82, 80, 79, 78, 77],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'May 25', 'Ago 25', 'Sep 25'],
        events: [
          { month: 'May 25', text: 'Amazon Prime llega a CO' },
          { month: 'Ago 25', text: 'Lanzamiento Meli+ CO' }
        ],
        table: [
          { mes: 'Sep 25', detractores: 'Estable', motivosDet: 'Falta el cashback de otros países', promotores: 'Estable', motivosPro: 'Streaming y envíos, buen combo', eventos: '-', competencia: 'Rappi Pro con nuevas alianzas' },
          { mes: 'Ago 25', detractores: 'Aumento inicial', motivosDet: 'Migración con fallos técnicos', promotores: 'Aumento muy fuerte', motivosPro: 'Excelente paquete de bienvenida', eventos: 'Lanzamiento Meli+ CO', competencia: '-' },
          { mes: 'May 25', detractores: 'Aumento', motivosDet: 'Nivel 6 es pobre vs Prime', promotores: 'Caída', motivosPro: 'Uso Rappi para todo', eventos: '-', competencia: 'Amazon Prime llega a CO' },
          { mes: 'Sep 24', detractores: 'Estable', motivosDet: 'Pocos beneficios reales', promotores: 'Estable', motivosPro: 'Solo para envíos', eventos: 'Contexto Nivel 6', competencia: '-' }
        ],
        summary: `
          <p>El sentimiento en Colombia, que venía decayendo por la llegada de competidores fuertes como Amazon Prime, se disparó con el lanzamiento de Meli+ en <strong>agosto de 2025</strong>, posicionándolo como una alternativa competitiva.</p>
          <ul>
            <li><strong>Detractores:</strong> Los usuarios se quejan de la ausencia de beneficios financieros presentes en otros mercados. "Por qué en Brasil y México tienen cashback y acá no? Nos están dando un Meli+ de segunda." (Comentarios SIC).</li>
            <li><strong>Promotores:</strong> El valor del paquete de entretenimiento es el principal motor. "Pagar por Meli+ y que te den Disney y Max es una ganga. Ya cancelé mis otras suscripciones." (Foro de tecnología local).</li>
          </ul>
        `
      }
    };

    /* ===== Vertiente 2 (Alertas) y Vertiente 3 (Plataformas) ===== */
    const newsData = [
      { "id": 1, "entity": "Nubank", "country": "Colombia", "impact": "Medio", "title": "Nu Colombia Receives Final Regulatory Approval to Operate as Financing Company", "url": "https://international.nubank.com.br/media/2025/nu-colombia-gets-final-approval/", "date": "12-09-2025", "category": "Sanción Legal", "summary": "Nu Colombia, a subsidiary of Nubank, has obtained the final license from the Financial Superintendence of Colombia (SFC) to operate as a financing company, allowing it to expand its product portfolio beyond credit cards.", "publisher": "international.nubank.com.br", "url_raw": "https://international.nubank.com.br/media/2025/nu-colombia-gets-final-approval/", "url_canonical": "https://international.nubank.com.br/media/2025/nu-colomiba-gets-final-approval/", "http_status": "200", "archived_url": null, "language": "en", "out_of_window": false },
      { "id": 2, "entity": "OpenAI (ChatGPT Premium)", "country": "Todos los Países", "impact": "Alto", "title": "OpenAI Unveils GPT-5, Featuring Real-Time Multimodal Capabilities and Advanced Reasoning", "url": "https://openai.com/blog/gpt-5-unleashed", "date": "11-09-2025", "category": "Flagship AI", "summary": "OpenAI announced the launch of GPT-5, its next-generation large language model. The new model features significant improvements in reasoning, speed, and introduces real-time multimodal understanding of video and audio streams. It will be available to ChatGPT Plus subscribers and via API.", "publisher": "openai.com", "url_raw": "https://openai.com/blog/gpt-5-unleashed", "url_canonical": "https://openai.com/blog/gpt-5-unleashed", "http_status": "200", "archived_url": null, "language": "en", "out_of_window": false },
      { "id": 3, "entity": "Amazon Prime", "country": "México", "impact": "Alto", "title": "Amazon Secures Exclusive LaLiga Broadcast Rights in Mexico for Prime Video Starting 2026 Season", "url": "https://press.aboutamazon.com/2025/9/amazon-prime-video-scores-exclusive-laliga-rights-in-mexico", "date": "09-09-2025", "category": "Derechos/Deportes", "summary": "Amazon has signed a multi-year deal to become the exclusive broadcaster of Spain's top football league, LaLiga, in Mexico. All matches will be streamed live on Prime Video, a significant move to bolster its sports content in the region.", "publisher": "press.aboutamazon.com", "url_raw": "https://press.aboutamazon.com/2025/9/amazon-prime-video-scores-exclusive-laliga-rights-in-mexico", "url_canonical": "https://press.aboutamazon.com/2025/9/amazon-prime-video-scores-exclusive-laliga-rights-in-mexico", "http_status": "200", "archived_url": null, "language": "en", "out_of_window": false },
      { "id": 4, "entity": "Shein", "country": "Brasil", "impact": "Medio", "title": "Shein Expands Local Seller Program in Brazil, Aims for 50% Localized GMV by 2026", "url": "https://www.reuters.com/business/retail-consumer/shein-doubles-down-brazil-local-seller-push-2025-09-05/", "date": "05-09-2025", "category": "Estrategia", "summary": "Shein is accelerating its investment in Brazil by expanding its marketplace for local sellers. The company's goal is to have 50% of its Gross Merchandise Volume (GMV) in the country sourced from local manufacturers and sellers by the end of 2026.", "publisher": "reuters.com", "url_raw": "https://www.reuters.com/business/retail-consumer/shein-doubles-down-brazil-local-seller-push-2025-09-05/", "url_canonical": "https://www.reuters.com/business/retail-consumer/shein-doubles-down-brazil-local-seller-push-2025-09-05/", "http_status": "200", "archived_url": null, "language": "en", "out_of_window": false },
      { "id": 5, "entity": "Rappi Pro", "country": "Argentina", "impact": "Medio", "title": "Rappi and Ualá Announce Deeper Integration for Pro Subscribers in Argentina", "url": "https://blog.rappi.com/uala-pro-partnership-argentina", "date": "03-09-2025", "category": "Estrategia", "summary": "Rappi and fintech Ualá will deepen their partnership, offering exclusive cashback benefits and preferential rates on Ualá products for Rappi Pro subscribers in Argentina, strengthening the value proposition of both ecosystems.", "publisher": "blog.rappi.com", "url_raw": "https://blog.rappi.com/uala-pro-partnership-argentina", "url_canonical": "https://blog.rappi.com/uala-pro-partnership-argentina", "http_status": "200", "archived_url": null, "language": "es", "out_of_window": false }
    ];
    const contentNewsData = [
      { "id": 101, "entity": "Spotify", "impact": "Medio", "title": "Spotify Acquires AI Music Discovery Startup 'Melod.ai' to Enhance Personalization", "url": "https://newsroom.spotify.com/2025-09-13/spotify-acquires-melod-ai/", "date": "13-09-2025", "category": "Fusión/Adquisición", "summary": "Spotify announced the acquisition of Melod.ai, a startup specializing in artificial intelligence for music analysis and discovery. The technology will be integrated into Spotify's recommendation algorithms to improve playlist generation and user personalization.", "publisher": "newsroom.spotify.com", "url_raw": "https://newsroom.spotify.com/2025-09-13/spotify-acquires-melod-ai/", "url_canonical": "https://newsroom.spotify.com/2025-09-13/spotify-acquires-melod-ai/", "http_status": "200", "language": "en", "out_of_window": false },
      { "id": 102, "entity": "Disney+", "impact": "Medio", "title": "Disney+ and Hulu to Begin International Rollout of Combined App in Q1 2026", "url": "https://thewaltdisneycompany.com/disney-hulu-combined-app-international-rollout/", "date": "10-09-2025", "category": "Producto", "summary": "Following its successful integration in the U.S., The Walt Disney Company will begin rolling out the combined Disney+ and Hulu app to international markets, starting with Europe and Latin America in the first quarter of 2026.", "publisher": "thewaltdisneycompany.com", "url_raw": "https://thewaltdisneycompany.com/disney-hulu-combined-app-international-rollout/", "url_canonical": "https://thewaltdisneycompany.com/disney-hulu-combined-app-international-rollout/", "http_status": "200", "language": "en", "out_of_window": false },
      { "id": 103, "entity": "Max", "impact": "Medio", "title": "Warner Bros. Discovery Reports Stronger than Expected Subscriber Growth for Max in Q3 Earnings Preview", "url": "https://ir.wbd.com/news-releases/news-release-details/2025/WBD-Announces-Preliminary-Q3-Subscriber-Metrics/", "date": "08-09-2025", "category": "Resultados Financieros", "summary": "In a preliminary release ahead of its Q3 earnings, Warner Bros. Discovery reported that its flagship streaming service Max added more subscribers than analysts' projections, citing a strong content slate and reduced churn.", "publisher": "ir.wbd.com", "url_raw": "https://ir.wbd.com/news-releases/news-release-details/2025/WBD-Announces-Preliminary-Q3-Subscriber-Metrics/", "url_canonical": "https://ir.wbd.com/news-releases/news-release-details/2025/WBD-Announces-Preliminary-Q3-Subscriber-Metrics/", "http_status": "200", "language": "en", "out_of_window": false },
      { "id": 104, "entity": "Apple TV+", "impact": "Medio", "title": "Apple Drops First Trailer for 'Severance' Season 2, Premiering November 14", "url": "https://www.apple.com/tv-pr/news/2025/09/apple-tv-reveals-highly-anticipated-trailer-for-emmy-award-winning-severance-season-two/", "date": "06-09-2025", "category": "Producto", "summary": "Apple TV+ has released the first full trailer for the second season of its critically acclaimed series 'Severance', confirming a release date of November 14th, 2025. The series is a key piece of Apple's original content strategy.", "publisher": "apple.com", "url_raw": "https://www.apple.com/tv-pr/news/2025/09/apple-tv-reveals-highly-anticipated-trailer-for-emmy-award-winning-severance-season-two/", "url_canonical": "https://www.apple.com/tv-pr/news/2025/09/apple-tv-reveals-highly-anticipated-trailer-for-emmy-award-winning-severance-season-two/", "http_status": "200", "language": "en", "out_of_window": false },
      { "id": 105, "entity": "Netflix", "impact": "Alto", "title": "Netflix Confirms Global Price Increase for Premium and Standard Tiers, Ad-Supported Plan Unchanged", "url": "https://about.netflix.com/en/news/updating-our-prices", "date": "04-09-2025", "category": "Cambio de Precio", "summary": "Netflix announced it will be increasing the monthly price of its Standard and Premium subscription plans in several key markets, including the US and Western Europe, by an average of 10-15%. The price of the ad-supported tier will remain the same to drive adoption.", "publisher": "about.netflix.com", "url_raw": "https://about.netflix.com/en/news/updating-our-prices", "url_canonical": "https://about.netflix.com/en/news/updating-our-prices", "http_status": "200", "language": "en", "out_of_window": false },
      { "id": 106, "entity": "Paramount+", "impact": "Alto", "title": "Paramount Global and Skydance Media Announce Completion of Merger", "url": "https://www.paramount.com/press/paramount-global-and-skydance-media-complete-merger", "date": "02-09-2025", "category": "Fusión/Adquisición", "summary": "The long-negotiated merger between Paramount Global and Skydance Media has officially closed. The new combined entity will continue to be publicly traded, with a new leadership structure aimed at revitalizing its streaming and studio businesses.", "publisher": "paramount.com", "url_raw": "https://www.paramount.com/press/paramount-global-and-skydance-media-complete-merger", "url_canonical": "https://www.paramount.com/press/paramount-global-and-skydance-media-complete-merger", "http_status": "200", "language": "en", "out_of_window": false }
    ];

    /* ===== LISTAS MAESTRAS ===== */
    const ALL_NEWS_COUNTRIES = ['Argentina','Brasil','Chile','México','Todos los Países'];
    const ALL_NEWS_COMPANIES = [
      'Amazon Prime','Shein','Temu','Shopee','Tiendanube','Rappi Pro','Uber One','Netflix','Spotify Premium','OpenAI (ChatGPT Premium)','Disney+',
      'Nubank Ultravioleta','Smiles','Globoplay','Nubank','Ualá','Cablevisión Flow','Amazon Prime Video','DGO','Mach'
    ];
    const ALL_NEWS_CATEGORIES = [
      'Cambio de Precio','Lanzamiento','Fusión/Adquisición','Sanción Legal','Estrategia','Producto',
      'Resultados Financieros','Derechos/Deportes','Flagship AI'
    ];

    const ALL_CONTENT_COUNTRIES = ['Argentina','Brasil','Chile','México','Todos los Países'];
    const ALL_CONTENT_COMPANIES = [
      'Disney+','Netflix','Apple TV+','Max','Paramount+','Universal+','Vix Premium','Globoplay','Spotify','Deezer','OpenAI'
    ];
    const ALL_CONTENT_CATEGORIES = [
      'Cambio de Precio','Lanzamiento','Fusión/Adquisición','Sanción Legal','Estrategia','Producto',
      'Resultados Financieros','Derechos/Deportes','Flagship AI'
    ];

    const chartColors = { main: '#2563eb', event: '#f59e0b' };

    const tabButtons = document.querySelectorAll('.tab-btn');
    const countryName = document.getElementById('country-name');
    const sentimentTableBody = document.getElementById('sentiment-table-body');
    const sentimentSummary = document.getElementById('sentiment-summary');
    let sentimentChart = null;

    const alertsGrid = document.getElementById('alerts-grid');
    const newsNoResults = document.getElementById('no-news-results');
    const newsFilterCountryContainer = document.getElementById('news-filter-country');
    const newsFilterCompanyContainer = document.getElementById('news-filter-company');
    const newsFilterCategoryContainer = document.getElementById('news-filter-category');
    let newsFilters = { country: [], company: [], category: [] };

    const contentAlertsGrid = document.getElementById('content-alerts-grid');
    const contentNewsNoResults = document.getElementById('no-content-results');
    const contentFilterCountryContainer = document.getElementById('content-filter-country');
    const contentFilterCompanyContainer = document.getElementById('content-filter-company');
    const contentFilterCategoryContainer = document.getElementById('content-filter-category');
    let contentFilters = { country: [], company: [], category: [] };

    /* ==== Helpers del gráfico ==== */
    function renderChart(data) {
      const ctx = document.getElementById('sentimentChart').getContext('2d');
      if (sentimentChart) sentimentChart.destroy();
      sentimentChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: data.labels,
          datasets: [{
            label: 'Índice de Sentimiento',
            data: data.sentimentIndex,
            borderColor: chartColors.main,
            backgroundColor: 'rgba(37, 99, 235, 0.2)',
            borderWidth: 2, fill: true,
            pointBackgroundColor: data.labels.map(l => data.events.find(e => e.month === l) ? chartColors.event : chartColors.main),
            pointRadius: data.labels.map(l => data.events.find(e => e.month === l) ? 6 : 4),
            pointHoverRadius: 8
          }]
        },
        options: {
          responsive: true, maintainAspectRatio: false,
          scales: { y: { beginAtZero: true, max: 100, title: { display: true, text: 'Índice de Sentimiento (0-100)', font: { weight: 'bold' } } } },
          plugins: { tooltip: { callbacks: { title: (items) => {
            const m = items[0].label; const ev = data.events.find(e => e.month === m);
            return m + (ev ? `\nEvento: ${ev.text}` : '');
          }}}}
        }
      });
    }

    function renderSentimentTable(rows) {
      sentimentTableBody.innerHTML = '';
      rows.forEach(row => {
        const tr = document.createElement('tr');
        tr.className = 'hover:bg-gray-50';
        tr.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${row.mes}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.detractores}</td>
          <td class="px-6 py-4 text-sm"><span class="inline-block px-2 py-1 rounded-md ring-1 ring-rose-100 bg-rose-50 text-rose-700">${row.motivosDet}</span></td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.promotores}</td>
          <td class="px-6 py-4 text-sm"><span class="inline-block px-2 py-1 rounded-md ring-1 ring-emerald-100 bg-emerald-50 text-emerald-700">${row.motivosPro}</span></td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.eventos}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.competencia}</td>`;
        sentimentTableBody.appendChild(tr);
      });
    }
    function renderSummary(html) { sentimentSummary.innerHTML = html; }
    function updateSentimentContent(country) {
      const data = sentimentData[country]; if (!data) return;
      countryName.textContent = country; renderChart(data); renderSentimentTable(data.table); renderSummary(data.summary);
    }

    /* ==== Etiquetas de categoría ==== */
    function getCategoryTag(category) {
      switch (category) {
        case 'Sanción Legal': return `<span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Cambio de Precio': return `<span class="bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Lanzamiento': return `<span class="bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Fusión/Adquisición': return `<span class="bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Estrategia': return `<span class="bg-purple-100 text-purple-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Producto': return `<span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Resultados Financieros': return `<span class="bg-teal-100 text-teal-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Derechos/Deportes': return `<span class="bg-indigo-100 text-indigo-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Flagship AI': return `<span class="bg-pink-100 text-pink-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        default: return `<span class="bg-gray-100 text-gray-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
      }
    }

    /* ==== Helpers de fuente (host en texto plano, sin enlace) ==== */
    function sourceHost(u) {
      try { return new URL(u).hostname.replace(/^www\./, ''); } catch { return ''; }
    }

    /* ==== Render tarjetas (Vertiente 2) — sin enlaces ni badge de impacto ==== */
    function renderNewsCards() {
      alertsGrid.innerHTML = '';
      const filtered = newsData.filter(item => {
        const cm = newsFilters.country.length === 0 || newsFilters.country.includes('all') || newsFilters.country.includes(item.country);
        const em = newsFilters.company.length === 0 || newsFilters.company.includes('all') || newsFilters.company.includes(item.entity);
        const km = newsFilters.category.length === 0 || newsFilters.category.includes('all') || newsFilters.category.includes(item.category);
        return cm && em && km;
      }).sort((a,b) => {
        const da = new Date((a.date || '').split('-').reverse().join('-'));
        const db = new Date((b.date || '').split('-').reverse().join('-'));
        if (da > db) return -1; if (da < db) return 1;
        const order = { 'Alto':1, 'Medio':2, 'Bajo':3 }; return (order[a.impact]||9) - (order[b.impact]||9);
      });
      newsNoResults.classList.toggle('hidden', filtered.length !== 0);
      filtered.forEach(row => {
        const host = sourceHost(row.url);
        const card = document.createElement('div');
        card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
        card.innerHTML = `
          <div class="flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold text-gray-800 text-lg">${row.entity}${row.country && row.country !== 'Todos los Países' ? ` (${row.country})` : ''}</h4>
              ${getCategoryTag(row.category)}
            </div>
            <p class="text-gray-700 mb-3">${row.title}</p>
            <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${host || '—'}</span></p>
          </div>
          <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
            <span>${row.date || ''}</span>
          </div>`;
        alertsGrid.appendChild(card);
      });
    }

    /* ==== Render tarjetas (Vertiente 3) — sin enlaces ni badge de impacto ==== */
    function renderContentNewsCards() {
      contentAlertsGrid.innerHTML = '';
      const filtered = contentNewsData.filter(item => {
        const cm = contentFilters.country.length === 0 || contentFilters.country.includes('all') || contentFilters.country.includes(item.country);
        const em = contentFilters.company.length === 0 || contentFilters.company.includes('all') || contentFilters.company.includes(item.entity);
        const km = contentFilters.category.length === 0 || contentFilters.category.includes('all') || contentFilters.category.includes(item.category);
        return cm && em && km;
      }).sort((a,b) => {
        const da = new Date((a.date || '').split('-').reverse().join('-'));
        const db = new Date((b.date || '').split('-').reverse().join('-'));
        if (da > db) return -1; if (da < db) return 1;
        const order = { 'Alto':1, 'Medio':2, 'Bajo':3 }; return (order[a.impact]||9) - (order[b.impact]||9);
      });
      contentNewsNoResults.classList.toggle('hidden', filtered.length !== 0);
      filtered.forEach(row => {
        const host = sourceHost(row.url);
        const card = document.createElement('div');
        card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
        card.innerHTML = `
          <div class="flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold text-gray-800 text-lg">${row.entity}</h4>
              ${getCategoryTag(row.category)}
            </div>
            <p class="text-gray-700 mb-3">${row.title}</p>
            <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${host || '—'}</span></p>
          </div>
          <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
            <span>${row.date || ''}</span>
          </div>`;
        contentAlertsGrid.appendChild(card);
      });
    }

    /* ==== Poblar filtros ==== */
    function populateCheckboxes(container, allItems, group) {
      const idBase = group + '-';
      const html = [
        `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}all" value="all" class="mr-2"><label for="${idBase}all">Todos</label></div>`,
        ...allItems.map(c => `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}${c.replace(/\s/g, '')}" value="${c}" class="mr-2"><label for="${idBase}${c.replace(/\s/g, '')}">${c}</label></div>`)
      ].join('');
      container.innerHTML = html;
    }

    function updateNewsFilters() {
      populateCheckboxes(newsFilterCountryContainer, ALL_NEWS_COUNTRIES.filter(c => c!=='Todos los Países'), 'news-country-');
      populateCheckboxes(newsFilterCompanyContainer, ALL_NEWS_COMPANIES.sort(), 'news-company-');
      populateCheckboxes(newsFilterCategoryContainer, ALL_NEWS_CATEGORIES.sort(), 'news-category-');
      newsFilterCountryContainer.addEventListener('change', filterNews);
      newsFilterCompanyContainer.addEventListener('change', filterNews);
      newsFilterCategoryContainer.addEventListener('change', filterNews);
    }

    function updateContentNewsFilters() {
      populateCheckboxes(contentFilterCountryContainer, ALL_CONTENT_COUNTRIES.filter(c => c!=='Todos los Países'), 'content-country-');
      populateCheckboxes(contentFilterCompanyContainer, ALL_CONTENT_COMPANIES.sort(), 'content-company-');
      populateCheckboxes(contentFilterCategoryContainer, ALL_CONTENT_CATEGORIES.sort(), 'content-category-');
      contentFilterCountryContainer.addEventListener('change', filterContentNews);
      contentFilterCompanyContainer.addEventListener('change', filterContentNews);
      contentFilterCategoryContainer.addEventListener('change', filterContentNews);
    }

    /* ==== Lógica de filtros ==== */
    function getSelected(container) {
      return Array.from(container.querySelectorAll('input:checked')).map(i => i.value);
    }
    function normalizeSelectAll(container, selectedValues) {
      const allBox = container.querySelector('input[value="all"]');
      const rest = [...container.querySelectorAll('input[type="checkbox"]')].filter(b => b.value !== 'all');
      if (!allBox) return;
      if (selectedValues.includes('all')) rest.forEach(b => b.checked = false);
      else if (rest.some(b => b.checked)) allBox.checked = false;
    }
    function filterNews() {
      let sc = getSelected(newsFilterCountryContainer);
      let se = getSelected(newsFilterCompanyContainer);
      let sk = getSelected(newsFilterCategoryContainer);
      normalizeSelectAll(newsFilterCountryContainer, sc);
      normalizeSelectAll(newsFilterCompanyContainer, se);
      normalizeSelectAll(newsFilterCategoryContainer, sk);
      sc = getSelected(newsFilterCountryContainer);
      se = getSelected(newsFilterCompanyContainer);
      sk = getSelected(newsFilterCategoryContainer);
      newsFilters.country = sc.includes('all') ? [] : sc;
      newsFilters.company = se.includes('all') ? [] : se;
      newsFilters.category = sk.includes('all') ? [] : sk;
      renderNewsCards();
    }
    function filterContentNews() {
      let sc = getSelected(contentFilterCountryContainer);
      let se = getSelected(contentFilterCompanyContainer);
      let sk = getSelected(contentFilterCategoryContainer);
      normalizeSelectAll(contentFilterCountryContainer, sc);
      normalizeSelectAll(contentFilterCompanyContainer, se);
      normalizeSelectAll(contentFilterCategoryContainer, sk);
      sc = getSelected(contentFilterCountryContainer);
      se = getSelected(contentFilterCompanyContainer);
      sk = getSelected(contentFilterCategoryContainer);
      contentFilters.country = sc.includes('all') ? [] : sc;
      contentFilters.company = se.includes('all') ? [] : se;
      contentFilters.category = sk.includes('all') ? [] : sk;
      renderContentNewsCards();
    }

    /* ==== Tabs & Boot ==== */
    tabButtons.forEach(btn => btn.addEventListener('click', (e) => {
      tabButtons.forEach(b => b.classList.remove('active'));
      e.target.classList.add('active');
      updateSentimentContent(e.target.dataset.country);
    }));
    document.getElementById('news-reset-filters').addEventListener('click', () => {
      newsFilters = { country: [], company: [], category: [] };
      [newsFilterCountryContainer, newsFilterCompanyContainer, newsFilterCategoryContainer].forEach(c => {
        Array.from(c.querySelectorAll('input')).forEach(i => i.checked = false);
      });
      renderNewsCards();
    });
    document.getElementById('content-reset-filters').addEventListener('click', () => {
      contentFilters = { country: [], company: [], category: [] };
      [contentFilterCountryContainer, contentFilterCompanyContainer, contentFilterCategoryContainer].forEach(c => {
        Array.from(c.querySelectorAll('input')).forEach(i => i.checked = false);
      });
      renderContentNewsCards();
    });

    document.addEventListener('DOMContentLoaded', () => {
        updateSentimentContent('Brasil');
        updateNewsFilters(); renderNewsCards();
        updateContentNewsFilters(); renderContentNewsCards();
    });
  </script>
</body>
</html>
