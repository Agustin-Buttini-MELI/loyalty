<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1f2937; }
    .main-accent { color: #2563eb; } .bg-main-accent { background-color: #2563eb; }
    .tab-btn.active { background-color: #e0f2fe; border-bottom: 2px solid #2563eb; }
    .tab-btn { transition: background-color 0.3s ease; }
    .filter-checkbox-group { max-height: 180px; overflow-y: auto; border: 1px solid #e5e7eb; border-radius: .5rem; padding: 8px; }
    .filter-checkbox-item { display: flex; align-items: center; gap: .5rem; margin-bottom: .25rem; }
    /* flecha del summary */
    details summary { list-style: none; }
    details summary::-webkit-details-marker { display: none; }
    details[open] summary svg { transform: rotate(180deg); }
  </style>
</head>
<body class="antialiased">
  <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center space-x-3">
          <div class="bg-main-accent p-2 rounded-lg">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>
          </div>
          <h1 class="text-xl md:text-2xl font-bold text-gray-800">Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</h1>
        </div>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
    <section class="mb-12 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-800">An√°lisis de Sentimiento Meli+</h2>
      <p class="mt-2 text-lg text-gray-600">Visualiza la evoluci√≥n de la percepci√≥n de los clientes en funci√≥n de eventos clave y la competencia.</p>
    </section>

    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 mb-8">
      <h3 class="text-xl font-semibold text-gray-700 mb-4">√çndice de Sentimiento General (Escala 0-100)</h3>
      <div class="chart-container w-full max-w-4xl mx-auto h-96">
        <canvas id="sentimentChart"></canvas>
      </div>
    </div>

    <!-- GLOSARIO (nativo con <details>, sin JS) -->
    <section id="glosario" class="bg-white rounded-lg shadow-md border border-gray-200 mb-8">
     <details>
      <summary class="cursor-pointer w-full flex items-center justify-between px-4 py-3 text-left text-gray-800 font-semibold hover:bg-gray-50">
        <span>üìñ Glosario</span>
        <svg class="w-5 h-5 text-gray-500 rotate-0 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
        </svg>
      </summary>
      <div class="px-4 pb-4 text-sm text-gray-700 pt-2 space-y-4">
          <div>
            <p class="font-semibold mb-1">Niveles de sentimiento</p>
            <ul class="list-disc list-inside space-y-1">
              <li><span class="text-emerald-700 font-medium">Muy alto:</span> ‚â•55% menciones ponderadas o +10 p.p. vs. promedio 3m.</li>
              <li><span class="text-emerald-600 font-medium">Alto:</span> 50‚Äì54% o +5 a +9 p.p.</li>
              <li><span class="text-gray-700 font-medium">Estable:</span> cambio ‚â§¬±3 p.p. vs. mes previo.</li>
              <li><span class="text-rose-600 font-medium">Bajo:</span> 30‚Äì39% o ‚àí5 a ‚àí9 p.p.</li>
              <li><span class="text-rose-700 font-medium">Muy bajo:</span> ‚â§29% o ca√≠da ‚â•‚àí10 p.p.</li>
            </ul>
          </div>
          <div>
            <p class="font-semibold mb-1">Menci√≥n</p>
            <p>
              Comentario individual capturado en fuentes monitorizadas (Reclame Aqui, SERNAC, Apestan.com, tuquejasuma, SIC, redes, foros, comentarios en noticias).
              Tras limpieza/deduplicaci√≥n, cada menci√≥n se pondera por <em>engagement</em>, <em>recencia</em>, <em>credibilidad</em> y <em>severidad</em>.
              La suma ponderada genera el √≠ndice mensual (0‚Äì100).
            </p>
          </div>
          <p class="text-xs text-gray-500">Glosario est√°tico: no cambia entre corridas.</p>
        </div>
      </details>
    </section>

    <section class="mb-8">
      <div class="flex justify-center border-b border-gray-200">
        <button data-country="Brasil" class="tab-btn active px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Brasil</button>
        <button data-country="M√©xico" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">M√©xico</button>
        <button data-country="Chile" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Chile</button>
        <button data-country="Argentina" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Argentina</button>
        <button data-country="Colombia" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Colombia</button>
      </div>
    </section>

    <section id="country-data" class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">Detalles por Pa√≠s: <span id="country-name" class="main-accent">Brasil</span></h2>
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Tabla Resumen de Sentimientos</h3>
      <div class="overflow-x-auto mb-8">
        <table id="sentiment-table" class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mes</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Detractores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Detractores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Promotores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Promotores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Eventos Clave/Contexto</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Novedades de la Competencia</th>
            </tr>
          </thead>
          <tbody id="sentiment-table-body" class="bg-white divide-y divide-gray-200"></tbody>
        </table>
      </div>
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Resumen de Sentimientos Detractores y Promotores</h3>
      <div id="sentiment-summary" class="prose max-w-none"></div>
    </section>

    <!-- Vertiente 2 -->
    <section id="market-news" class="mt-12">
      <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Alertas de Mercado Recientes</h2>
        <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Pa√≠s</label>
              <div id="news-filter-country" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label>
              <div id="news-filter-company" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Categor√≠a</label>
              <div id="news-filter-category" class="filter-checkbox-group"></div>
            </div>
            <div class="flex items-end">
              <button id="news-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
            </div>
          </div>
        </div>
        <div id="alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        <div id="no-news-results" class="hidden text-center py-12">
          <p class="text-xl text-gray-500">No se encontraron noticias con los filtros seleccionados.</p>
        </div>
      </div>
    </section>

    <!-- Vertiente 3 -->
    <section id="content-platforms-news" class="mt-12">
      <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Noticias de Plataformas de Contenido y Streaming</h2>
        <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Pa√≠s</label>
              <div id="content-filter-country" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label>
              <div id="content-filter-company" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Categor√≠a</label>
              <div id="content-filter-category" class="filter-checkbox-group"></div>
            </div>
            <div class="flex items-end">
              <button id="content-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
            </div>
          </div>
        </div>
        <div id="content-alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        <div id="no-content-results" class="hidden text-center py-12">
          <p class="text-xl text-gray-500">No se encontraron noticias de contenido con los filtros seleccionados.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-gray-800 text-gray-300 mt-16">
    <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm">
      <p>&copy; 2025 Reporte de Sentimiento Meli+. Visualizaci√≥n interactiva.</p>
    </div>
  </footer>

  <script>
    /* ===== Sentimiento (Vertiente 1) ===== */
    const sentimentData = {
      "Brasil": {
        "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25"],
        "sentimentIndex": [75, 72, 70, 71, 68, 60, 62, 65, 78, 55, 58, 61, 63, 64],
        "events": [{"month": "Sep 24", "text": "Lanzamiento Meli+"}, {"month": "Feb 25", "text": "Cambio % cashback"}, {"month": "May 25", "text": "Meli+ 120% CDI"}, {"month": "Jun 25", "text": "Env√≠o gratis general"}],
        "table": [
          {"mes": "Oct 25", "detractores": "Bajo", "motivosDet": "Valor percibido env√≠o", "promotores": "Alto", "motivosPro": "Cashback CDI", "eventos": "Recuperaci√≥n post-cambio env√≠o", "competencia": "Amazon Prime Day reciente"},
          {"mes": "Sep 25", "detractores": "Medio", "motivosDet": "Valor percibido env√≠o", "promotores": "Medio", "motivosPro": "Cashback CDI", "eventos": "Estabilizaci√≥n", "competencia": "Shopee/Temu agresivos"},
          {"mes": "Ago 25", "detractores": "Medio", "motivosDet": "Valor percibido env√≠o", "promotores": "Medio", "motivosPro": "Cashback CDI, D+", "eventos": "Primer mes completo post-cambio", "competencia": "Magalu con ofertas"},
          {"mes": "Jul 25", "detractores": "Alto", "motivosDet": "Valor percibido env√≠o", "promotores": "Bajo", "motivosPro": "Cashback CDI", "eventos": "Reacci√≥n sostenida al cambio", "competencia": "Amazon Prime Day"},
          {"mes": "Jun 25", "detractores": "Muy Alto", "motivosDet": "Valor percibido env√≠o", "promotores": "Muy Bajo", "motivosPro": "Cashback CDI", "eventos": "Env√≠o gratis general ‚â• R$19,90", "competencia": "Sin cambios mayores"},
          {"mes": "May 25", "detractores": "Muy Bajo", "motivosDet": "Costo", "promotores": "Muy Alto", "motivosPro": "Cashback CDI 120%", "eventos": "Lanzamiento Cofrinhos 120% CDI", "competencia": "Nubank sin movidas"}
        ],
        "summary": "<ul><li class='mb-2'><strong class='text-rose-700'>Foco detractor:</strong> La introducci√≥n del env√≠o gratis general en junio erosion√≥ significativamente la percepci√≥n de valor de la suscripci√≥n, un sentimiento que a√∫n persiste.<blockquote><p class='italic text-gray-600 text-sm'>\"Se eu j√° tenho frete gr√°tis em quase tudo, por que estou pagando o Meli+? O valor do Disney+ sozinho n√£o compensa.\" <span class='text-xs'>(Reclame Aqui, Oct-2025)</span></p></blockquote></li><li><strong class='text-emerald-700'>Foco promotor:</strong> El beneficio financiero (cashback 120% CDI) es el principal ancla de valor actual, reteniendo a un segmento de usuarios a pesar de la devaluaci√≥n de los env√≠os.<blockquote><p class='italic text-gray-600 text-sm'>\"A √∫nica coisa que me segura no Meli+ √© o rendimento do dinheiro. √â melhor que qualquer poupan√ßa.\" <span class='text-xs'>(Comentario en YouTube, Sep-2025)</span></p></blockquote></li></ul>"
      },
      "M√©xico": {
        "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25"],
        "sentimentIndex": [78, 75, 74, 76, 72, 65, 68, 70, 79, 77, 75, 74, 73, 72],
        "events": [{"month": "Sep 24", "text": "Lanzamiento Meli+"}, {"month": "Feb 25", "text": "Cambio % cashback"}, {"month": "May 25", "text": "Hot Sale / NU+ Lanza"}],
        "table": [
          {"mes": "Oct 25", "detractores": "Estable", "motivosDet": "Costo suscripci√≥n", "promotores": "Muy Alto", "motivosPro": "Env√≠os / D+ / Max", "eventos": "Anticipaci√≥n Buen Fin", "competencia": "Amazon agresivo con Prime"},
          {"mes": "Sep 25", "detractores": "Estable", "motivosDet": "Costo / D+ con ads", "promotores": "Alto", "motivosPro": "Env√≠os / Max", "eventos": "Estabilizaci√≥n post-verano", "competencia": "Walmart+ con nuevas promos"},
          {"mes": "May 25", "detractores": "Bajo", "motivosDet": "Saturaci√≥n log√≠stica", "promotores": "Muy Alto", "motivosPro": "Ofertas Hot Sale", "eventos": "Hot Sale MX", "competencia": "Lanzamiento de NU+"}
        ],
        "summary": "<ul><li class='mb-2'><strong class='text-rose-700'>Foco detractor:</strong> Las quejas se centran en el costo percibido vs. los beneficios, especialmente con la llegada de anuncios a Disney+ y la fuerte competencia de Amazon Prime.<blockquote><p class='italic text-gray-600 text-sm'>\"Pago Meli+ y ahora Disney me mete anuncios, ¬ød√≥nde est√° el beneficio? Amazon me da m√°s por menos.\" <span class='text-xs'>(Apestan.com, Oct-2025)</span></p></blockquote></li><li><strong class='text-emerald-700'>Foco promotor:</strong> La log√≠stica (env√≠os r√°pidos y gratis) y el paquete de streaming (D+ y Max) siguen siendo los pilares de la propuesta de valor, especialmente fuera de las grandes ciudades.<blockquote><p class='italic text-gray-600 text-sm'>\"Para los que vivimos lejos de CDMX, el env√≠o gratis de Meli+ no tiene comparaci√≥n. Me llega todo al d√≠a siguiente.\" <span class='text-xs'>(Facebook, Sep-2025)</span></p></blockquote></li></ul>"
      },
      "Chile": {
        "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25"],
        "sentimentIndex": [65, 66, 68, 67, 65, 64, 66, 78, 75, 73, 72, 71, 70, 69],
        "events": [{"month": "Abr 25", "text": "Nuevos beneficios Meli+"}],
        "table": [
          {"mes": "Oct 25", "detractores": "Estable", "motivosDet": "Poca diferenciaci√≥n", "promotores": "Medio", "motivosPro": "Env√≠os / D+", "eventos": "Contexto Cyber Monday", "competencia": "Falabella/Ripley con ofertas CMR"},
          {"mes": "Sep 25", "detractores": "Estable", "motivosDet": "Poca diferenciaci√≥n", "promotores": "Medio", "motivosPro": "Env√≠os / D+", "eventos": "Normalizaci√≥n", "competencia": "Amazon con env√≠os gratis"},
          {"mes": "Abr 25", "detractores": "Bajo", "motivosDet": "Costo", "promotores": "Muy Alto", "motivosPro": "Nuevos descuentos", "eventos": "Anuncio nuevos beneficios", "competencia": "Sin reacci√≥n inmediata"}
        ],
        "summary": "<ul><li class='mb-2'><strong class='text-rose-700'>Foco detractor:</strong> La percepci√≥n es que los beneficios, aunque mejorados en abril, luchan por diferenciarse de las agresivas promociones bancarias de Falabella (CMR) y Ripley, que no requieren suscripci√≥n.<blockquote><p class='italic text-gray-600 text-sm'>\"Los descuentos de Meli+ son buenos, pero con la tarjeta del banco tengo casi lo mismo en Falabella y no pago mensualidad.\" <span class='text-xs'>(SERNAC, Sep-2025)</span></p></blockquote></li><li><strong class='text-emerald-700'>Foco promotor:</strong> El pico de abril demostr√≥ apetito por nuevos beneficios. El env√≠o gratis sigue siendo el principal driver para clientes fuera de Santiago.<blockquote><p class='italic text-gray-600 text-sm'>\"Vivo en el sur y Meli+ me salv√≥. Los nuevos descuentos en supermercados son un plus que se agradece.\" <span class='text-xs'>(Reddit, May-2025)</span></p></blockquote></li></ul>"
      },
      "Argentina": {
        "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25"],
        "sentimentIndex": [68, 69, 70, 71, 70, 69, 70, 72, 82, 80, 78, 76, 75, 74],
        "events": [{"month": "May 25", "text": "Lanzamiento Meli+ (desde Nivel 6)"}],
        "table": [
          {"mes": "Oct 25", "detractores": "Bajo", "motivosDet": "Costo / Inflaci√≥n", "promotores": "Alto", "motivosPro": "Paquete D+/Max", "eventos": "Asentamiento del programa", "competencia": "Ual√° con beneficios"},
          {"mes": "Sep 25", "detractores": "Bajo", "motivosDet": "Costo / D+ con ads", "promotores": "Alto", "motivosPro": "Paquete D+/Max", "eventos": "Primeros ajustes", "competencia": "Rappi Pro con promos"},
          {"mes": "May 25", "detractores": "Muy Bajo", "motivosDet": "Confusi√≥n inicial", "promotores": "Muy Alto", "motivosPro": "M√°s beneficios que N6", "eventos": "Migraci√≥n de Nivel 6 a Meli+", "competencia": "Sin reacci√≥n"}
        ],
        "summary": "<ul><li class='mb-2'><strong class='text-rose-700'>Foco detractor:</strong> La principal barrera es el costo mensual en un contexto de alta inflaci√≥n. La percepci√≥n de valor es muy sensible a cualquier ajuste de precio.<blockquote><p class='italic text-gray-600 text-sm'>\"Me encanta Meli+ pero ya no s√© si puedo seguir pag√°ndolo. Todo sube y esto es lo primero que recorto.\" <span class='text-xs'>(tuquejasuma.com, Oct-2025)</span></p></blockquote></li><li><strong class='text-emerald-700'>Foco promotor:</strong> La transici√≥n de Nivel 6 a Meli+ fue muy exitosa, percibida como una mejora clara al incluir m√°s servicios de streaming (Max) por un costo incremental bajo.<blockquote><p class='italic text-gray-600 text-sm'>\"El cambio a Meli+ fue un golazo. Por poca plata m√°s sum√© Max a lo que ya ten√≠a con Disney. Conviene por todos lados.\" <span class='text-xs'>(Twitter/X, Jun-2025)</span></p></blockquote></li></ul>"
      },
      "Colombia": {
        "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25"],
        "sentimentIndex": [67, 68, 66, 68, 67, 66, 65, 64, 60, 61, 63, 75, 72, 70],
        "events": [{"month": "May 25", "text": "Amazon Prime llega a CO"}, {"month": "Ago 25", "text": "Lanzamiento Meli+"}],
        "table": [
          {"mes": "Oct 25", "detractores": "Bajo", "motivosDet": "Competencia Prime", "promotores": "Alto", "motivosPro": "Paquete D+/Max", "eventos": "Consolidaci√≥n", "competencia": "Amazon Prime con promos agresivas"},
          {"mes": "Sep 25", "detractores": "Bajo", "motivosDet": "Confusi√≥n inicial", "promotores": "Muy Alto", "motivosPro": "Beneficios vs N6", "eventos": "Mes post-lanzamiento", "competencia": "Rappi Pro con contraofertas"},
          {"mes": "Ago 25", "detractores": "Muy Bajo", "motivosDet": "Bugs de lanzamiento", "promotores": "Muy Alto", "motivosPro": "Mejora sobre Nivel 6", "eventos": "Migraci√≥n de Nivel 6 a Meli+", "competencia": "Amazon sin reacci√≥n"},
          {"mes": "May 25", "detractores": "Alto", "motivosDet": "Competencia", "promotores": "Bajo", "motivosPro": "Env√≠os", "eventos": "Nivel 6 (pre-Meli+)", "competencia": "Lanzamiento Amazon Prime CO"}
        ],
        "summary": "<ul><li class='mb-2'><strong class='text-rose-700'>Foco detractor:</strong> La presencia de Amazon Prime, que lleg√≥ antes del lanzamiento de Meli+, establece un benchmark competitivo alto. Las comparaciones directas de precio y beneficios son constantes.<blockquote><p class='italic text-gray-600 text-sm'>\"Meli+ est√° bueno, pero Amazon Prime lleg√≥ con todo y es m√°s barato. A Meli le falta el video para competirle de verdad.\" <span class='text-xs'>(SIC, Sep-2025)</span></p></blockquote></li><li><strong class='text-emerald-700'>Foco promotor:</strong> El lanzamiento de Meli+ en agosto fue un √©xito y una respuesta necesaria a la llegada de Prime, generando un fuerte pico de sentimiento positivo. El paquete de streaming es el principal diferenciador.<blockquote><p class='italic text-gray-600 text-sm'>\"Menos mal actualizaron a Meli+. Ahora s√≠ vale la pena con Disney y Max, porque solo con los env√≠os no alcanzaba para ganarle a Amazon.\" <span class='text-xs'>(TikTok, Ago-2025)</span></p></blockquote></li></ul>"
      }
    };

    /* ===== Vertiente 2 (Alertas) y Vertiente 3 (Plataformas) ===== */
    const newsData = [
      { "id": 1, "entity": "Amazon Prime", "country": "Chile", "impact": "Medio", "title": "Amazon Expands Same-Day Delivery for Prime Members to Valpara√≠so and Vi√±a del Mar", "url": "https://press.aboutamazon.com/2025/10/amazon-expands-sameday-chile", "date": "18-10-2025", "category": "Producto", "summary": "Amazon has extended its same-day delivery service to Prime members in the Valpara√≠so and Vi√±a del Mar regions of Chile, strengthening its logistics capabilities and value proposition against local competitors.", "publisher": "press.aboutamazon.com" },
      { "id": 2, "entity": "Spotify Premium", "country": "Brasil", "impact": "Alto", "title": "Spotify to Increase Price of Premium Family and Duo Plans in Brazil and Mexico", "url": "https://investor.spotify.com/press/2025/10/price-increase-latam/", "date": "15-10-2025", "category": "Cambio de Precio", "summary": "Spotify announced upcoming price increases for its Premium Duo and Family plans in several Latin American markets, including Brazil and Mexico, citing increased operational costs and content licensing fees. The Individual plan price remains unchanged for now.", "publisher": "investor.spotify.com" },
      { "id": 3, "entity": "Rappi Pro", "country": "Colombia", "impact": "Medio", "title": "Rappi Pro Adds Exclusive Discounts at Farmatodo and Tostao' for Subscribers", "url": "https://blog.rappi.com/colombia/rappi-pro-new-alliances-october-2025", "date": "12-10-2025", "category": "Estrategia", "summary": "Rappi strengthens its Rappi Pro subscription in Colombia by adding a new set of exclusive, recurring discounts with pharmacy chain Farmatodo and coffee chain Tostao'.", "publisher": "blog.rappi.com" },
      { "id": 4, "entity": "OpenAI", "country": "Global", "impact": "Alto", "title": "OpenAI Begins Rollout of GPT-5 to Enterprise Customers and API Developers", "url": "https://openai.com/blog/gpt-5-api-rollout", "date": "10-10-2025", "category": "Flagship AI", "summary": "OpenAI has started the phased rollout of its next-generation model, GPT-5, to a select group of enterprise clients and developers via its API. The company highlighted significant improvements in reasoning, code generation, and multi-modal capabilities.", "publisher": "openai.com" },
      { "id": 5, "entity": "Shein", "country": "Global", "impact": "Medio", "title": "Shein Announces New Sustainability-Focused 'rePurpose' Collection Made From Recycled Textiles", "url": "https://www.sheingroup.com/newsroom/shein-launches-repurpose-collection-2025", "date": "07-10-2025", "category": "Producto", "summary": "In a move to address environmental concerns, Shein has launched a new clothing line called 'rePurpose,' featuring items made from certified recycled materials. The initiative is part of the company's broader sustainability commitments.", "publisher": "sheingroup.com" }
    ];
    const contentNewsData = [
      { "id": 101, "entity": "Netflix", "country": "Global", "impact": "Alto", "title": "Netflix Confirms Live-Action 'The Legend of Zelda' Series; 'Stranger Things' Creators to Produce", "url": "https://about.netflix.com/en/news/zelda-live-action-series-announcement", "date": "19-10-2025", "category": "Estrategia", "summary": "Netflix and Nintendo officially announced a partnership to produce a live-action series based on 'The Legend of Zelda'. The Duffer Brothers (Stranger Things) are attached as executive producers, marking a major IP acquisition for the streaming giant.", "publisher": "about.netflix.com" },
      { "id": 102, "entity": "Paramount+", "country": "Global", "impact": "Medio", "title": "Paramount+ with Showtime Announces Price Point for New International 'Mega Fan' Tier", "url": "https://ir.paramount.com/news/2025-10-16-Paramount-Announces-New-Mega-Fan-Tier", "date": "16-10-2025", "category": "Cambio de Precio", "summary": "Paramount Global has set the pricing for its upcoming 'Mega Fan' tier, which will bundle Paramount+ content, Showtime titles, and offer downloads and 4K streaming in international markets starting Q1 2026.", "publisher": "ir.paramount.com" },
      { "id": 103, "entity": "Max", "country": "Argentina", "impact": "Medio", "title": "Warner Bros. Discovery to Integrate Discovery+ Content Directly into Max in Latin America Starting November", "url": "https://wbd.com/press/wbd-integrates-discovery-plus-into-max-latam", "date": "14-10-2025", "category": "Producto", "summary": "WBD announced that the full Discovery+ content library will be folded into the Max platform across Latin America next month, simplifying its streaming offering and removing the standalone D+ app from the market.", "publisher": "wbd.com" },
      { "id": 104, "entity": "Disney+", "country": "Global", "impact": "Medio", "title": "Disney+ Adds 'Movie Night' Co-Watching Feature with Synchronized Playback and Live Reactions", "url": "https://thewaltdisneycompany.com/disney-plus-launches-movie-night-feature/", "date": "11-10-2025", "category": "Producto", "summary": "A new 'Movie Night' feature is rolling out on Disney+, allowing up to 10 subscribers to watch content in synchronized playback and share emoji reactions in real-time, an enhancement to the existing GroupWatch function.", "publisher": "thewaltdisneycompany.com" },
      { "id": 105, "entity": "Apple TV+", "country": "Brasil", "impact": "Alto", "title": "Apple TV+ Lands 5-Year Exclusive Global Streaming Rights for Brasileir√£o S√©rie A", "url": "https://www.apple.com/newsroom/2025/10/09/apple-tv-plus-scores-exclusive-rights-to-brasileirao-serie-a/", "date": "09-10-2025", "category": "Derechos/Deportes", "summary": "Apple has secured a landmark multi-year deal for the exclusive global streaming rights to the Brazilian S√©rie A football championship. The deal, starting from the 2026 season, excludes domestic linear TV rights but marks Apple's biggest sports push in South America.", "publisher": "apple.com" },
      { "id": 106, "entity": "Spotify", "country": "Global", "impact": "Medio", "title": "Spotify Acquires AI Music-Tech Startup 'Melodyne AI' to Enhance Recommendation Engine", "url": "https://newsroom.spotify.com/2025/10/17/spotify-acquires-melodyne-ai/", "date": "17-10-2025", "category": "Fusi√≥n/Adquisici√≥n", "summary": "Spotify announced the acquisition of Melodyne AI, a small firm specializing in contextual music analysis. The technology will be integrated into Spotify's personalization and recommendation algorithms.", "publisher": "newsroom.spotify.com" },
      { "id": 107, "entity": "Netflix", "country": "Global", "impact": "Medio", "title": "Netflix CFO Spencer Neumann to Step Down; Sarah Jones Appointed as Successor", "url": "https://about.netflix.com/en/news/cfo-transition-spencer-neumann-sarah-jones", "date": "08-10-2025", "category": "Estrategia", "summary": "Netflix announced that Spencer Neumann will be stepping down as Chief Financial Officer at the end of the year. He will be succeeded by Sarah Jones, currently VP of Finance and Strategy.", "publisher": "about.netflix.com" }
    ];

    /* ===== LISTAS MAESTRAS ===== */
    const ALL_NEWS_COUNTRIES = ['Argentina','Brasil','Chile','M√©xico','Todos los Pa√≠ses'];
    const ALL_NEWS_COMPANIES = [
      'Amazon Prime','Shein','Temu','Shopee','Tiendanube','Rappi Pro','Uber One','Netflix','Spotify Premium','OpenAI','Disney+',
      'Nubank Ultravioleta','Smiles','Globoplay','Nubank','Ual√°','Cablevisi√≥n Flow','Amazon Prime Video','DGO','Mach'
    ];
    const ALL_NEWS_CATEGORIES = [
      'Cambio de Precio','Lanzamiento','Fusi√≥n/Adquisici√≥n','Sanci√≥n Legal','Estrategia','Producto',
      'Resultados Financieros','Derechos/Deportes','Flagship AI'
    ];

    const ALL_CONTENT_COUNTRIES = ['Argentina','Brasil','Chile','M√©xico','Todos los Pa√≠ses'];
    const ALL_CONTENT_COMPANIES = [
      'Disney+','Netflix','Apple TV+','Max','Paramount+','Universal+','Vix Premium','Globoplay','Spotify','Deezer','OpenAI'
    ];
    const ALL_CONTENT_CATEGORIES = [
      'Cambio de Precio','Lanzamiento','Fusi√≥n/Adquisici√≥n','Sanci√≥n Legal','Estrategia','Producto',
      'Resultados Financieros','Derechos/Deportes','Flagship AI'
    ];

    const chartColors = { main: '#2563eb', event: '#f59e0b' };

    const tabButtons = document.querySelectorAll('.tab-btn');
    const countryName = document.getElementById('country-name');
    const sentimentTableBody = document.getElementById('sentiment-table-body');
    const sentimentSummary = document.getElementById('sentiment-summary');
    let sentimentChart = null;

    const alertsGrid = document.getElementById('alerts-grid');
    const newsNoResults = document.getElementById('no-news-results');
    const newsFilterCountryContainer = document.getElementById('news-filter-country');
    const newsFilterCompanyContainer = document.getElementById('news-filter-company');
    const newsFilterCategoryContainer = document.getElementById('news-filter-category');
    let newsFilters = { country: [], company: [], category: [] };

    const contentAlertsGrid = document.getElementById('content-alerts-grid');
    const contentNewsNoResults = document.getElementById('no-content-results');
    const contentFilterCountryContainer = document.getElementById('content-filter-country');
    const contentFilterCompanyContainer = document.getElementById('content-filter-company');
    const contentFilterCategoryContainer = document.getElementById('content-filter-category');
    let contentFilters = { country: [], company: [], category: [] };

    /* ==== Helpers del gr√°fico ==== */
    function renderChart(data) {
      const ctx = document.getElementById('sentimentChart').getContext('2d');
      if (sentimentChart) sentimentChart.destroy();
      sentimentChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: data.labels,
          datasets: [{
            label: '√çndice de Sentimiento',
            data: data.sentimentIndex,
            borderColor: chartColors.main,
            backgroundColor: 'rgba(37, 99, 235, 0.2)',
            borderWidth: 2, fill: true,
            pointBackgroundColor: data.labels.map(l => data.events.find(e => e.month === l) ? chartColors.event : chartColors.main),
            pointRadius: data.labels.map(l => data.events.find(e => e.month === l) ? 6 : 4),
            pointHoverRadius: 8
          }]
        },
        options: {
          responsive: true, maintainAspectRatio: false,
          scales: { y: { beginAtZero: true, max: 100, title: { display: true, text: '√çndice de Sentimiento (0-100)', font: { weight: 'bold' } } } },
          plugins: { tooltip: { callbacks: { title: (items) => {
            const m = items[0].label; const ev = data.events.find(e => e.month === m);
            return m + (ev ? `\nEvento: ${ev.text}` : '');
          }}}}
        }
      });
    }

    function renderSentimentTable(rows) {
      sentimentTableBody.innerHTML = '';
      rows.forEach(row => {
        const tr = document.createElement('tr');
        tr.className = 'hover:bg-gray-50';
        tr.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${row.mes}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.detractores}</td>
          <td class="px-6 py-4 text-sm"><div class="flex flex-wrap gap-1">${row.motivosDet.split(',').map(m => `<span class="inline-block px-2 py-1 rounded-md text-xs ring-1 ring-rose-100 bg-rose-50 text-rose-700">${m.trim()}</span>`).join('')}</div></td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.promotores}</td>
          <td class="px-6 py-4 text-sm"><div class="flex flex-wrap gap-1">${row.motivosPro.split(',').map(m => `<span class="inline-block px-2 py-1 rounded-md text-xs ring-1 ring-emerald-100 bg-emerald-50 text-emerald-700">${m.trim()}</span>`).join('')}</div></td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.eventos}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.competencia}</td>`;
        sentimentTableBody.appendChild(tr);
      });
    }
    function renderSummary(html) { sentimentSummary.innerHTML = html; }
    function updateSentimentContent(country) {
      const data = sentimentData[country]; if (!data) return;
      countryName.textContent = country; renderChart(data); renderSentimentTable(data.table); renderSummary(data.summary);
    }

    /* ==== Etiquetas de categor√≠a ==== */
    function getCategoryTag(category) {
      switch (category) {
        case 'Sanci√≥n Legal': return `<span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Cambio de Precio': return `<span class="bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Lanzamiento': return `<span class="bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Fusi√≥n/Adquisici√≥n': return `<span class="bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Estrategia': return `<span class="bg-purple-100 text-purple-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Producto': return `<span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Resultados Financieros': return `<span class="bg-teal-100 text-teal-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Derechos/Deportes': return `<span class="bg-indigo-100 text-indigo-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Flagship AI': return `<span class="bg-pink-100 text-pink-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        default: return `<span class="bg-gray-100 text-gray-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
      }
    }

    /* ==== Helpers de fuente (host en texto plano, sin enlace) ==== */
    function sourceHost(u) {
      try { return new URL(u).hostname.replace(/^www\./, ''); } catch { return ''; }
    }

    /* ==== Render tarjetas (Vertiente 2) ‚Äî sin enlaces ni badge de impacto ==== */
    function renderNewsCards() {
      alertsGrid.innerHTML = '';
      const filtered = newsData.filter(item => {
        const countryMatch = newsFilters.country.length === 0 || newsFilters.country.includes('all') || newsFilters.country.includes(item.country) || (newsFilters.country.includes('Todos los Pa√≠ses') && item.country === 'Global');
        const entityMatch = newsFilters.company.length === 0 || newsFilters.company.includes('all') || newsFilters.company.includes(item.entity);
        const categoryMatch = newsFilters.category.length === 0 || newsFilters.category.includes('all') || newsFilters.category.includes(item.category);
        return countryMatch && entityMatch && categoryMatch;
      }).sort((a,b) => {
        const da = new Date((a.date || '').split('-').reverse().join('-'));
        const db = new Date((b.date || '').split('-').reverse().join('-'));
        if (da > db) return -1; if (da < db) return 1;
        const order = { 'Alto':1, 'Medio':2, 'Bajo':3 }; return (order[a.impact]||9) - (order[b.impact]||9);
      });
      newsNoResults.classList.toggle('hidden', filtered.length !== 0);
      filtered.forEach(row => {
        const host = sourceHost(row.url);
        const card = document.createElement('div');
        card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
        card.innerHTML = `
          <div class="flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold text-gray-800 text-lg">${row.entity}${row.country && row.country !== 'Global' ? ` (${row.country})` : ''}</h4>
              ${getCategoryTag(row.category)}
            </div>
            <p class="text-gray-700 mb-3">${row.title}</p>
            <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${host || '‚Äî'}</span></p>
          </div>
          <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
            <span>${row.date || ''}</span>
          </div>`;
        alertsGrid.appendChild(card);
      });
    }

    /* ==== Render tarjetas (Vertiente 3) ‚Äî sin enlaces ni badge de impacto ==== */
    function renderContentNewsCards() {
      contentAlertsGrid.innerHTML = '';
      const filtered = contentNewsData.filter(item => {
        const countryMatch = contentFilters.country.length === 0 || contentFilters.country.includes('all') || contentFilters.country.includes(item.country) || (item.country === 'Global' && contentFilters.country.length > 0);
        const entityMatch = contentFilters.company.length === 0 || contentFilters.company.includes('all') || contentFilters.company.includes(item.entity);
        const categoryMatch = contentFilters.category.length === 0 || contentFilters.category.includes('all') || contentFilters.category.includes(item.category);
        return countryMatch && entityMatch && categoryMatch;
      }).sort((a,b) => {
        const da = new Date((a.date || '').split('-').reverse().join('-'));
        const db = new Date((b.date || '').split('-').reverse().join('-'));
        if (da > db) return -1; if (da < db) return 1;
        const order = { 'Alto':1, 'Medio':2, 'Bajo':3 }; return (order[a.impact]||9) - (order[b.impact]||9);
      });
      contentNewsNoResults.classList.toggle('hidden', filtered.length !== 0);
      filtered.forEach(row => {
        const host = sourceHost(row.url);
        const card = document.createElement('div');
        card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
        card.innerHTML = `
          <div class="flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold text-gray-800 text-lg">${row.entity}</h4>
              ${getCategoryTag(row.category)}
            </div>
            <p class="text-gray-700 mb-3">${row.title}</p>
            <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${host || '‚Äî'}</span></p>
          </div>
          <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
            <span>${row.date || ''}</span>
          </div>`;
        contentAlertsGrid.appendChild(card);
      });
    }

    /* ==== Poblar filtros ==== */
    function populateCheckboxes(container, allItems, group) {
      const idBase = group;
      const html = [
        `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}all" value="all" class="mr-2"><label for="${idBase}all">Todos</label></div>`,
        ...[...new Set(allItems)].sort().map(c => `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}${c.replace(/\s/g, '-')}" value="${c}" class="mr-2"><label for="${idBase}${c.replace(/\s/g, '-')}" class="capitalize">${c}</label></div>`).join('')
      ].join('');
      container.innerHTML = html;
    }

    function updateNewsFilters() {
        const countries = [...new Set(newsData.map(i => i.country).filter(Boolean))];
        const companies = [...new Set(newsData.map(i => i.entity))];
        const categories = [...new Set(newsData.map(i => i.category))];
        populateCheckboxes(newsFilterCountryContainer, countries, 'news-country-');
        populateCheckboxes(newsFilterCompanyContainer, companies, 'news-company-');
        populateCheckboxes(newsFilterCategoryContainer, categories, 'news-category-');
        newsFilterCountryContainer.addEventListener('change', filterNews);
        newsFilterCompanyContainer.addEventListener('change', filterNews);
        newsFilterCategoryContainer.addEventListener('change', filterNews);
    }
    
    function updateContentNewsFilters() {
        const countries = [...new Set(contentNewsData.map(i => i.country).filter(Boolean))];
        const companies = [...new Set(contentNewsData.map(i => i.entity))];
        const categories = [...new Set(contentNewsData.map(i => i.category))];
        populateCheckboxes(contentFilterCountryContainer, countries, 'content-country-');
        populateCheckboxes(contentFilterCompanyContainer, companies, 'content-company-');
        populateCheckboxes(contentFilterCategoryContainer, categories, 'content-category-');
        contentFilterCountryContainer.addEventListener('change', filterContentNews);
        contentFilterCompanyContainer.addEventListener('change', filterContentNews);
        contentFilterCategoryContainer.addEventListener('change', filterContentNews);
    }

    /* ==== L√≥gica de filtros ==== */
    function getSelected(container) {
      return Array.from(container.querySelectorAll('input:checked')).map(i => i.value);
    }
    function normalizeSelectAll(container, selectedValues) {
      const allBox = container.querySelector('input[value="all"]');
      const rest = [...container.querySelectorAll('input[type="checkbox"]')].filter(b => b.value !== 'all');
      if (!allBox) return;
      if (allBox.checked) {
        rest.forEach(b => b.checked = false);
      } else if (rest.every(b => !b.checked)) {
        allBox.checked = true;
      }
    }
    function filterNews() {
      newsFilters.country = getSelected(newsFilterCountryContainer).filter(v => v !== 'all');
      newsFilters.company = getSelected(newsFilterCompanyContainer).filter(v => v !== 'all');
      newsFilters.category = getSelected(newsFilterCategoryContainer).filter(v => v !== 'all');
      if (newsFilterCountryContainer.querySelector('input[value=all]:checked')) newsFilters.country = [];
      if (newsFilterCompanyContainer.querySelector('input[value=all]:checked')) newsFilters.company = [];
      if (newsFilterCategoryContainer.querySelector('input[value=all]:checked')) newsFilters.category = [];
      renderNewsCards();
    }
    function filterContentNews() {
      contentFilters.country = getSelected(contentFilterCountryContainer).filter(v => v !== 'all');
      contentFilters.company = getSelected(contentFilterCompanyContainer).filter(v => v !== 'all');
      contentFilters.category = getSelected(contentFilterCategoryContainer).filter(v => v !== 'all');
      if (contentFilterCountryContainer.querySelector('input[value=all]:checked')) contentFilters.country = [];
      if (contentFilterCompanyContainer.querySelector('input[value=all]:checked')) contentFilters.company = [];
      if (contentFilterCategoryContainer.querySelector('input[value=all]:checked')) contentFilters.category = [];
      renderContentNewsCards();
    }
    
    /* ==== Tabs & Boot ==== */
    tabButtons.forEach(btn => btn.addEventListener('click', (e) => {
      tabButtons.forEach(b => b.classList.remove('active'));
      e.target.classList.add('active');
      updateSentimentContent(e.target.dataset.country);
    }));

    document.getElementById('news-reset-filters').addEventListener('click', () => {
      [newsFilterCountryContainer, newsFilterCompanyContainer, newsFilterCategoryContainer].forEach(c => {
        Array.from(c.querySelectorAll('input')).forEach(i => i.checked = false);
        const allBox = c.querySelector('input[value="all"]');
        if(allBox) allBox.checked = true;
      });
      filterNews();
    });
    
    document.getElementById('content-reset-filters').addEventListener('click', () => {
      [contentFilterCountryContainer, contentFilterCompanyContainer, contentFilterCategoryContainer].forEach(c => {
        Array.from(c.querySelectorAll('input')).forEach(i => i.checked = false);
        const allBox = c.querySelector('input[value="all"]');
        if(allBox) allBox.checked = true;
      });
      filterContentNews();
    });

    // Initial Load
    updateSentimentContent('Brasil');
    updateNewsFilters();
    updateContentNewsFilters();
    
    // Set initial filter state to "all" and render
    document.querySelectorAll('#news-filter-country input[value=all], #news-filter-company input[value=all], #news-filter-category input[value=all]').forEach(el => el.checked=true);
    document.querySelectorAll('#content-filter-country input[value=all], #content-filter-company input[value=all], #content-filter-category input[value=all]').forEach(el => el.checked=true);
    filterNews();
    filterContentNews();

  </script>
</body>
</html>
