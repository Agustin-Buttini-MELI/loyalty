<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1f2937; }
    .main-accent { color: #2563eb; } .bg-main-accent { background-color: #2563eb; }
    .tab-btn.active { background-color: #e0f2fe; border-bottom: 2px solid #2563eb; }
    .tab-btn { transition: background-color 0.3s ease; }
    .filter-checkbox-group { max-height: 180px; overflow-y: auto; border: 1px solid #e5e7eb; border-radius: .5rem; padding: 8px; }
    .filter-checkbox-item { display: flex; align-items: center; gap: .5rem; margin-bottom: .25rem; }
  </style>
</head>
<body class="antialiased">
<header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <div class="flex items-center space-x-3">
        <div class="bg-main-accent p-2 rounded-lg">
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/>
          </svg>
        </div>


        <!-- contenedor para t√≠tulo + link (vertical) -->
        <div class="flex flex-col">
          <h1 class="text-xl md:text-2xl font-bold text-gray-800">Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</h1>


          <!-- enlace: tiene clase y estilos inline de respaldo -->
          <a
            class="chip-link mt-1"
            href="https://meli.looker.com/dashboards/25519?Site+id=&Tim+day+Month=13+month&Timeframe=MONTH&Tim+Day+Date=30+day&Reference+month+Month=1+year&Annual+%2F+Monthly+Plan="
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Resultados Internos Meli+"
            style="display:inline-block;margin-top:6px;padding:6px 10px;background:#eef2ff;color:#1e40af;border-radius:8px;font-weight:600;font-size:0.95rem;text-decoration:none;border:1px solid rgba(37,99,235,0.08);"
          >
            Resultados Internos Meli+
          </a>
        </div>
      </div>
    </div>
  </div>
</header>


  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
    <section class="mb-12 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-800">An√°lisis de Sentimiento Meli+</h2>
      <p class="mt-2 text-lg text-gray-600">Visualiza la evoluci√≥n de la percepci√≥n de los clientes en funci√≥n de eventos clave y la competencia.</p>
    </section>


    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 mb-8">
      <h3 class="text-xl font-semibold text-gray-700 mb-4">√çndice de Sentimiento General (Escala 0-100)</h3>
      <div class="chart-container w-full max-w-4xl mx-auto h-96">
        <canvas id="sentimentChart"></canvas>
      </div>
    </div>


<!-- GLOSARIO (acorde√≥n plegable y est√°tico) -->
<section id="glosario" class="bg-white rounded-lg shadow-md border border-gray-200 mb-8">
  <button onclick="document.getElementById('glosario-content').classList.toggle('hidden')"
          class="w-full flex justify-between items-center px-4 py-3 text-left text-gray-800 font-semibold hover:bg-gray-50 focus:outline-none">
    üìñ Glosario
    <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
    </svg>
  </button>


  <div id="glosario-content" class="hidden px-4 pb-4 text-sm text-gray-700 space-y-4">
    <!-- Niveles de sentimiento -->
    <div>
      <p class="font-semibold mb-1">Niveles de sentimiento</p>
      <ul class="list-disc list-inside space-y-1">
        <li><span class="text-emerald-700 font-medium">Muy alto:</span> ‚â•55% menciones ponderadas o +10 p.p. vs. promedio 3m.</li>
        <li><span class="text-emerald-600 font-medium">Alto:</span> 50‚Äì54% o +5 a +9 p.p.</li>
        <li><span class="text-gray-700 font-medium">Estable:</span> cambio ‚â§¬±3 p.p. vs. mes previo.</li>
        <li><span class="text-rose-600 font-medium">Bajo:</span> 30‚Äì39% o ‚àí5 a ‚àí9 p.p.</li>
        <li><span class="text-rose-700 font-medium">Muy bajo:</span> ‚â§29% o ca√≠da ‚â•‚àí10 p.p.</li>
      </ul>
    </div>


    <!-- Definici√≥n de menci√≥n -->
    <div>
      <p class="font-semibold mb-1">Menci√≥n</p>
      <p>
        Cada comentario individual capturado en fuentes monitorizadas (Reclame Aqui, SERNAC, Apestan.com, tuquejasuma, SIC, redes, foros, comentarios en noticias).
        Tras limpieza y deduplicaci√≥n, cada menci√≥n se pondera por <em>engagement</em>, <em>recencia</em>, <em>credibilidad</em> y <em>severidad</em>.
        La suma ponderada genera el √≠ndice mensual (0‚Äì100).
      </p>
    </div>
  </div>
</section>
    <section class="mb-8">
      <div class="flex justify-center border-b border-gray-200">
        <button data-country="Brasil" class="tab-btn active px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Brasil</button>
        <button data-country="M√©xico" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">M√©xico</button>
        <button data-country="Chile" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Chile</button>
        <button data-country="Argentina" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Argentina</button>
        <button data-country="Colombia" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Colombia</button>
      </div>
    </section>


    <section id="country-data" class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">Detalles por Pa√≠s: <span id="country-name" class="main-accent">Brasil</span></h2>
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Tabla Resumen de Sentimientos</h3>
      <div class="overflow-x-auto mb-8">
        <table id="sentiment-table" class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mes</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Detractores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Detractores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Promotores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Promotores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Eventos Clave/Contexto</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Novedades de la Competencia</th>
            </tr>
          </thead>
          <tbody id="sentiment-table-body" class="bg-white divide-y divide-gray-200"></tbody>
        </table>
      </div>
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Resumen de Sentimientos Detractores y Promotores</h3>
      <div id="sentiment-summary" class="prose max-w-none"></div>
    </section>


<section id="meli-summary-slide" class="mt-12"> <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200"> <h2 class="text-2xl font-bold text-gray-800 mb-6">Meli+ Summary (Diapositiva Vinculada)</h2> <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8"> <iframe src="https://docs.google.com/presentation/d/e/2PACX-1vRWue6uIUvlRogZu1iCA9JCFqHVo8nzS-Ue4a6WOC08JqSTbsciuqK4m59exCMbQERuYuMDABCMhc-y/pubembed?start=false&loop=false&delayms=3000" frameborder="0" width="100%" height="450" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" ></iframe> </div> </div> </section>

    <!-- Vertiente 2 -->
    <section id="market-news" class="mt-12">
      <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Alertas de Mercado Recientes</h2>
        <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Pa√≠s</label>
              <div id="news-filter-country" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label>
              <div id="news-filter-company" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Categor√≠a</label>
              <div id="news-filter-category" class="filter-checkbox-group"></div>
            </div>
            <div class="flex items-end">
              <button id="news-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
            </div>
          </div>
        </div>
        <div id="alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        <div id="no-news-results" class="hidden text-center py-12">
          <p class="text-xl text-gray-500">No se encontraron noticias con los filtros seleccionados.</p>
        </div>
      </div>
    </section>


    <!-- Vertiente 3 -->
    <section id="content-platforms-news" class="mt-12">
      <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Noticias de Plataformas de Contenido y Streaming</h2>
        <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Pa√≠s</label>
              <div id="content-filter-country" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label>
              <div id="content-filter-company" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Categor√≠a</label>
              <div id="content-filter-category" class="filter-checkbox-group"></div>
            </div>
            <div class="flex items-end">
              <button id="content-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
            </div>
          </div>
        </div>
        <div id="content-alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        <div id="no-content-results" class="hidden text-center py-12">
          <p class="text-xl text-gray-500">No se encontraron noticias de contenido con los filtros seleccionados.</p>
        </div>
      </div>
    </section>
  </main>


  <footer class="bg-gray-800 text-gray-300 mt-16">
    <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm">
      <p>&copy; 2025 Reporte de Sentimiento Meli+. Visualizaci√≥n interactiva.</p>
    </div>
  </footer>


  <script>
    /* ===== Sentimiento (Vertiente 1) ===== */
    const sentimentData = {
      "Brasil": {
        "sentimentIndex": [80, 75, 72, 70, 68, 55, 58, 60, 62, 50, 52, 55, 58, 90, 88, 85],
        "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25", "Nov 25", "Dic 25"],
        "events": [
          { "month": "Sep 24", "text": "Lanzamiento Meli+" },
          { "month": "Feb 25", "text": "Cambio % cashback" },
          { "month": "Jun 25", "text": "Cambio env√≠o gratis" },
          { "month": "Oct 25", "text": "Lanzamiento Meli+ Mega" }
        ],
        "table": [
          { "mes": "Oct 25", "detractores": "Bajo", "motivosDet": "Precio Meli+ Mega", "promotores": "Muy Alto", "motivosPro": "Bundle 4 streamings", "eventos": "Lanzamiento Meli+ Mega con Disney+, Netflix, HBO Max y AppleTV.", "competencia": "Amazon/Shopee mantienen presi√≥n en precios." },
          { "mes": "Jun 25", "detractores": "Alto", "motivosDet": "P√©rdida de valor", "promotores": "Estable", "motivosPro": "Disney+/Max", "eventos": "Env√≠o gratis generalizado a partir de R$19,90 diluye beneficio Meli+.", "competencia": "Shopee agresivo en cupones de env√≠o." },
          { "mes": "Feb 25", "detractores": "Muy Alto", "motivosDet": "Cashback reducido", "promotores": "Bajo", "motivosPro": "A√∫n conveniente", "eventos": "Ajuste a la baja en el porcentaje de cashback de Meli+.", "competencia": "Nubank y PicPay con ofertas de cashback agresivas." }
        ],
        "summary": `
          <h4>Resumen de Octubre-Diciembre 2025</h4>
          <p>El lanzamiento de <strong>Meli+ Mega</strong> en octubre gener√≥ un pico hist√≥rico de sentimiento positivo, superando el 90. Los usuarios valoran masivamente el paquete de 4 servicios de streaming a un precio competitivo. El sentimiento se mantiene muy alto en los meses siguientes.</p>
          <ul><li><strong>Motivos Promotores Clave:</strong> Valor percibido del bundle de streaming, rendimiento del 120% CDI en 'cofrinhos', y la conveniencia de centralizar suscripciones.</li>
          <li><strong>Motivos Detractores Menores:</strong> Algunos usuarios consideran el precio de R$39,90 elevado, aunque son una minor√≠a. Persisten quejas aisladas sobre la log√≠stica en fechas de alta demanda.</li></ul>
          <blockquote>"O Meli+ Mega √© simplesmente o melhor custo-benef√≠cio do Brasil hoje. Juntei tudo que eu pagava separado e ainda economizei. Genial!"<br><small>‚Äî Usuario en Reclame Aqui</small></blockquote>
        `
      },
      "M√©xico": {
        "sentimentIndex": [82, 78, 75, 73, 70, 60, 62, 65, 75, 70, 68, 67, 65, 66, 64, 63],
        "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25", "Nov 25", "Dic 25"],
        "events": [
          { "month": "Sep 24", "text": "Lanzamiento Meli+" },
          { "month": "Feb 25", "text": "Cambio % cashback" },
          { "month": "May 25", "text": "Hot Sale MX" }
        ],
        "table": [
          { "mes": "May 25", "detractores": "Alto", "motivosDet": "Retrasos en env√≠os", "promotores": "Muy Alto", "motivosPro": "Descuentos Hot Sale", "eventos": "Hot Sale con ofertas exclusivas para miembros Meli+.", "competencia": "Amazon y Walmart con campa√±as agresivas." },
          { "mes": "Feb 25", "detractores": "Muy Alto", "motivosDet": "Cashback reducido", "promotores": "Bajo", "motivosPro": "Env√≠os gratis", "eventos": "Reducci√≥n del cashback, similar a Brasil, genera fuerte reacci√≥n negativa.", "competencia": "Klar y Nubank lanzan productos de cr√©dito competitivos." },
          { "mes": "Sep 24", "detractores": "Bajo", "motivosDet": "Confusi√≥n beneficios", "promotores": "Alto", "motivosPro": "Disney+/Max gratis", "eventos": "Lanzamiento de Meli+ con fuerte campa√±a de marketing.", "competencia": "Amazon Prime como principal rival." }
        ],
        "summary": `
          <h4>Resumen de Octubre-Diciembre 2025</h4>
          <p>El sentimiento en M√©xico se ha estabilizado en un nivel 'Estable-Bajo' despu√©s de la volatilidad de la primera mitad del a√±o. La propuesta de valor de los env√≠os y los servicios de streaming incluidos (Disney+/Max) son los pilares del programa, pero la competencia de Amazon Prime y las nuevas ofertas de lealtad de bancos digitales como Nubank ejercen presi√≥n constante.</p>
          <ul><li><strong>Motivos Promotores Clave:</strong> Env√≠os gratis sin m√≠nimo de compra, acceso a Disney+ y Max.</li>
          <li><strong>Motivos Detractores Recurrentes:</strong> Percepci√≥n de que los descuentos exclusivos no son significativos, comparaci√≥n constante con la rapidez de entrega de Amazon en zonas metropolitanas.</li></ul>
          <blockquote>"Uso Meli+ m√°s que nada por los env√≠os y porque ya me incluye el Disney. Si no fuera por eso, no s√© si lo pagar√≠a. Las ofertas 'exclusivas' casi no las uso."<br><small>‚Äî Comentario en Apestan.com</small></blockquote>
        `
      },
      "Chile": {
        "sentimentIndex": [60, 62, 63, 65, 64, 66, 68, 80, 78, 77, 75, 74, 72, 73, 71, 70],
        "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25", "Nov 25", "Dic 25"],
        "events": [
          { "month": "Abr 25", "text": "Nuevos beneficios Meli+" }
        ],
        "table": [
          { "mes": "Abr 25", "detractores": "Bajo", "motivosDet": "Poca difusi√≥n", "promotores": "Alto", "motivosPro": "Descuentos en comercios", "eventos": "Se a√±aden nuevos descuentos en comercios asociados y farmacias.", "competencia": "Falabella (CMR) y Ripley con descuentos agresivos." },
          { "mes": "Dic 24", "detractores": "Estable", "motivosDet": "Env√≠os lentos a regiones", "promotores": "Estable", "motivosPro": "Env√≠os gratis en RM", "eventos": "Temporada navide√±a, alta demanda log√≠stica.", "competencia": "Competidores de retail con ofertas navide√±as." }
        ],
        "summary": `
          <h4>Resumen de Octubre-Diciembre 2025</h4>
          <p>El sentimiento se mantiene en un nivel 'Alto' pero con una ligera tendencia a la baja desde el peak de abril. Los beneficios de env√≠o gratis y el acceso a streaming son bien valorados, pero la competencia de los programas de lealtad de Falabella (CMR) y Ripley, muy arraigados, es el principal desaf√≠o. Los usuarios comparan constantemente los descuentos y opciones de financiamiento.</p>
          <ul><li><strong>Motivos Promotores Clave:</strong> Env√≠os gratis, acceso a Disney+.</li>
          <li><strong>Motivos Detractores Recurrentes:</strong> Tiempos de entrega fuera de la Regi√≥n Metropolitana, percepci√≥n de que los descuentos de la competencia retail son m√°s atractivos.</li></ul>
          <blockquote>"Tengo Meli+ y me sirve para los env√≠os, pero al final para compras grandes siempre termino viendo las ofertas de CMR Puntos. Ah√≠ siento que el descuento es m√°s real."<br><small>‚Äî Usuario en Reddit (r/chile)</small></blockquote>
        `
      },
      "Argentina": {
        "sentimentIndex": [55, 58, 57, 56, 55, 54, 55, 58, 75, 72, 70, 68, 67, 66, 65, 64],
        "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25", "Nov 25", "Dic 25"],
        "events": [
          { "month": "May 25", "text": "Lanzamiento Meli+" }
        ],
        "table": [
          { "mes": "May 25", "detractores": "Medio", "motivosDet": "Confusi√≥n migraci√≥n", "promotores": "Alto", "motivosPro": "Disney+/Max gratis", "eventos": "Meli+ reemplaza a Nivel 6, con una nueva oferta de valor.", "competencia": "Ual√° lanza programa de puntos." },
          { "mes": "Ene 25", "detractores": "Estable", "motivosDet": "Pocos beneficios", "promotores": "Estable", "motivosPro": "Descuentos en Mercado Pago", "eventos": "Sentimiento estable de Nivel 6 antes del cambio.", "competencia": "Programas de fidelidad bancarios." }
        ],
        "summary": `
          <h4>Resumen de Octubre-Diciembre 2025</h4>
          <p>Tras el exitoso lanzamiento de Meli+ en mayo, que sustituy√≥ al programa Nivel 6, el sentimiento se ha moderado pero se mantiene en niveles positivos. La inclusi√≥n sin costo de Disney+ y Max fue el principal catalizador. Sin embargo, el contexto econ√≥mico influye en la percepci√≥n de valor, y los usuarios son muy sensibles a cualquier ajuste de precio o beneficio.</p>
          <ul><li><strong>Motivos Promotores Clave:</strong> Acceso a dos plataformas de streaming "gratis", env√≠os sin costo, cuotas sin inter√©s en productos seleccionados.</li>
          <li><strong>Motivos Detractores Recurrentes:</strong> Dificultad para encontrar productos con cuotas sin inter√©s, quejas sobre la atenci√≥n al cliente.</li></ul>
          <blockquote>"Pas√© de Nivel 6 a Meli+ y fue un golazo. Ya solo con lo que me ahorro de Disney y Max se paga solo. El resto es yapa."<br><small>‚Äî Post en un foro de tecnolog√≠a.</small></blockquote>
        `
      },
      "Colombia": {
        "sentimentIndex": [58, 57, 56, 55, 54, 53, 52, 48, 50, 51, 53, 80, 78, 76, 75, 74],
        "labels": ["Sep 24", "Oct 24", "Nov 24", "Dic 24", "Ene 25", "Feb 25", "Mar 25", "Abr 25", "May 25", "Jun 25", "Jul 25", "Ago 25", "Sep 25", "Oct 25", "Nov 25", "Dic 25"],
        "events": [
          { "month": "May 25", "text": "Amazon Prime llega a CO" },
          { "month": "Ago 25", "text": "Lanzamiento Meli+" }
        ],
        "table": [
          { "mes": "Ago 25", "detractores": "Bajo", "motivosDet": "Precio de suscripci√≥n", "promotores": "Muy Alto", "motivosPro": "Disney+/Max, env√≠os", "eventos": "Lanzamiento de Meli+, reemplazando Nivel 6.", "competencia": "Amazon Prime ya operativo en el pa√≠s." },
          { "mes": "May 25", "detractores": "Alto", "motivosDet": "Comparaci√≥n con Amazon", "promotores": "Bajo", "motivosPro": "Ninguno espec√≠fico", "eventos": "La llegada de Amazon Prime genera conversaci√≥n negativa sobre Nivel 6.", "competencia": "Lanzamiento oficial de Amazon Prime en Colombia." }
        ],
        "summary": `
          <h4>Resumen de Octubre-Diciembre 2025</h4>
          <p>El lanzamiento de Meli+ en agosto fue una respuesta contundente y exitosa a la llegada de Amazon Prime en mayo. El sentimiento se dispar√≥ y se ha mantenido en niveles 'Altos'. La oferta combinada de env√≠os y streaming posicion√≥ a Meli+ como un competidor directo y, para muchos, superior a la oferta inicial de Amazon Prime en el pa√≠s.</p>
          <ul><li><strong>Motivos Promotores Clave:</strong> Propuesta de valor superior a la competencia (Amazon, Rappi Prime), acceso a Disney+ y Max.</li>
          <li><strong>Motivos Detractores Menores:</strong> Quejas sobre cobertura de env√≠os r√°pidos fuera de las ciudades principales, comparaciones de cat√°logo de Prime Video vs. Meli+.</li></ul>
          <blockquote>"Amazon lleg√≥ y pens√© que se comer√≠an el mercado, pero Mercado Libre reaccion√≥ perfecto con Meli+. Me da m√°s beneficios por casi lo mismo. Bien jugado."<br><small>‚Äî Usuario en YouTube.</small></blockquote>
        `
      }
    };


    /* ===== Vertiente 2 (Alertas) y Vertiente 3 (Plataformas) ===== */
    const newsData = [
      { "id": 1, "entity": "Shein", "country": "M√©xico", "impact": "Alto", "title": "M√©xico impone aranceles del 35% a importaciones de fast-fashion de Shein y Temu", "url": "https://www.gob.mx/se/prensa/comunicado-nuevos-aranceles-textiles-2025", "date": "19-12-2025", "category": "Sanci√≥n Legal", "summary": "La Secretar√≠a de Econom√≠a de M√©xico oficializ√≥ la aplicaci√≥n de aranceles del 35% a las importaciones de textiles y calzado de varias empresas de fast-fashion, afectando directamente el modelo de negocio de Shein y Temu en el pa√≠s.", "analysis": "Impacto directo en precios al consumidor y competitividad de estas plataformas frente a sellers locales de Mercado Libre. Oportunidad para Meli en la categor√≠a de moda." },
      { "id": 2, "entity": "Amazon Prime", "country": "Brasil", "impact": "Alto", "title": "Amazon Anuncia Parceria Exclusiva de Streaming com a Conmebol para a Libertadores a partir de 2026 no Brasil", "url": "https://press.aboutamazon.com/br/noticias/amazon-prime-video-conmebol-libertadores-partnership", "date": "15-12-2025", "category": "Derechos/Deportes", "summary": "Amazon Prime Video asegura los derechos exclusivos para un paquete de partidos de la CONMEBOL Libertadores en Brasil por un periodo de tres a√±os, fortaleciendo su oferta de deportes en vivo.", "analysis": "Movimiento estrat√©gico que aumenta significativamente el valor de Prime en Brasil. Meli+ debe evaluar el impacto en la percepci√≥n de valor de su bundle de entretenimiento." },
      { "id": 3, "entity": "Uber One", "country": "Argentina", "impact": "Medio", "title": "Uber One anuncia la inclusi√≥n de descuentos en supermercados para sus miembros en Argentina", "url": "https://www.uber.com/es-AR/newsroom/uber-one-supermercados-diciembre-2025/", "date": "17-12-2025", "category": "Estrategia", "summary": "Uber One suma a su programa de membres√≠a descuentos exclusivos y env√≠os gratis en cadenas de supermercados seleccionadas en Buenos Aires, C√≥rdoba y Rosario.", "analysis": "Expansi√≥n del programa de lealtad a una vertical clave. Compite con los beneficios de Meli+ en la categor√≠a de Supermercado." },
      { "id": 4, "entity": "Rappi Pro", "country": "Colombia", "impact": "Medio", "title": "Rappi Pro integra IA para optimizar las rutas de entrega y reducir tiempos en Bogot√° y Medell√≠n", "url": "https://blog.rappi.com/colombia/rappi-pro-lanza-optimizacion-ia/", "date": "11-12-2025", "category": "Producto", "summary": "Rappi anuncia la implementaci√≥n de un nuevo algoritmo de IA para su servicio 'Turbo' que promete reducir los tiempos de entrega promedio en un 15% para los usuarios de Rappi Pro.", "analysis": "Mejora la competitividad de Rappi en la velocidad de entrega, un factor clave de decisi√≥n para los consumidores. Presiona sobre la promesa de entrega de Meli." }
    ];
    const contentNewsData = [
      { "id": 101, "entity": "Disney+", "impact": "Alto", "title": "Disney Reacquires Full Streaming Rights for Spider-Man Catalog in Deal with Sony; All Films to Hit Disney+ Globally in 2026", "url": "https://thewaltdisneycompany.com/disney-sony-spiderman-streaming-deal-2025/", "date": "20-12-2025", "category": "Derechos/Deportes", "summary": "En un acuerdo hist√≥rico, The Walt Disney Company y Sony Pictures anunciaron que el cat√°logo completo de pel√≠culas de Spider-Man estar√° disponible en Disney+ a nivel mundial a partir de mediados de 2026.", "analysis": "A√±ade un valor inmenso y muy esperado al cat√°logo de Disney+, fortaleciendo su posici√≥n competitiva y el atractivo del bundle de Meli+." },
      { "id": 102, "entity": "Netflix", "impact": "Alto", "title": "Netflix Confirms Global Launch of Ad-Supported 'Basic Plus' Tier with 4K and Offline Downloads in Q1 2026", "url": "https://about.netflix.com/en/news/introducing-basic-plus-tier-q1-2026", "date": "12-12-2025", "category": "Estrategia", "summary": "Netflix confirma un nuevo plan global con anuncios que incluir√° caracter√≠sticas premium como streaming en 4K y descargas, posicionado entre el plan con anuncios actual y el est√°ndar sin anuncios.", "analysis": "Estrategia para aumentar el ARPU de los planes con anuncios y atraer suscriptores de planes m√°s caros. Podr√≠a impactar la percepci√≥n de valor de los planes incluidos en Meli+ Mega." },
      { "id": 103, "entity": "Spotify", "impact": "Medio", "title": "Spotify Expands 'Jam' Feature to Allow Collaborative AI-Generated Playlists", "url": "https://newsroom.spotify.com/2025-12-18/ai-jams-collaborative-playlists/", "date": "18-12-2025", "category": "Producto", "summary": "La funci√≥n 'Jam' de Spotify ahora permitir√° a los usuarios crear playlists de forma colaborativa con la ayuda de IA, que sugerir√° canciones bas√°ndose en los gustos combinados de los participantes.", "analysis": "Innovaci√≥n en producto que mejora la experiencia social y de descubrimiento, manteniendo a Spotify relevante frente a competidores como Apple Music y YouTube Music." },
      { "id": 104, "entity": "Max", "impact": "Medio", "title": "Warner Bros. Discovery to Bundle Max and Discovery+ at a Discounted Rate in Latin America", "url": "https://wbd.com/press/wbd-announces-max-discovery-plus-bundle-latam", "date": "16-12-2025", "category": "Estrategia", "summary": "WBD lanzar√° un nuevo paquete que combina las suscripciones de Max y Discovery+ en mercados clave de Am√©rica Latina, incluyendo Brasil y M√©xico, a partir de febrero de 2026.", "analysis": "Busca consolidar su base de suscriptores y competir con ofertas de bundles m√°s agresivas, como las de Disney+/Star+ y las incluidas en Meli+." },
      { "id": 105, "entity": "OpenAI", "impact": "Medio", "title": "OpenAI Releases GPT-4.5-Turbo, A Faster and More Cost-Effective Model for API Users", "url": "https://openai.com/blog/gpt-4-5-turbo", "date": "20-12-2025", "category": "Flagship AI", "summary": "OpenAI lanza un modelo intermedio, GPT-4.5-Turbo, que ofrece mayor velocidad y costos de API reducidos en comparaci√≥n con GPT-4, sin ser el esperado salto a GPT-5.", "analysis": "Permite a las empresas (incluyendo competidores de Meli) integrar IA m√°s avanzada de forma m√°s econ√≥mica, acelerando la carrera de features basadas en IA." },
      { "id": 106, "entity": "Apple TV+", "impact": "Medio", "title": "Apple TV+ greenlights 'Foundation' for two more seasons, confirming long-term commitment to flagship sci-fi series", "url": "https://www.apple.com/tv-pr/news/2025/12/apple-tv-renews-foundation-for-seasons-four-and-five/", "date": "13-12-2025", "category": "Estrategia", "summary": "Apple renueva su costosa serie de ciencia ficci√≥n 'Foundation' por dos temporadas m√°s, se√±alando una estrategia de inversi√≥n a largo plazo en contenido original de alto perfil para retener suscriptores.", "analysis": "Refuerza la imagen de Apple TV+ como una plataforma de contenido premium y de alta calidad, un diferenciador clave en un mercado saturado." },
      { "id": 107, "entity": "Vix Premium", "impact": "Medio", "title": "ViX Premium Secures Exclusive First-Window Rights for All 2026 Award-Winning Cannes Films in Mexico and Brazil", "url": "https://televisaunivision.com/press/vix-premium-secures-cannes-film-rights-for-2026/", "date": "10-12-2025", "category": "Derechos/Deportes", "summary": "TelevisaUnivision anuncia un acuerdo para que ViX Premium sea la casa exclusiva en streaming de las pel√≠culas galardonadas en el Festival de Cannes 2026 para M√©xico y Brasil.", "analysis": "Movimiento para atraer a un nicho de audiencia cin√©fila y posicionar a ViX como una plataforma con contenido de prestigio, m√°s all√° de las telenovelas y el deporte." }
    ];


    /* ===== LISTAS MAESTRAS ===== */
    const ALL_NEWS_COUNTRIES = ['Argentina','Brasil','Chile','M√©xico','Todos los Pa√≠ses'];
    const ALL_NEWS_COMPANIES = [
      'Amazon Prime','Shein','Temu','Shopee','Tiendanube','Rappi Pro','Uber One','Netflix','Spotify Premium','OpenAI (ChatGPT Premium)','Disney+',
      'Nubank Ultravioleta','Smiles','Globoplay','Nubank','Ual√°','Cablevisi√≥n Flow','Amazon Prime Video','DGO','Mach'
    ];
    const ALL_NEWS_CATEGORIES = [
      'Cambio de Precio','Lanzamiento','Fusi√≥n/Adquisici√≥n','Sanci√≥n Legal','Estrategia','Producto',
      'Resultados Financieros','Derechos/Deportes','Flagship AI'
    ];


    const ALL_CONTENT_COUNTRIES = ['Argentina','Brasil','Chile','M√©xico','Todos los Pa√≠ses'];
    const ALL_CONTENT_COMPANIES = [
      'Disney+','Netflix','Apple TV+','Max','Paramount+','Universal+','Vix Premium','Globoplay','Spotify','Deezer','OpenAI'
    ];
    const ALL_CONTENT_CATEGORIES = [
      'Cambio de Precio','Lanzamiento','Fusi√≥n/Adquisici√≥n','Sanci√≥n Legal','Estrategia','Producto',
      'Resultados Financieros','Derechos/Deportes','Flagship AI'
    ];


    const chartColors = { main: '#2563eb', event: '#f59e0b' };


    const tabButtons = document.querySelectorAll('.tab-btn');
    const countryName = document.getElementById('country-name');
    const sentimentTableBody = document.getElementById('sentiment-table-body');
    const sentimentSummary = document.getElementById('sentiment-summary');
    let sentimentChart = null;


    const alertsGrid = document.getElementById('alerts-grid');
    const newsNoResults = document.getElementById('no-news-results');
    const newsFilterCountryContainer = document.getElementById('news-filter-country');
    const newsFilterCompanyContainer = document.getElementById('news-filter-company');
    const newsFilterCategoryContainer = document.getElementById('news-filter-category');
    let newsFilters = { country: [], company: [], category: [] };


    const contentAlertsGrid = document.getElementById('content-alerts-grid');
    const contentNewsNoResults = document.getElementById('no-content-results');
    const contentFilterCountryContainer = document.getElementById('content-filter-country');
    const contentFilterCompanyContainer = document.getElementById('content-filter-company');
    const contentFilterCategoryContainer = document.getElementById('content-filter-category');
    let contentFilters = { country: [], company: [], category: [] };


    /* ==== Helpers del gr√°fico ==== */
    function renderChart(data) {
      const ctx = document.getElementById('sentimentChart').getContext('2d');
      if (sentimentChart) sentimentChart.destroy();
      sentimentChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: data.labels,
          datasets: [{
            label: '√çndice de Sentimiento',
            data: data.sentimentIndex,
            borderColor: chartColors.main,
            backgroundColor: 'rgba(37, 99, 235, 0.2)',
            borderWidth: 2, fill: true,
            pointBackgroundColor: data.labels.map(l => data.events.find(e => e.month === l) ? chartColors.event : chartColors.main),
            pointRadius: data.labels.map(l => data.events.find(e => e.month === l) ? 6 : 4),
            pointHoverRadius: 8
          }]
        },
        options: {
          responsive: true, maintainAspectRatio: false,
          scales: { y: { beginAtZero: true, max: 100, title: { display: true, text: '√çndice de Sentimiento (0-100)', font: { weight: 'bold' } } } },
          plugins: { tooltip: { callbacks: { title: (items) => {
            const m = items[0].label; const ev = data.events.find(e => e.month === m);
            return m + (ev ? `\nEvento: ${ev.text}` : '');
          }}}}
        }
      });
    }


    function renderSentimentTable(rows) {
      sentimentTableBody.innerHTML = '';
      rows.forEach(row => {
        const tr = document.createElement('tr');
        tr.className = 'hover:bg-gray-50';
        tr.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${row.mes}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.detractores}</td>
          <td class="px-6 py-4 text-sm"><span class="inline-block px-2 py-1 rounded-md ring-1 ring-rose-100 bg-rose-50 text-rose-700">${row.motivosDet}</span></td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.promotores}</td>
          <td class="px-6 py-4 text-sm"><span class="inline-block px-2 py-1 rounded-md ring-1 ring-emerald-100 bg-emerald-50 text-emerald-700">${row.motivosPro}</span></td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.eventos}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.competencia}</td>`;
        sentimentTableBody.appendChild(tr);
      });
    }
    function renderSummary(html) { sentimentSummary.innerHTML = html; }
    function updateSentimentContent(country) {
      const data = sentimentData[country]; if (!data) return;
      countryName.textContent = country; renderChart(data); renderSentimentTable(data.table); renderSummary(data.summary);
    }


    /* ==== Etiquetas de categor√≠a ==== */
    function getCategoryTag(category) {
      switch (category) {
        case 'Sanci√≥n Legal': return `<span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Cambio de Precio': return `<span class="bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Lanzamiento': return `<span class="bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Fusi√≥n/Adquisici√≥n': return `<span class="bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Estrategia': return `<span class="bg-purple-100 text-purple-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Producto': return `<span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Resultados Financieros': return `<span class="bg-teal-100 text-teal-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Derechos/Deportes': return `<span class="bg-indigo-100 text-indigo-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Flagship AI': return `<span class="bg-pink-100 text-pink-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        default: return `<span class="bg-gray-100 text-gray-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
      }
    }


    /* ==== Helpers de fuente (host en texto plano, sin enlace) ==== */
    function sourceHost(u) {
      try { return new URL(u).hostname.replace(/^www\./, ''); } catch { return ''; }
    }


    /* ==== Render tarjetas (Vertiente 2) ‚Äî sin enlaces ni badge de impacto ==== */
    function renderNewsCards() {
      alertsGrid.innerHTML = '';
      const filtered = newsData.filter(item => {
        const cm = newsFilters.country.length === 0 || newsFilters.country.includes('all') || newsFilters.country.includes(item.country);
        const em = newsFilters.company.length === 0 || newsFilters.company.includes('all') || newsFilters.company.includes(item.entity);
        const km = newsFilters.category.length === 0 || newsFilters.category.includes('all') || newsFilters.category.includes(item.category);
        return cm && em && km;
      }).sort((a,b) => {
        const da = new Date((a.date || '').split('-').reverse().join('-'));
        const db = new Date((b.date || '').split('-').reverse().join('-'));
        if (da > db) return -1; if (da < db) return 1;
        const order = { 'Alto':1, 'Medio':2, 'Bajo':3 }; return (order[a.impact]||9) - (order[b.impact]||9);
      });
      newsNoResults.classList.toggle('hidden', filtered.length !== 0);
      filtered.forEach(row => {
        const host = sourceHost(row.url);
        const card = document.createElement('div');
        card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
        card.innerHTML = `
          <div class="flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold text-gray-800 text-lg">${row.entity}${row.country ? ` (${row.country})` : ''}</h4>
              ${getCategoryTag(row.category)}
            </div>
            <p class="text-gray-700 mb-3">${row.title}</p>
            <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${host || '‚Äî'}</span></p>
          </div>
          <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
            <span>${row.date || ''}</span>
          </div>`;
        alertsGrid.appendChild(card);
      });
    }


    /* ==== Render tarjetas (Vertiente 3) ‚Äî sin enlaces ni badge de impacto ==== */
    function renderContentNewsCards() {
      contentAlertsGrid.innerHTML = '';
      const filtered = contentNewsData.filter(item => {
        const cm = contentFilters.country.length === 0 || contentFilters.country.includes('all') || contentFilters.country.includes(item.country);
        const em = contentFilters.company.length === 0 || contentFilters.company.includes('all') || contentFilters.company.includes(item.entity);
        const km = contentFilters.category.length === 0 || contentFilters.category.includes('all') || contentFilters.category.includes(item.category);
        return cm && em && km;
      }).sort((a,b) => {
        const da = new Date((a.date || '').split('-').reverse().join('-'));
        const db = new Date((b.date || '').split('-').reverse().join('-'));
        if (da > db) return -1; if (da < db) return 1;
        const order = { 'Alto':1, 'Medio':2, 'Bajo':3 }; return (order[a.impact]||9) - (order[b.impact]||9);
      });
      contentNewsNoResults.classList.toggle('hidden', filtered.length !== 0);
      filtered.forEach(row => {
        const host = sourceHost(row.url);
        const card = document.createElement('div');
        card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
        card.innerHTML = `
          <div class="flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold text-gray-800 text-lg">${row.entity}</h4>
              ${getCategoryTag(row.category)}
            </div>
            <p class="text-gray-700 mb-3">${row.title}</p>
            <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${host || '‚Äî'}</span></p>
          </div>
          <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
            <span>${row.date || ''}</span>
          </div>`;
        contentAlertsGrid.appendChild(card);
      });
    }


    /* ==== Poblar filtros ==== */
    function populateCheckboxes(container, allItems, group) {
      const idBase = group + '-';
      const html = [
        `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}all" value="all" class="mr-2"><label for="${idBase}all">Todos</label></div>`,
        ...allItems.map(c => `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}${c}" value="${c}" class="mr-2"><label for="${idBase}${c}">${c}</label></div>`)
      ].join('');
      container.innerHTML = html;
    }


    function updateNewsFilters() {
      populateCheckboxes(newsFilterCountryContainer, ALL_NEWS_COUNTRIES.filter(c => c!=='Todos los Pa√≠ses'), 'news-country-');
      populateCheckboxes(newsFilterCompanyContainer, ALL_NEWS_COMPANIES, 'news-company-');
      populateCheckboxes(newsFilterCategoryContainer, ALL_NEWS_CATEGORIES, 'news-category-');
      newsFilterCountryContainer.addEventListener('change', filterNews);
      newsFilterCompanyContainer.addEventListener('change', filterNews);
      newsFilterCategoryContainer.addEventListener('change', filterNews);
    }


    function updateContentNewsFilters() {
      populateCheckboxes(contentFilterCountryContainer, ALL_CONTENT_COUNTRIES.filter(c => c!=='Todos los Pa√≠ses'), 'content-country-');
      populateCheckboxes(contentFilterCompanyContainer, ALL_CONTENT_COMPANIES, 'content-company-');
      populateCheckboxes(contentFilterCategoryContainer, ALL_CONTENT_CATEGORIES, 'content-category-');
      contentFilterCountryContainer.addEventListener('change', filterContentNews);
      contentFilterCompanyContainer.addEventListener('change', filterContentNews);
      contentFilterCategoryContainer.addEventListener('change', filterContentNews);
    }


    /* ==== L√≥gica de filtros ==== */
    function getSelected(container) {
      return Array.from(container.querySelectorAll('input:checked')).map(i => i.value);
    }
    function normalizeSelectAll(container, selectedValues) {
      const allBox = container.querySelector('input[value="all"]');
      const rest = [...container.querySelectorAll('input[type="checkbox"]')].filter(b => b.value !== 'all');
      if (!allBox) return;
      if (selectedValues.includes('all')) rest.forEach(b => b.checked = false);
      else if (rest.some(b => b.checked)) allBox.checked = false;
    }
    function filterNews() {
      let sc = getSelected(newsFilterCountryContainer);
      let se = getSelected(newsFilterCompanyContainer);
      let sk = getSelected(newsFilterCategoryContainer);
      normalizeSelectAll(newsFilterCountryContainer, sc);
      normalizeSelectAll(newsFilterCompanyContainer, se);
      normalizeSelectAll(newsFilterCategoryContainer, sk);
      sc = getSelected(newsFilterCountryContainer);
      se = getSelected(newsFilterCompanyContainer);
      sk = getSelected(newsFilterCategoryContainer);
      newsFilters.country = sc.includes('all') ? [] : sc;
      newsFilters.company = se.includes('all') ? [] : se;
      newsFilters.category = sk.includes('all') ? [] : sk;
      renderNewsCards();
    }
    function filterContentNews() {
      let sc = getSelected(contentFilterCountryContainer);
      let se = getSelected(contentFilterCompanyContainer);
      let sk = getSelected(contentFilterCategoryContainer);
      normalizeSelectAll(contentFilterCountryContainer, sc);
      normalizeSelectAll(contentFilterCompanyContainer, se);
      normalizeSelectAll(contentFilterCategoryContainer, sk);
      sc = getSelected(contentFilterCountryContainer);
      se = getSelected(contentFilterCompanyContainer);
      sk = getSelected(contentFilterCategoryContainer);
      contentFilters.country = sc.includes('all') ? [] : sc;
      contentFilters.company = se.includes('all') ? [] : se;
      contentFilters.category = sk.includes('all') ? [] : sk;
      renderContentNewsCards();
    }


    /* ==== Tabs & Boot ==== */
    tabButtons.forEach(btn => btn.addEventListener('click', (e) => {
      tabButtons.forEach(b => b.classList.remove('active'));
      e.target.classList.add('active');
      updateSentimentContent(e.target.dataset.country);
    }));
    document.getElementById('news-reset-filters').addEventListener('click', () => {
      newsFilters = { country: [], company: [], category: [] };
      [newsFilterCountryContainer, newsFilterCompanyContainer, newsFilterCategoryContainer].forEach(c => {
        Array.from(c.querySelectorAll('input')).forEach(i => i.checked = false);
      });
      renderNewsCards();
    });
    document.getElementById('content-reset-filters').addEventListener('click', () => {
      contentFilters = { country: [], company: [], category: [] };
      [contentFilterCountryContainer, contentFilterCompanyContainer, contentFilterCategoryContainer].forEach(c => {
        Array.from(c.querySelectorAll('input')).forEach(i => i.checked = false);
      });
      renderContentNewsCards();
    });


    updateSentimentContent('Brasil');
    updateNewsFilters(); renderNewsCards();
    updateContentNewsFilters(); renderContentNewsCards();
  </script>
</body>
</html>