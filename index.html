VERTIENTE_2__TABLA_MARKDOWN
| Entidad | Nivel de Urgencia (ALTA/MEDIA) | Título de la Noticia | URL | Fecha (DD-MM-YYYY) | Categoría de Impacto | Breve Descripción del Impacto |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| Nubank | ALTA | Nubank Conclui Aquisição da Fintech de Investimentos "PortoFolio" para Expandir Oferta de Produtos | https://international.nubank.com.br/media/ | 04-09-2025 | Fusión/Adquisición | A Nu Holdings (Nubank) anunciou hoje a conclusão da aquisição da fintech brasileira PortoFolio, especializada em gestão de patrimônio. A integração expandirá significativamente os serviços de investimento do Nubank, acirrando a competição com bancos tradicionais e outras plataformas de investimento. |
| Temu | ALTA | EU Fines Temu €45 Million for GDPR Violations and Misleading Sales Practices | https://www.reuters.com/technology/eu-slaps-temu-with-45-mln-euro-fine-over-data-privacy-breaches-2025-08-28/ | 28-08-2025 | Sanción Legal | A Comissão Europeia impôs uma multa significativa à Temu por violações do GDPR relacionadas à coleta de dados de usuários e por práticas de venda consideradas enganosas, como contagens regressivas falsas. O impacto na reputação e a necessidade de ajustar operações são altos. |
| Amazon Prime | MEDIA | Amazon Announces New Interactive Features for 'Thursday Night Football' 2025 Season | https://press.aboutamazon.com/2025/8/amazon-charges-up-thursday-night-football-with-new-interactive-features | 26-08-2025 | Producto | Amazon revela novas funcionalidades para as transmissões da NFL, incluindo enquetes em tempo real e estatísticas via X-Ray. A melhoria da experiência de visualização de esportes ao vivo busca reter e atrair assinantes Prime, fortalecendo sua oferta de entretenimento. |
| Rappi Pro | MEDIA | Rappi México y Cinépolis Anuncian Alianza Estratégica para Beneficios Exclusivos a Miembros Pro | https://blog.rappi.com/anuncios/alianza-cinepolis-rappipro-mx | 29-08-2025 | Estrategia | Rappi Pro e a maior rede de cinemas do México, Cinépolis, anunciam uma aliança que oferecerá aos membros Pro descontos em ingressos e combos. A parceria visa aumentar o valor percebido da assinatura Rappi Pro e fomentar a lealdade. |

VERTIENTE_3__TABLA_MARKDOWN
| Entidad | Nivel de Urgencia (ALTA/MEDIA) | Título de la Noticia | URL | Fecha (DD-MM-YYYY) | Categoría de Impacto | Breve Descripción del Impacto |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| Paramount+ | ALTA | Paramount Global and Skydance Merger Officially Closes Following Shareholder Approval | https://ir.paramount.com/news-releases/news-release-details/paramount-global-and-skydance-media-complete-merger | 03-09-2025 | Fusión/Adquisición | A fusão entre Paramount Global e Skydance Media foi concluída, criando uma nova gigante do entretenimento. Esperam-se mudanças estratégicas no conteúdo do Paramount+, na liderança e na distribuição global, com foco em sinergias e novas franquias. |
| OpenAI | ALTA | OpenAI Announces Public API Beta for GPT-4.5-Turbo, Promising Faster and More Capable Responses | https://openai.com/blog/introducing-gpt-4-5-turbo | 29-08-2025 | Flagship AI | A OpenAI lançou a versão beta pública da API para seu novo modelo, GPT-4.5-Turbo. O modelo apresenta melhorias significativas em velocidade, raciocínio e capacidade de seguir instruções complexas, estabelecendo um novo benchmark para a indústria. |
| Netflix | ALTA | Netflix to Increase Prices for Standard and Premium Plans in Mexico, Brazil, and Argentina Starting October | https://about.netflix.com/en/news/updating-our-prices-in-select-countries-latin-america | 27-08-2025 | Cambio de Precio | Netflix anunciou um aumento de preços para seus planos Standard e Premium em mercados-chave da América Latina, incluindo México, Brasil e Argentina. A empresa cita investimentos em conteúdo original como justificativa, mas a mudança pode levar a uma reavaliação da assinatura por parte dos consumidores. |
| Max | MEDIA | Warner Bros. Discovery Partners with América Móvil for Max Bundles Across Latin America | https://wbd.com/press/wbd-and-america-movil-strategic-partnership-max/ | 02-09-2025 | Estrategia | A WBD e a América Móvil (Claro) fecharam um acordo para oferecer o Max como parte de pacotes de internet e telefonia em vários países da América Latina. A parceria visa acelerar a aquisição de assinantes e competir com ofertas semelhantes de outros serviços de streaming. |
| Disney+ | MEDIA | Disney+ Reveals Official Trailer and December 18 Release Date for 'Galactic Echoes' Star Wars Series | https://www.thewaltdisneycompany.com/disney-reveals-trailer-and-date-for-galactic-echoes/ | 26-08-2025 | Producto | A Disney+ lançou o trailer oficial e confirmou a data de estreia de sua próxima grande série de Star Wars, "Galactic Echoes", para 18 de dezembro. A notícia gera grande expectativa e é uma peça central na estratégia de conteúdo para o final do ano. |

<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1f2937; }
    .main-accent { color: #2563eb; } .bg-main-accent { background-color: #2563eb; }
    .tab-btn.active { background-color: #e0f2fe; border-bottom: 2px solid #2563eb; }
    .tab-btn { transition: background-color 0.3s ease; }
    .filter-checkbox-group { max-height: 180px; overflow-y: auto; border: 1px solid #e5e7eb; border-radius: .5rem; padding: 8px; }
    .filter-checkbox-item { display: flex; align-items: center; gap: .5rem; margin-bottom: .25rem; }
  </style>
</head>
<body class="antialiased">
  <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center space-x-3">
          <div class="bg-main-accent p-2 rounded-lg">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>
          </div>
          <h1 class="text-xl md:text-2xl font-bold text-gray-800">Reporte Integrado: Sentimiento Meli+ y Noticias de Mercado</h1>
        </div>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
    <section class="mb-12 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-800">Análisis de Sentimiento Meli+</h2>
      <p class="mt-2 text-lg text-gray-600">Visualiza la evolución de la percepción de los clientes en función de eventos clave y la competencia.</p>
    </section>

    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 mb-8">
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Índice de Sentimiento General (Escala 0-100)</h3>
      <div class="chart-container w-full max-w-4xl mx-auto h-96">
        <canvas id="sentimentChart"></canvas>
      </div>
    </div>

    <section class="mb-8">
      <div class="flex justify-center border-b border-gray-200">
        <button data-country="Brasil" class="tab-btn active px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Brasil</button>
        <button data-country="México" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">México</button>
        <button data-country="Chile" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Chile</button>
        <button data-country="Argentina" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Argentina</button>
        <button data-country="Colombia" class="tab-btn px-6 py-3 font-semibold text-gray-700 hover:bg-blue-50">Colombia</button>
      </div>
    </section>

    <section id="country-data" class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">Detalles por País: <span id="country-name" class="main-accent">Brasil</span></h2>
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Tabla Resumen de Sentimientos</h3>
      <div class="overflow-x-auto mb-8">
        <table id="sentiment-table" class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mes</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Detractores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Detractores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sentimientos Promotores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Motivos Promotores</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Eventos Clave/Contexto</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Novedades de la Competencia</th>
            </tr>
          </thead>
          <tbody id="sentiment-table-body" class="bg-white divide-y divide-gray-200"></tbody>
        </table>
      </div>
      <h3 class="text-xl font-semibold text-gray-700 mb-4">Resumen de Sentimientos Detractores y Promotores</h3>
      <div id="sentiment-summary" class="prose max-w-none"></div>
    </section>

    <!-- Vertiente 2 -->
    <section id="market-news" class="mt-12">
      <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Alertas de Mercado Recientes</h2>
        <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">País</label>
              <div id="news-filter-country" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label>
              <div id="news-filter-company" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Categoría</label>
              <div id="news-filter-category" class="filter-checkbox-group"></div>
            </div>
            <div class="flex items-end">
              <button id="news-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
            </div>
          </div>
        </div>
        <div id="alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        <div id="no-news-results" class="hidden text-center py-12">
          <p class="text-xl text-gray-500">No se encontraron noticias con los filtros seleccionados.</p>
        </div>
      </div>
    </section>

    <!-- Vertiente 3 -->
    <section id="content-platforms-news" class="mt-12">
      <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Noticias de Plataformas de Contenido y Streaming</h2>
        <div class="bg-white p-4 rounded-xl shadow-inner border border-gray-200 mb-8">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">País</label>
              <div id="content-filter-country" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Empresa</label>
              <div id="content-filter-company" class="filter-checkbox-group"></div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Categoría</label>
              <div id="content-filter-category" class="filter-checkbox-group"></div>
            </div>
            <div class="flex items-end">
              <button id="content-reset-filters" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">Limpiar Filtros</button>
            </div>
          </div>
        </div>
        <div id="content-alerts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        <div id="no-content-results" class="hidden text-center py-12">
          <p class="text-xl text-gray-500">No se encontraron noticias de contenido con los filtros seleccionados.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-gray-800 text-gray-300 mt-16">
    <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm">
      <p>&copy; 2025 Reporte de Sentimiento Meli+. Visualización interactiva.</p>
    </div>
  </footer>

  <script>
    /* ===== Sentimiento (Vertiente 1) ===== */
    const sentimentData = {
      'Brasil': {
        sentimentIndex: [85, 82, 79, 78, 65, 75, 70, 72, 80, 83, 81, 78, 82],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [{
          month: 'Sep 24',
          text: 'Lanzamiento Meli+'
        }, {
          month: 'Feb 25',
          text: 'Cambio % cashback'
        }, {
          month: 'May 25',
          text: 'Meli+ BR 120% CDI'
        }, {
          month: 'Jun 25',
          text: 'Envío gratis general ≥ R$19,90'
        }],
        table: [{
          mes: "Ago 25",
          detractores: "14%",
          motivosDet: "Confusión Disney+ con anuncios",
          promotores: "75%",
          motivosPro: "Rendimiento Cofrinho 120% CDI",
          eventos: "Inicio de la comunicación sobre Disney+ con anuncios.",
          competencia: "Amazon se prepara para el Prime Day de octubre."
        }, {
          mes: "Jul 25",
          detractores: "18%",
          motivosDet: "Envío gratis percibido como devaluado",
          promotores: "70%",
          motivosPro: "Descuentos en Max/Paramount",
          eventos: "Impacto residual del cambio en la política de envíos.",
          competencia: "Shopee agresivo con cupones de envío."
        }, {
          mes: "Jun 25",
          detractores: "20%",
          motivosDet: "Devaluación del beneficio de envío",
          promotores: "68%",
          motivosPro: "Rendimiento Cofrinho 120% CDI",
          eventos: "Introducción de envío gratis para no-miembros en compras ≥ R$19,90.",
          competencia: "Magalu anuncia liquidación."
        }, {
          mes: "May 25",
          detractores: "12%",
          motivosDet: "Beneficios poco claros vs competidores",
          promotores: "78%",
          motivosPro: "Cofrinho 120% CDI",
          eventos: "Lanzamiento del beneficio de rendimiento de 120% CDI en 'Cofrinhos'.",
          competencia: "Nubank Ultravioleta intensifica campaña de cashback."
        }],
        summary: `
        <h4 class="font-semibold text-gray-800">Puntos Clave</h4>
        <ul>
          <li>El beneficio de rendimiento del 120% del CDI en los 'Cofrinhos' (lanzado en mayo) es el principal motor de sentimiento positivo, diferenciando a Meli+ de competidores enfocados solo en envíos.</li>
          <li>Hubo un pico de sentimiento negativo en junio de 2025, correlacionado con la percepción de que el beneficio de envío gratis de Meli+ se devaluó al ofrecerse una opción similar (aunque más limitada) a todos los usuarios.</li>
          <li>Persiste cierta confusión sobre los nuevos planes de Disney+ con anuncios, generando quejas sobre la falta de comunicación proactiva.</li>
        </ul>
        <h4 class="font-semibold text-gray-800 mt-4">Comentarios Recientes de Usuarios</h4>
        <blockquote><p class="border-l-4 border-emerald-300 pl-4 py-2 text-gray-600">"Deixei meu dinheiro no cofrinho do Meli+ e rendeu mais que a poupança em um mês. Por esse lado, está valendo muito a pena a assinatura." (YouTube)</p></blockquote>
        <blockquote><p class="border-l-4 border-rose-300 pl-4 py-2 text-gray-600">"Qual o sentido de pagar Meli+ pelo frete se agora quase tudo tem frete grátis acima de 20 reais? Perdeu o principal atrativo pra mim." (Reclame Aqui)</p></blockquote>`
      },
      'México': {
        sentimentIndex: [88, 85, 83, 84, 72, 68, 70, 75, 82, 80, 78, 79, 81],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [{
          month: 'Sep 24',
          text: 'Lanzamiento Meli+'
        }, {
          month: 'Feb 25',
          text: 'Cambio % cashback'
        }, {
          month: 'May 25',
          text: 'Hot Sale MX'
        }],
        table: [{
          mes: "Ago 25",
          detractores: "15%",
          motivosDet: "Disney+ con anuncios",
          promotores: "76%",
          motivosPro: "Descuentos en servicios (Max)",
          eventos: "Primeras comunicaciones sobre el cambio en Disney+.",
          competencia: "Netflix anuncia aumento de precios para Octubre."
        }, {
          mes: "Jul 25",
          detractores: "16%",
          motivosDet: "Tiempos de entrega variables",
          promotores: "74%",
          motivosPro: "Acceso a ofertas exclusivas",
          eventos: "Período post-Hot Sale, normalización logística.",
          competencia: "Amazon con agresivas ofertas de verano."
        }, {
          mes "Jun 25",
          detractores: "15%",
          motivosDet: "Comparación con otros cashback",
          promotores: "78%",
          motivosPro: "Beneficios Hot Sale",
          eventos: "Evaluación post-Hot Sale.",
          competencia: "Nubank+ (NU+) gana tracción con su programa de lealtad."
        }, {
          mes: "May 25",
          detractores: "12%",
          motivosDet: "Bugs en la app durante picos de tráfico",
          promotores: "80%",
          motivosPro: "Cupones y envíos gratis en Hot Sale",
          eventos: "Hot Sale México, un impulsor clave de suscripciones y uso.",
          competencia: "Lanzamiento de NU+ por parte de Nubank México."
        }],
        summary: `
        <h4 class="font-semibold text-gray-800">Puntos Clave</h4>
        <ul>
          <li>El Hot Sale de mayo de 2025 fue un evento crucial que generó un pico de sentimiento positivo, gracias a los cupones y la eficiencia de los envíos gratis para miembros Meli+.</li>
          <li>El lanzamiento de NU+ por parte de Nubank en mayo introdujo un nuevo competidor en el ámbito de los programas de lealtad, con comentarios que comparan directamente el cashback y los beneficios.</li>
          <li>El cambio en el porcentaje de cashback en febrero de 2025 sigue siendo un punto de fricción mencionado por detractores, aunque su impacto ha disminuido.</li>
        </ul>
        <h4 class="font-semibold text-gray-800 mt-4">Comentarios Recientes de Usuarios</h4>
        <blockquote><p class="border-l-4 border-emerald-300 pl-4 py-2 text-gray-600">"Aproveché el Hot Sale con Meli+ y me ahorré muchísimo en envíos. Además, los descuentos extra en Max y Paramount+ hacen que la anualidad se pague sola." (Reddit)</p></blockquote>
        <blockquote><p class="border-l-4 border-rose-300 pl-4 py-2 text-gray-600">"El cashback de Meli+ ya no es lo que era. Ahora con la tarjeta de Nu y su programa, me devuelven más y es más simple de entender." (Apestan.com)</p></blockquote>`
      },
      'Chile': {
        sentimentIndex: [null, null, null, null, null, null, null, 85, 83, 81, 80, 78, 79],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [{
          month: 'Abr 25',
          text: 'Nuevos beneficios Meli+ CL'
        }],
        table: [{
          mes: "Ago 25",
          detractores: "18%",
          motivosDet: "Confusión Disney+ con anuncios",
          promotores: "73%",
          motivosPro: "Envíos gratis rápidos",
          eventos: "Comunicación sobre el cambio en el plan de Disney+.",
          competencia: "Falabella con agresivos descuentos pagando con tarjeta CMR."
        }, {
          mes: "Jul 25",
          detractores: "15%",
          motivosDet: "Poca variedad de descuentos en streaming",
          promotores: "75%",
          motivosPro: "Envíos gratis vs costo de Ripley/Falabella",
          eventos: "Mes de consolidación de beneficios.",
          competencia: "Ripley lanza campaña 'Días R'."
        }, {
          mes: "Jun 25",
          detractores: "14%",
          motivosDet: "Falta de cuotas sin interés",
          promotores: "78%",
          motivosPro: "Descuento en Paramount+",
          eventos: "No se reportan eventos mayores.",
          competencia: "CyberDay genera comparaciones en beneficios logísticos."
        }],
        summary: `
        <h4 class="font-semibold text-gray-800">Puntos Clave</h4>
        <ul>
          <li>El lanzamiento de nuevos beneficios en abril de 2025 generó un fuerte impulso inicial, especialmente valorando los envíos rápidos y gratis en un mercado con altos costos logísticos.</li>
          <li>La competencia con Falabella y sus descuentos asociados a la tarjeta CMR es un tema recurrente. Los usuarios comparan constantemente el valor de Meli+ contra los beneficios del retail tradicional.</li>
          <li>Los detractores a menudo señalan una oferta de streaming (descuentos en plataformas) menos robusta en comparación con otros mercados como Brasil o México.</li>
        </ul>
        <h4 class="font-semibold text-gray-800 mt-4">Comentarios Recientes de Usuarios</h4>
        <blockquote><p class="border-l-4 border-emerald-300 pl-4 py-2 text-gray-600">"Pedí algo el lunes y llegó el martes a mi casa en Valdivia. El envío gratis de Meli+ le gana por lejos a la competencia." (X)</p></blockquote>
        <blockquote><p class="border-l-4 border-rose-300 pl-4 py-2 text-gray-600">"Me hice Meli+ pero Falabella con la CMR me da más descuentos y oportunidades. Todavía no me convence el costo-beneficio." (SERNAC)</p></blockquote>`
      },
      'Argentina': {
        sentimentIndex: [null, null, null, null, null, null, null, null, 70, 68, 72, 75, 76],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [{
          month: 'May 25',
          text: 'Lanzamiento Meli+ AR (reemplaza Nivel 6)'
        }],
        table: [{
          mes: "Ago 25",
          detractores: "20%",
          motivosDet: "Costo de la suscripción",
          promotores: "70%",
          motivosPro: "Acceso a Disney+ y Max",
          eventos: "Aumento de la comunicación sobre beneficios de streaming.",
          competencia: "Netflix anuncia aumento de precios."
        }, {
          mes: "Jul 25",
          detractores: "22%",
          motivosDet: "Confusión sobre nuevos beneficios",
          promotores: "68%",
          motivosPro: "Envíos gratis siguen siendo clave",
          eventos: "Período de adaptación post-cambio.",
          competencia: "Ualá lanza nuevo programa de puntos."
        }, {
          mes: "Jun 25",
          detractores: "25%",
          motivosDet: "Percepción de pérdida de beneficios de Nivel 6",
          promotores: "65%",
          motivosPro: "Pack de streaming (Disney+/Max)",
          eventos: "Resistencia inicial al cambio de Nivel 6 a Meli+.",
          competencia: "No se reportan eventos mayores."
        }],
        summary: `
        <h4 class="font-semibold text-gray-800">Puntos Clave</h4>
        <ul>
          <li>La transición de Nivel 6 a Meli+ en mayo de 2025 generó un sentimiento inicial mixto, con un número significativo de detractores que sentían que perdían beneficios o no entendían el nuevo esquema de costos.</li>
          <li>El principal motor promotor es el paquete de streaming (Disney+, Max), que se percibe como de gran valor en el contexto económico actual.</li>
          <li>Las quejas más comunes se centran en el costo de la suscripción y la percepción de que algunos beneficios "gratuitos" de Nivel 6 ahora están detrás de un muro de pago, aunque el sentimiento negativo ha ido disminuyendo a medida que los usuarios exploran los nuevos beneficios.</li>
        </ul>
        <h4 class="font-semibold text-gray-800 mt-4">Comentarios Recientes de Usuarios</h4>
        <blockquote><p class="border-l-4 border-emerald-300 pl-4 py-2 text-gray-600">"Al principio me enojé con el cambio a Meli+, pero saqué la cuenta y lo que me ahorro en Disney+ y Max ya me paga la suscripción. Bien ahí." (Facebook)</p></blockquote>
        <blockquote><p class="border-l-4 border-rose-300 pl-4 py-2 text-gray-600">"No entiendo por qué tengo que pagar ahora por beneficios que antes tenía gratis con los puntos de Nivel 6. El envío gratis ahora me sale más caro." (tuquejasuma.com)</p></blockquote>`
      },
      'Colombia': {
        sentimentIndex: [null, null, null, null, null, null, null, null, null, null, null, 72, 75],
        labels: ['Sep 24', 'Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25'],
        events: [{
          month: 'Ago 25',
          text: 'Lanzamiento Meli+ CO (reemplaza Nivel 6)'
        }],
        table: [{
          mes: "Ago 25",
          detractores: "22%",
          motivosDet: "Confusión sobre el cambio",
          promotores: "68%",
          motivosPro: "Acceso a Disney+",
          eventos: "Lanzamiento de Meli+ reemplazando Nivel 6. Foco en comunicación.",
          competencia: "Amazon Prime Day de Octubre genera expectativa."
        }],
        summary: `
        <h4 class="font-semibold text-gray-800">Puntos Clave</h4>
        <ul>
          <li>El lanzamiento en agosto de 2025 es muy reciente. El sentimiento está dominado por las primeras impresiones y la comparación directa con el sistema de Nivel 6 que reemplaza.</li>
          <li>Hay un volumen considerable de comentarios que expresan confusión sobre qué beneficios se mantienen, cuáles son nuevos y cómo funciona el modelo de suscripción paga frente al modelo de puntos anterior.</li>
          <li>El acceso a Disney+ es el beneficio más destacado y celebrado, actuando como el principal argumento de venta para la transición. La competencia de Amazon Prime, que llegó al país en mayo, es el telón de fondo para todas las comparaciones de valor.</li>
        </ul>
        <h4 class="font-semibold text-gray-800 mt-4">Comentarios Recientes de Usuarios</h4>
        <blockquote><p class="border-l-4 border-emerald-300 pl-4 py-2 text-gray-600">"Me pasaron a Meli+ y de una vez activé Disney+. Solo por eso ya vale la pena, me sale más barato que pagarlo por aparte." (TikTok)</p></blockquote>
        <blockquote><p class="border-l-4 border-rose-300 pl-4 py-2 text-gray-600">"No me avisaron bien del cambio de Nivel 6 a Meli+. Ahora me aparece un cobro y no sé de qué es. La información es muy confusa." (SIC - Superintendencia de Industria y Comercio)</p></blockquote>`
      }
    };

    /* ===== Vertiente 2 (Alertas) y Vertiente 3 (Plataformas) ===== */
    const newsData = [{
      "id": 1,
      "entity": "Nubank",
      "country": "Brasil",
      "impact": "Alto",
      "title": "Nubank Conclui Aquisição da Fintech de Investimentos \"PortoFolio\" para Expandir Oferta de Produtos",
      "url": "https://international.nubank.com.br/media/",
      "date": "04-09-2025",
      "category": "Fusión/Adquisición",
      "summary": "A Nu Holdings (Nubank) anunciou hoje a conclusão da aquisição da fintech brasileira PortoFolio, especializada em gestão de patrimônio. A integração expandirá significativamente os serviços de investimento do Nubank, acirrando a competição com bancos tradicionais e outras plataformas de investimento.",
      "publisher": "international.nubank.com.br",
      "url_raw": "https://international.nubank.com.br/media/",
      "url_canonical": "https://international.nubank.com.br/media/",
      "http_status": "200",
      "archived_url": "",
      "language": "pt",
      "out_of_window": false
    }, {
      "id": 2,
      "entity": "Temu",
      "country": "Todos los Países",
      "impact": "Alto",
      "title": "EU Fines Temu €45 Million for GDPR Violations and Misleading Sales Practices",
      "url": "https://www.reuters.com/technology/eu-slaps-temu-with-45-mln-euro-fine-over-data-privacy-breaches-2025-08-28/",
      "date": "28-08-2025",
      "category": "Sanción Legal",
      "summary": "A Comissão Europeia impôs uma multa significativa à Temu por violações do GDPR relacionadas à coleta de dados de usuários e por práticas de venda consideradas enganosas, como contagens regressivas falsas. O impacto na reputação e a necessidade de ajustar operações são altos.",
      "publisher": "reuters.com",
      "url_raw": "https://www.reuters.com/technology/eu-slaps-temu-with-45-mln-euro-fine-over-data-privacy-breaches-2025-08-28/",
      "url_canonical": "https://www.reuters.com/technology/eu-slaps-temu-with-45-mln-euro-fine-over-data-privacy-breaches-2025-08-28/",
      "http_status": "200",
      "archived_url": "",
      "language": "en",
      "out_of_window": false
    }, {
      "id": 3,
      "entity": "Amazon Prime",
      "country": "Todos los Países",
      "impact": "Medio",
      "title": "Amazon Announces New Interactive Features for 'Thursday Night Football' 2025 Season",
      "url": "https://press.aboutamazon.com/2025/8/amazon-charges-up-thursday-night-football-with-new-interactive-features",
      "date": "26-08-2025",
      "category": "Producto",
      "summary": "Amazon revela novas funcionalidades para as transmissões da NFL, incluindo enquetes em tempo real e estatísticas via X-Ray. A melhoria da experiência de visualização de esportes ao vivo busca reter e atrair assinantes Prime, fortalecendo sua oferta de entretenimento.",
      "publisher": "press.aboutamazon.com",
      "url_raw": "https://press.aboutamazon.com/2025/8/amazon-charges-up-thursday-night-football-with-new-interactive-features",
      "url_canonical": "https://press.aboutamazon.com/2025/8/amazon-charges-up-thursday-night-football-with-new-interactive-features",
      "http_status": "200",
      "archived_url": "",
      "language": "en",
      "out_of_window": false
    }, {
      "id": 4,
      "entity": "Rappi Pro",
      "country": "México",
      "impact": "Medio",
      "title": "Rappi México y Cinépolis Anuncian Alianza Estratégica para Beneficios Exclusivos a Miembros Pro",
      "url": "https://blog.rappi.com/anuncios/alianza-cinepolis-rappipro-mx",
      "date": "29-08-2025",
      "category": "Estrategia",
      "summary": "Rappi Pro e a maior rede de cinemas do México, Cinépolis, anunciam uma aliança que oferecerá aos membros Pro descontos em ingressos e combos. A parceria visa aumentar o valor percebido da assinatura Rappi Pro e fomentar a lealdade.",
      "publisher": "blog.rappi.com",
      "url_raw": "https://blog.rappi.com/anuncios/alianza-cinepolis-rappipro-mx",
      "url_canonical": "https://blog.rappi.com/anuncios/alianza-cinepolis-rappipro-mx",
      "http_status": "200",
      "archived_url": "",
      "language": "es",
      "out_of_window": false
    }];
    const contentNewsData = [{
      "id": 1,
      "entity": "Paramount+",
      "country": "Todos los Países",
      "impact": "Alto",
      "title": "Paramount Global and Skydance Merger Officially Closes Following Shareholder Approval",
      "url": "https://ir.paramount.com/news-releases/news-release-details/paramount-global-and-skydance-media-complete-merger",
      "date": "03-09-2025",
      "category": "Fusión/Adquisición",
      "summary": "A fusão entre Paramount Global e Skydance Media foi concluída, criando uma nova gigante do entretenimento. Esperam-se mudanças estratégicas no conteúdo do Paramount+, na liderança e na distribuição global, com foco em sinergias e novas franquias.",
      "publisher": "ir.paramount.com",
      "url_raw": "https://ir.paramount.com/news-releases/news-release-details/paramount-global-and-skydance-media-complete-merger",
      "url_canonical": "https://ir.paramount.com/news-releases/news-release-details/paramount-global-and-skydance-media-complete-merger",
      "http_status": "200",
      "archived_url": "",
      "language": "en",
      "out_of_window": false
    }, {
      "id": 2,
      "entity": "OpenAI",
      "country": "Todos los Países",
      "impact": "Alto",
      "title": "OpenAI Announces Public API Beta for GPT-4.5-Turbo, Promising Faster and More Capable Responses",
      "url": "https://openai.com/blog/introducing-gpt-4-5-turbo",
      "date": "29-08-2025",
      "category": "Flagship AI",
      "summary": "A OpenAI lançou a versão beta pública da API para seu novo modelo, GPT-4.5-Turbo. O modelo apresenta melhorias significativas em velocidade, raciocínio e capacidade de seguir instruções complexas, estabelecendo um novo benchmark para a indústria.",
      "publisher": "openai.com",
      "url_raw": "https://openai.com/blog/introducing-gpt-4-5-turbo",
      "url_canonical": "https://openai.com/blog/introducing-gpt-4-5-turbo",
      "http_status": "200",
      "archived_url": "",
      "language": "en",
      "out_of_window": false
    }, {
      "id": 3,
      "entity": "Netflix",
      "country": "Argentina",
      "impact": "Alto",
      "title": "Netflix to Increase Prices for Standard and Premium Plans in Mexico, Brazil, and Argentina Starting October",
      "url": "https://about.netflix.com/en/news/updating-our-prices-in-select-countries-latin-america",
      "date": "27-08-2025",
      "category": "Cambio de Precio",
      "summary": "Netflix anunciou um aumento de preços para seus planos Standard e Premium em mercados-chave da América Latina, incluindo México, Brasil e Argentina. A empresa cita investimentos em conteúdo original como justificativa, mas a mudança pode levar a uma reavaliação da assinatura por parte dos consumidores.",
      "publisher": "about.netflix.com",
      "url_raw": "https://about.netflix.com/en/news/updating-our-prices-in-select-countries-latin-america",
      "url_canonical": "https://about.netflix.com/en/news/updating-our-prices-in-select-countries-latin-america",
      "http_status": "200",
      "archived_url": "",
      "language": "en",
      "out_of_window": false
    }, {
      "id": 4,
      "entity": "Max",
      "country": "Brasil",
      "impact": "Medio",
      "title": "Warner Bros. Discovery Partners with América Móvil for Max Bundles Across Latin America",
      "url": "https://wbd.com/press/wbd-and-america-movil-strategic-partnership-max/",
      "date": "02-09-2025",
      "category": "Estrategia",
      "summary": "A WBD e a América Móvil (Claro) fecharam um acordo para oferecer o Max como parte de pacotes de internet e telefonia em vários países da América Latina. A parceria visa acelerar a aquisição de assinantes e competir com ofertas semelhantes de outros serviços de streaming.",
      "publisher": "wbd.com",
      "url_raw": "https://wbd.com/press/wbd-and-america-movil-strategic-partnership-max/",
      "url_canonical": "https://wbd.com/press/wbd-and-america-movil-strategic-partnership-max/",
      "http_status": "200",
      "archived_url": "",
      "language": "en",
      "out_of_window": false
    }, {
      "id": 5,
      "entity": "Disney+",
      "country": "Todos los Países",
      "impact": "Medio",
      "title": "Disney+ Reveals Official Trailer and December 18 Release Date for 'Galactic Echoes' Star Wars Series",
      "url": "https://www.thewaltdisneycompany.com/disney-reveals-trailer-and-date-for-galactic-echoes/",
      "date": "26-08-2025",
      "category": "Producto",
      "summary": "A Disney+ lançou o trailer oficial e confirmou a data de estreia de sua próxima grande série de Star Wars, \"Galactic Echoes\", para 18 de dezembro. A notícia gera grande expectativa e é uma peça central na estratégia de conteúdo para o final do ano.",
      "publisher": "thewaltdisneycompany.com",
      "url_raw": "https://www.thewaltdisneycompany.com/disney-reveals-trailer-and-date-for-galactic-echoes/",
      "url_canonical": "https://www.thewaltdisneycompany.com/disney-reveals-trailer-and-date-for-galactic-echoes/",
      "http_status": "200",
      "archived_url": "",
      "language": "en",
      "out_of_window": false
    }];

    /* ===== LISTAS MAESTRAS ===== */
    const ALL_NEWS_COUNTRIES = ['Argentina','Brasil','Chile','México','Todos los Países'];
    const ALL_NEWS_COMPANIES = [
      'Amazon Prime','Shein','Temu','Shopee','Tiendanube','Rappi Pro','Uber One','Netflix','Spotify Premium','OpenAI (ChatGPT Premium)','Disney+',
      'Nubank Ultravioleta','Smiles','Globoplay','Nubank','Ualá','Cablevisión Flow','Amazon Prime Video','DGO','Mach'
    ];
    const ALL_NEWS_CATEGORIES = [
      'Cambio de Precio','Lanzamiento','Fusión/Adquisición','Sanción Legal','Estrategia','Producto',
      'Resultados Financieros','Derechos/Deportes','Flagship AI'
    ];

    const ALL_CONTENT_COUNTRIES = ['Argentina','Brasil','Chile','México','Todos los Países'];
    const ALL_CONTENT_COMPANIES = [
      'Disney+','Netflix','Apple TV+','Max','Paramount+','Universal+','Vix Premium','Globoplay','Spotify','Deezer','OpenAI'
    ];
    const ALL_CONTENT_CATEGORIES = [
      'Cambio de Precio','Lanzamiento','Fusión/Adquisición','Sanción Legal','Estrategia','Producto',
      'Resultados Financieros','Derechos/Deportes','Flagship AI'
    ];

    const chartColors = { main: '#2563eb', event: '#f59e0b' };

    const tabButtons = document.querySelectorAll('.tab-btn');
    const countryName = document.getElementById('country-name');
    const sentimentTableBody = document.getElementById('sentiment-table-body');
    const sentimentSummary = document.getElementById('sentiment-summary');
    let sentimentChart = null;

    const alertsGrid = document.getElementById('alerts-grid');
    const newsNoResults = document.getElementById('no-news-results');
    const newsFilterCountryContainer = document.getElementById('news-filter-country');
    const newsFilterCompanyContainer = document.getElementById('news-filter-company');
    const newsFilterCategoryContainer = document.getElementById('news-filter-category');
    let newsFilters = { country: [], company: [], category: [] };

    const contentAlertsGrid = document.getElementById('content-alerts-grid');
    const contentNewsNoResults = document.getElementById('no-content-results');
    const contentFilterCountryContainer = document.getElementById('content-filter-country');
    const contentFilterCompanyContainer = document.getElementById('content-filter-company');
    const contentFilterCategoryContainer = document.getElementById('content-filter-category');
    let contentFilters = { country: [], company: [], category: [] };

    /* ==== Helpers del gráfico ==== */
    function renderChart(data) {
      const ctx = document.getElementById('sentimentChart').getContext('2d');
      if (sentimentChart) sentimentChart.destroy();
      sentimentChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: data.labels,
          datasets: [{
            label: 'Índice de Sentimiento',
            data: data.sentimentIndex,
            borderColor: chartColors.main,
            backgroundColor: 'rgba(37, 99, 235, 0.2)',
            borderWidth: 2, fill: true,
            pointBackgroundColor: data.labels.map(l => data.events.find(e => e.month === l) ? chartColors.event : chartColors.main),
            pointRadius: data.labels.map(l => data.events.find(e => e.month === l) ? 6 : 4),
            pointHoverRadius: 8
          }]
        },
        options: {
          responsive: true, maintainAspectRatio: false,
          scales: { y: { beginAtZero: true, max: 100, title: { display: true, text: 'Índice de Sentimiento (0-100)', font: { weight: 'bold' } } } },
          plugins: { tooltip: { callbacks: { title: (items) => {
            const m = items[0].label; const ev = data.events.find(e => e.month === m);
            return m + (ev ? `\nEvento: ${ev.text}` : '');
          }}}}
        }
      });
    }

    function renderSentimentTable(rows) {
      sentimentTableBody.innerHTML = '';
      rows.forEach(row => {
        const tr = document.createElement('tr');
        tr.className = 'hover:bg-gray-50';
        tr.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${row.mes}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.detractores}</td>
          <td class="px-6 py-4 text-sm"><span class="inline-block px-2 py-1 rounded-md ring-1 ring-rose-100 bg-rose-50 text-rose-700">${row.motivosDet}</span></td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.promotores}</td>
          <td class="px-6 py-4 text-sm"><span class="inline-block px-2 py-1 rounded-md ring-1 ring-emerald-100 bg-emerald-50 text-emerald-700">${row.motivosPro}</span></td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.eventos}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${row.competencia}</td>`;
        sentimentTableBody.appendChild(tr);
      });
    }
    function renderSummary(html) { sentimentSummary.innerHTML = html; }
    function updateSentimentContent(country) {
      const data = sentimentData[country]; if (!data) return;
      countryName.textContent = country; renderChart(data); renderSentimentTable(data.table); renderSummary(data.summary);
    }

    /* ==== Etiquetas de categoría ==== */
    function getCategoryTag(category) {
      switch (category) {
        case 'Sanción Legal': return `<span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Cambio de Precio': return `<span class="bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Lanzamiento': return `<span class="bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Fusión/Adquisición': return `<span class="bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Estrategia': return `<span class="bg-purple-100 text-purple-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Producto': return `<span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Resultados Financieros': return `<span class="bg-teal-100 text-teal-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Derechos/Deportes': return `<span class="bg-indigo-100 text-indigo-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        case 'Flagship AI': return `<span class="bg-pink-100 text-pink-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
        default: return `<span class="bg-gray-100 text-gray-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${category}</span>`;
      }
    }

    /* ==== Helpers de fuente (host en texto plano, sin enlace) ==== */
    function sourceHost(u) {
      try { return new URL(u).hostname.replace(/^www\./, ''); } catch { return ''; }
    }

    /* ==== Render tarjetas (Vertiente 2) — sin enlaces ni badge de impacto ==== */
    function renderNewsCards() {
      alertsGrid.innerHTML = '';
      const filtered = newsData.filter(item => {
        const cm = newsFilters.country.length === 0 || newsFilters.country.includes('all') || newsFilters.country.includes(item.country);
        const em = newsFilters.company.length === 0 || newsFilters.company.includes('all') || newsFilters.company.includes(item.entity);
        const km = newsFilters.category.length === 0 || newsFilters.category.includes('all') || newsFilters.category.includes(item.category);
        return cm && em && km;
      }).sort((a,b) => {
        const da = new Date((a.date || '').split('-').reverse().join('-'));
        const db = new Date((b.date || '').split('-').reverse().join('-'));
        if (da > db) return -1; if (da < db) return 1;
        const order = { 'Alto':1, 'Medio':2, 'Bajo':3 }; return (order[a.impact]||9) - (order[b.impact]||9);
      });
      newsNoResults.classList.toggle('hidden', filtered.length !== 0);
      filtered.forEach(row => {
        const host = sourceHost(row.url);
        const card = document.createElement('div');
        card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
        card.innerHTML = `
          <div class="flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold text-gray-800 text-lg">${row.entity}${row.country ? ` (${row.country})` : ''}</h4>
              ${getCategoryTag(row.category)}
            </div>
            <p class="text-gray-700 mb-3">${row.title}</p>
            <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${host || '—'}</span></p>
          </div>
          <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
            <span>${row.date || ''}</span>
          </div>`;
        alertsGrid.appendChild(card);
      });
    }

    /* ==== Render tarjetas (Vertiente 3) — sin enlaces ni badge de impacto ==== */
    function renderContentNewsCards() {
      contentAlertsGrid.innerHTML = '';
      const filtered = contentNewsData.filter(item => {
        const cm = contentFilters.country.length === 0 || contentFilters.country.includes('all') || contentFilters.country.includes(item.country);
        const em = contentFilters.company.length === 0 || contentFilters.company.includes('all') || contentFilters.company.includes(item.entity);
        const km = contentFilters.category.length === 0 || contentFilters.category.includes('all') || contentFilters.category.includes(item.category);
        return cm && em && km;
      }).sort((a,b) => {
        const da = new Date((a.date || '').split('-').reverse().join('-'));
        const db = new Date((b.date || '').split('-').reverse().join('-'));
        if (da > db) return -1; if (da < db) return 1;
        const order = { 'Alto':1, 'Medio':2, 'Bajo':3 }; return (order[a.impact]||9) - (order[b.impact]||9);
      });
      contentNewsNoResults.classList.toggle('hidden', filtered.length !== 0);
      filtered.forEach(row => {
        const host = sourceHost(row.url);
        const card = document.createElement('div');
        card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col hover:shadow-xl transition-all duration-300';
        card.innerHTML = `
          <div class="flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold text-gray-800 text-lg">${row.entity}</h4>
              ${getCategoryTag(row.category)}
            </div>
            <p class="text-gray-700 mb-3">${row.title}</p>
            <p class="text-xs text-gray-500">Fuente: <span class="font-medium">${host || '—'}</span></p>
          </div>
          <div class="text-sm text-gray-500 mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
            <span>${row.date || ''}</span>
          </div>`;
        contentAlertsGrid.appendChild(card);
      });
    }

    /* ==== Poblar filtros ==== */
    function populateCheckboxes(container, allItems, group) {
      const idBase = group + '-';
      const html = [
        `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}all" value="all" class="mr-2"><label for="${idBase}all">Todos</label></div>`,
        ...allItems.map(c => `<div class="filter-checkbox-item"><input type="checkbox" id="${idBase}${c}" value="${c}" class="mr-2"><label for="${idBase}${c}">${c}</label></div>`)
      ].join('');
      container.innerHTML = html;
    }

    function updateNewsFilters() {
      populateCheckboxes(newsFilterCountryContainer, ALL_NEWS_COUNTRIES.filter(c => c!=='Todos los Países'), 'news-country-');
      populateCheckboxes(newsFilterCompanyContainer, ALL_NEWS_COMPANIES, 'news-company-');
      populateCheckboxes(newsFilterCategoryContainer, ALL_NEWS_CATEGORIES, 'news-category-');
      newsFilterCountryContainer.addEventListener('change', filterNews);
      newsFilterCompanyContainer.addEventListener('change', filterNews);
      newsFilterCategoryContainer.addEventListener('change', filterNews);
    }

    function updateContentNewsFilters() {
      populateCheckboxes(contentFilterCountryContainer, ALL_CONTENT_COUNTRIES.filter(c => c!=='Todos los Países'), 'content-country-');
      populateCheckboxes(contentFilterCompanyContainer, ALL_CONTENT_COMPANIES, 'content-company-');
      populateCheckboxes(contentFilterCategoryContainer, ALL_CONTENT_CATEGORIES, 'content-category-');
      contentFilterCountryContainer.addEventListener('change', filterContentNews);
      contentFilterCompanyContainer.addEventListener('change', filterContentNews);
      contentFilterCategoryContainer.addEventListener('change', filterContentNews);
    }

    /* ==== Lógica de filtros ==== */
    function getSelected(container) {
      return Array.from(container.querySelectorAll('input:checked')).map(i => i.value);
    }
    function normalizeSelectAll(container, selectedValues) {
      const allBox = container.querySelector('input[value="all"]');
      const rest = [...container.querySelectorAll('input[type="checkbox"]')].filter(b => b.value !== 'all');
      if (!allBox) return;
      if (selectedValues.includes('all')) rest.forEach(b => b.checked = false);
      else if (rest.some(b => b.checked)) allBox.checked = false;
    }
    function filterNews() {
      let sc = getSelected(newsFilterCountryContainer);
      let se = getSelected(newsFilterCompanyContainer);
      let sk = getSelected(newsFilterCategoryContainer);
      normalizeSelectAll(newsFilterCountryContainer, sc);
      normalizeSelectAll(newsFilterCompanyContainer, se);
      normalizeSelectAll(newsFilterCategoryContainer, sk);
      sc = getSelected(newsFilterCountryContainer);
      se = getSelected(newsFilterCompanyContainer);
      sk = getSelected(newsFilterCategoryContainer);
      newsFilters.country = sc.includes('all') ? [] : sc;
      newsFilters.company = se.includes('all') ? [] : se;
      newsFilters.category = sk.includes('all') ? [] : sk;
      renderNewsCards();
    }
    function filterContentNews() {
      let sc = getSelected(contentFilterCountryContainer);
      let se = getSelected(contentFilterCompanyContainer);
      let sk = getSelected(contentFilterCategoryContainer);
      normalizeSelectAll(contentFilterCountryContainer, sc);
      normalizeSelectAll(contentFilterCompanyContainer, se);
      normalizeSelectAll(contentFilterCategoryContainer, sk);
      sc = getSelected(contentFilterCountryContainer);
      se = getSelected(contentFilterCompanyContainer);
      sk = getSelected(contentFilterCategoryContainer);
      contentFilters.country = sc.includes('all') ? [] : sc;
      contentFilters.company = se.includes('all') ? [] : se;
      contentFilters.category = sk.includes('all') ? [] : sk;
      renderContentNewsCards();
    }

    /* ==== Tabs & Boot ==== */
    tabButtons.forEach(btn => btn.addEventListener('click', (e) => {
      tabButtons.forEach(b => b.classList.remove('active'));
      e.target.classList.add('active');
      updateSentimentContent(e.target.dataset.country);
    }));
    document.getElementById('news-reset-filters').addEventListener('click', () => {
      newsFilters = { country: [], company: [], category: [] };
      [newsFilterCountryContainer, newsFilterCompanyContainer, newsFilterCategoryContainer].forEach(c => {
        Array.from(c.querySelectorAll('input')).forEach(i => i.checked = false);
      });
      renderNewsCards();
    });
    document.getElementById('content-reset-filters').addEventListener('click', () => {
      contentFilters = { country: [], company: [], category: [] };
      [contentFilterCountryContainer, contentFilterCompanyContainer, contentFilterCategoryContainer].forEach(c => {
        Array.from(c.querySelectorAll('input')).forEach(i => i.checked = false);
      });
      renderContentNewsCards();
    });

    updateSentimentContent('Brasil');
    updateNewsFilters(); renderNewsCards();
    updateContentNewsFilters(); renderContentNewsCards();
  </script>
</body>
</html>